import{r as b,j as fr}from"./index-BP3Pglto.js";import{R as Nr,T as vl,a as pr,b as la,c as Qn,I as Cl,S as un,D as ua,d as yl,P as El,V as ee,e as zt,f as qt,Q as kt,g as Bs,O as wn,h as Pi,i as ke,L as kr,j as Sn,F as Tt,k as lt,l as Ml,m as Tl,n as bl,o as en,M as ut,p as Dl,q as Rl,r as ha,s as Fl,t as xl,B as Pn,v as Il,w as Oe,x as da,y as mr,z as wl,A as js,E as Sl,G as fa,H as Pl,J as pa,K as Gl,N as Ll,U as _l,W as Ol,X as Hl,Y as Xs,Z as Gn,$ as Ul,a0 as Nl,a1 as kl,a2 as ma,a3 as Jt,a4 as Ar,a5 as Jl,a6 as Kl,a7 as Vl,a8 as ft,a9 as jl,aa as Xl,ab as Ql,ac as Yl,ad as pt,ae as Gi,af as Li,ag as _i,ah as Jr,ai as Aa,aj as Zl,ak as ga,al as He,am as ot,an as tn,ao as Nn,ap as Wl,aq as zl,ar as Vt,as as Ae,at as jt,au as ql,u as pn,_ as it,av as Ba,aw as Kr,ax as Es,ay as $l,az as eu,aA as gr,aB as tu,aC as nu,aD as su,aE as ru,aF as Br,aG as iu,aH as Oi,aI as ou,aJ as au,aK as cu,aL as lu,aM as uu,aN as hu,aO as du,aP as va,aQ as Hi,aR as fu,aS as pu}from"./extends-DN1lqPQV.js";const mu=parseInt(Nr.replace(/\D+/g,""));function Ui(t,e){if(e===vl)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===pr||e===la){let n=t.getIndex();if(n===null){const i=[],c=t.getAttribute("position");if(c!==void 0){for(let a=0;a<c.count;a++)i.push(a);t.setIndex(i),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const s=n.count-2,r=[];if(n)if(e===pr)for(let i=1;i<=s;i++)r.push(n.getX(0)),r.push(n.getX(i)),r.push(n.getX(i+1));else for(let i=0;i<s;i++)i%2===0?(r.push(n.getX(i)),r.push(n.getX(i+1)),r.push(n.getX(i+2))):(r.push(n.getX(i+2)),r.push(n.getX(i+1)),r.push(n.getX(i)));r.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=t.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}var We=Uint8Array,Mt=Uint16Array,vr=Uint32Array,Ca=new We([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ya=new We([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Au=new We([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ea=function(t,e){for(var n=new Mt(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];for(var r=new vr(n[30]),s=1;s<30;++s)for(var o=n[s];o<n[s+1];++o)r[o]=o-n[s]<<5|s;return[n,r]},Ma=Ea(Ca,2),Ta=Ma[0],gu=Ma[1];Ta[28]=258,gu[258]=28;var Bu=Ea(ya,0),vu=Bu[0],Cr=new Mt(32768);for(var Be=0;Be<32768;++Be){var Ct=(Be&43690)>>>1|(Be&21845)<<1;Ct=(Ct&52428)>>>2|(Ct&13107)<<2,Ct=(Ct&61680)>>>4|(Ct&3855)<<4,Cr[Be]=((Ct&65280)>>>8|(Ct&255)<<8)>>>1}var Ln=function(t,e,n){for(var s=t.length,r=0,o=new Mt(e);r<s;++r)++o[t[r]-1];var i=new Mt(e);for(r=0;r<e;++r)i[r]=i[r-1]+o[r-1]<<1;var c;if(n){c=new Mt(1<<e);var a=15-e;for(r=0;r<s;++r)if(t[r])for(var l=r<<4|t[r],u=e-t[r],h=i[t[r]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)c[Cr[h]>>>a]=l}else for(c=new Mt(s),r=0;r<s;++r)t[r]&&(c[r]=Cr[i[t[r]-1]++]>>>15-t[r]);return c},Yn=new We(288);for(var Be=0;Be<144;++Be)Yn[Be]=8;for(var Be=144;Be<256;++Be)Yn[Be]=9;for(var Be=256;Be<280;++Be)Yn[Be]=7;for(var Be=280;Be<288;++Be)Yn[Be]=8;var ba=new We(32);for(var Be=0;Be<32;++Be)ba[Be]=5;var Cu=Ln(Yn,9,1),yu=Ln(ba,5,1),Qs=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},tt=function(t,e,n){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(e&7)&n},Ys=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Eu=function(t){return(t/8|0)+(t&7&&1)},Mu=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var s=new(t instanceof Mt?Mt:t instanceof vr?vr:We)(n-e);return s.set(t.subarray(e,n)),s},Tu=function(t,e,n){var s=t.length;if(!s||n&&!n.l&&s<5)return e||new We(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new We(s*3));var i=function(ce){var ze=e.length;if(ce>ze){var qe=new We(Math.max(ze*2,ce));qe.set(e),e=qe}},c=n.f||0,a=n.p||0,l=n.b||0,u=n.l,h=n.d,d=n.m,m=n.n,A=s*8;do{if(!u){n.f=c=tt(t,a,1);var g=tt(t,a+1,3);if(a+=3,g)if(g==1)u=Cu,h=yu,d=9,m=5;else if(g==2){var F=tt(t,a,31)+257,w=tt(t,a+10,15)+4,T=F+tt(t,a+5,31)+1;a+=14;for(var M=new We(T),P=new We(19),D=0;D<w;++D)P[Au[D]]=tt(t,a+D*3,7);a+=w*3;for(var S=Qs(P),G=(1<<S)-1,Q=Ln(P,S,1),D=0;D<T;){var z=Q[tt(t,a,G)];a+=z&15;var B=z>>>4;if(B<16)M[D++]=B;else{var W=0,K=0;for(B==16?(K=3+tt(t,a,3),a+=2,W=M[D-1]):B==17?(K=3+tt(t,a,7),a+=3):B==18&&(K=11+tt(t,a,127),a+=7);K--;)M[D++]=W}}var ne=M.subarray(0,F),q=M.subarray(F);d=Qs(ne),m=Qs(q),u=Ln(ne,d,1),h=Ln(q,m,1)}else throw"invalid block type";else{var B=Eu(a)+4,C=t[B-4]|t[B-3]<<8,y=B+C;if(y>s){if(o)throw"unexpected EOF";break}r&&i(l+C),e.set(t.subarray(B,y),l),n.b=l+=C,n.p=a=y*8;continue}if(a>A){if(o)throw"unexpected EOF";break}}r&&i(l+131072);for(var oe=(1<<d)-1,le=(1<<m)-1,Me=a;;Me=a){var W=u[Ys(t,a)&oe],se=W>>>4;if(a+=W&15,a>A){if(o)throw"unexpected EOF";break}if(!W)throw"invalid length/literal";if(se<256)e[l++]=se;else if(se==256){Me=a,u=null;break}else{var Re=se-254;if(se>264){var D=se-257,he=Ca[D];Re=tt(t,a,(1<<he)-1)+Ta[D],a+=he}var be=h[Ys(t,a)&le],Ue=be>>>4;if(!be)throw"invalid distance";a+=be&15;var q=vu[Ue];if(Ue>3){var he=ya[Ue];q+=Ys(t,a)&(1<<he)-1,a+=he}if(a>A){if(o)throw"unexpected EOF";break}r&&i(l+131072);for(var Ft=l+Re;l<Ft;l+=4)e[l]=e[l-q],e[l+1]=e[l+1-q],e[l+2]=e[l+2-q],e[l+3]=e[l+3-q];l=Ft}}n.l=u,n.p=Me,n.b=l,u&&(c=1,n.m=d,n.d=h,n.n=m)}while(!c);return l==e.length?e:Mu(e,0,l)},bu=new We(0),Du=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function us(t,e){return Tu((Du(t),t.subarray(2,-4)),e)}var Ru=typeof TextDecoder<"u"&&new TextDecoder,Fu=0;try{Ru.decode(bu,{stream:!0}),Fu=1}catch{}const xu=t=>t&&t.isCubeTexture;class Iu extends Qn{constructor(e,n){var s,r;const o=xu(e),c=((r=o?(s=e.image[0])==null?void 0:s.width:e.image.width)!=null?r:1024)/4,a=Math.floor(Math.log2(c)),l=Math.pow(2,a),u=3*Math.max(l,16*7),h=4*l,d=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${a}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,A=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Nr.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,g={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},B=new Cl(1,16),C=new un({uniforms:g,fragmentShader:A,vertexShader:m,side:ua});super(B,C)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var wu=Object.defineProperty,Su=(t,e,n)=>e in t?wu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pu=(t,e,n)=>(Su(t,e+"",n),n);class Gu{constructor(){Pu(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(n)===-1&&s[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const s=this._listeners;return s[e]!==void 0&&s[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const s=this._listeners[e.type];if(s!==void 0){e.target=this;const r=s.slice(0);for(let o=0,i=r.length;o<i;o++)r[o].call(this,e);e.target=null}}}var Lu=Object.defineProperty,_u=(t,e,n)=>e in t?Lu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y=(t,e,n)=>(_u(t,typeof e!="symbol"?e+"":e,n),n);const hs=new yl,Ni=new El,Ou=Math.cos(70*(Math.PI/180)),ki=(t,e)=>(t%e+e)%e;let Hu=class extends Gu{constructor(e,n){super(),Y(this,"object"),Y(this,"domElement"),Y(this,"enabled",!0),Y(this,"target",new ee),Y(this,"minDistance",0),Y(this,"maxDistance",1/0),Y(this,"minZoom",0),Y(this,"maxZoom",1/0),Y(this,"minPolarAngle",0),Y(this,"maxPolarAngle",Math.PI),Y(this,"minAzimuthAngle",-1/0),Y(this,"maxAzimuthAngle",1/0),Y(this,"enableDamping",!1),Y(this,"dampingFactor",.05),Y(this,"enableZoom",!0),Y(this,"zoomSpeed",1),Y(this,"enableRotate",!0),Y(this,"rotateSpeed",1),Y(this,"enablePan",!0),Y(this,"panSpeed",1),Y(this,"screenSpacePanning",!0),Y(this,"keyPanSpeed",7),Y(this,"zoomToCursor",!1),Y(this,"autoRotate",!1),Y(this,"autoRotateSpeed",2),Y(this,"reverseOrbit",!1),Y(this,"reverseHorizontalOrbit",!1),Y(this,"reverseVerticalOrbit",!1),Y(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Y(this,"mouseButtons",{LEFT:zt.ROTATE,MIDDLE:zt.DOLLY,RIGHT:zt.PAN}),Y(this,"touches",{ONE:qt.ROTATE,TWO:qt.DOLLY_PAN}),Y(this,"target0"),Y(this,"position0"),Y(this,"zoom0"),Y(this,"_domElementKeyEvents",null),Y(this,"getPolarAngle"),Y(this,"getAzimuthalAngle"),Y(this,"setPolarAngle"),Y(this,"setAzimuthalAngle"),Y(this,"getDistance"),Y(this,"getZoomScale"),Y(this,"listenToKeyEvents"),Y(this,"stopListenToKeyEvents"),Y(this,"saveState"),Y(this,"reset"),Y(this,"update"),Y(this,"connect"),Y(this,"dispose"),Y(this,"dollyIn"),Y(this,"dollyOut"),Y(this,"getScale"),Y(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=E=>{let _=ki(E,2*Math.PI),V=u.phi;V<0&&(V+=2*Math.PI),_<0&&(_+=2*Math.PI);let ae=Math.abs(_-V);2*Math.PI-ae<ae&&(_<V?_+=2*Math.PI:V+=2*Math.PI),h.phi=_-V,s.update()},this.setAzimuthalAngle=E=>{let _=ki(E,2*Math.PI),V=u.theta;V<0&&(V+=2*Math.PI),_<0&&(_+=2*Math.PI);let ae=Math.abs(_-V);2*Math.PI-ae<ae&&(_<V?_+=2*Math.PI:V+=2*Math.PI),h.theta=_-V,s.update()},this.getDistance=()=>s.object.position.distanceTo(s.target),this.listenToKeyEvents=E=>{E.addEventListener("keydown",Qt),this._domElementKeyEvents=E},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Qt),this._domElementKeyEvents=null},this.saveState=()=>{s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=()=>{s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(r),s.update(),a=c.NONE},this.update=(()=>{const E=new ee,_=new ee(0,1,0),V=new kt().setFromUnitVectors(e.up,_),ae=V.clone().invert(),H=new ee,Le=new kt,st=2*Math.PI;return function(){const cs=s.object.position;V.setFromUnitVectors(e.up,_),ae.copy(V).invert(),E.copy(cs).sub(s.target),E.applyQuaternion(V),u.setFromVector3(E),s.autoRotate&&a===c.NONE&&K(z()),s.enableDamping?(u.theta+=h.theta*s.dampingFactor,u.phi+=h.phi*s.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let $e=s.minAzimuthAngle,et=s.maxAzimuthAngle;isFinite($e)&&isFinite(et)&&($e<-Math.PI?$e+=st:$e>Math.PI&&($e-=st),et<-Math.PI?et+=st:et>Math.PI&&(et-=st),$e<=et?u.theta=Math.max($e,Math.min(et,u.theta)):u.theta=u.theta>($e+et)/2?Math.max($e,u.theta):Math.min(et,u.theta)),u.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,u.phi)),u.makeSafe(),s.enableDamping===!0?s.target.addScaledVector(m,s.dampingFactor):s.target.add(m),s.zoomToCursor&&S||s.object.isOrthographicCamera?u.radius=be(u.radius):u.radius=be(u.radius*d),E.setFromSpherical(u),E.applyQuaternion(ae),cs.copy(s.target).add(E),s.object.matrixAutoUpdate||s.object.updateMatrix(),s.object.lookAt(s.target),s.enableDamping===!0?(h.theta*=1-s.dampingFactor,h.phi*=1-s.dampingFactor,m.multiplyScalar(1-s.dampingFactor)):(h.set(0,0,0),m.set(0,0,0));let wt=!1;if(s.zoomToCursor&&S){let St=null;if(s.object instanceof Bs&&s.object.isPerspectiveCamera){const Pt=E.length();St=be(Pt*d);const Wt=Pt-St;s.object.position.addScaledVector(P,Wt),s.object.updateMatrixWorld()}else if(s.object.isOrthographicCamera){const Pt=new ee(D.x,D.y,0);Pt.unproject(s.object),s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/d)),s.object.updateProjectionMatrix(),wt=!0;const Wt=new ee(D.x,D.y,0);Wt.unproject(s.object),s.object.position.sub(Wt).add(Pt),s.object.updateMatrixWorld(),St=E.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),s.zoomToCursor=!1;St!==null&&(s.screenSpacePanning?s.target.set(0,0,-1).transformDirection(s.object.matrix).multiplyScalar(St).add(s.object.position):(hs.origin.copy(s.object.position),hs.direction.set(0,0,-1).transformDirection(s.object.matrix),Math.abs(s.object.up.dot(hs.direction))<Ou?e.lookAt(s.target):(Ni.setFromNormalAndCoplanarPoint(s.object.up,s.target),hs.intersectPlane(Ni,s.target))))}else s.object instanceof wn&&s.object.isOrthographicCamera&&(wt=d!==1,wt&&(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/d)),s.object.updateProjectionMatrix()));return d=1,S=!1,wt||H.distanceToSquared(s.object.position)>l||8*(1-Le.dot(s.object.quaternion))>l?(s.dispatchEvent(r),H.copy(s.object.position),Le.copy(s.object.quaternion),wt=!1,!0):!1}})(),this.connect=E=>{s.domElement=E,s.domElement.style.touchAction="none",s.domElement.addEventListener("contextmenu",as),s.domElement.addEventListener("pointerdown",is),s.domElement.addEventListener("pointercancel",xt),s.domElement.addEventListener("wheel",os)},this.dispose=()=>{var E,_,V,ae,H,Le;s.domElement&&(s.domElement.style.touchAction="auto"),(E=s.domElement)==null||E.removeEventListener("contextmenu",as),(_=s.domElement)==null||_.removeEventListener("pointerdown",is),(V=s.domElement)==null||V.removeEventListener("pointercancel",xt),(ae=s.domElement)==null||ae.removeEventListener("wheel",os),(H=s.domElement)==null||H.ownerDocument.removeEventListener("pointermove",Xt),(Le=s.domElement)==null||Le.ownerDocument.removeEventListener("pointerup",xt),s._domElementKeyEvents!==null&&s._domElementKeyEvents.removeEventListener("keydown",Qt)};const s=this,r={type:"change"},o={type:"start"},i={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=c.NONE;const l=1e-6,u=new Pi,h=new Pi;let d=1;const m=new ee,A=new ke,g=new ke,B=new ke,C=new ke,y=new ke,F=new ke,w=new ke,T=new ke,M=new ke,P=new ee,D=new ke;let S=!1;const G=[],Q={};function z(){return 2*Math.PI/60/60*s.autoRotateSpeed}function W(){return Math.pow(.95,s.zoomSpeed)}function K(E){s.reverseOrbit||s.reverseHorizontalOrbit?h.theta+=E:h.theta-=E}function ne(E){s.reverseOrbit||s.reverseVerticalOrbit?h.phi+=E:h.phi-=E}const q=(()=>{const E=new ee;return function(V,ae){E.setFromMatrixColumn(ae,0),E.multiplyScalar(-V),m.add(E)}})(),oe=(()=>{const E=new ee;return function(V,ae){s.screenSpacePanning===!0?E.setFromMatrixColumn(ae,1):(E.setFromMatrixColumn(ae,0),E.crossVectors(s.object.up,E)),E.multiplyScalar(V),m.add(E)}})(),le=(()=>{const E=new ee;return function(V,ae){const H=s.domElement;if(H&&s.object instanceof Bs&&s.object.isPerspectiveCamera){const Le=s.object.position;E.copy(Le).sub(s.target);let st=E.length();st*=Math.tan(s.object.fov/2*Math.PI/180),q(2*V*st/H.clientHeight,s.object.matrix),oe(2*ae*st/H.clientHeight,s.object.matrix)}else H&&s.object instanceof wn&&s.object.isOrthographicCamera?(q(V*(s.object.right-s.object.left)/s.object.zoom/H.clientWidth,s.object.matrix),oe(ae*(s.object.top-s.object.bottom)/s.object.zoom/H.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}})();function Me(E){s.object instanceof Bs&&s.object.isPerspectiveCamera||s.object instanceof wn&&s.object.isOrthographicCamera?d=E:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function se(E){Me(d/E)}function Re(E){Me(d*E)}function he(E){if(!s.zoomToCursor||!s.domElement)return;S=!0;const _=s.domElement.getBoundingClientRect(),V=E.clientX-_.left,ae=E.clientY-_.top,H=_.width,Le=_.height;D.x=V/H*2-1,D.y=-(ae/Le)*2+1,P.set(D.x,D.y,1).unproject(s.object).sub(s.object.position).normalize()}function be(E){return Math.max(s.minDistance,Math.min(s.maxDistance,E))}function Ue(E){A.set(E.clientX,E.clientY)}function Ft(E){he(E),w.set(E.clientX,E.clientY)}function ce(E){C.set(E.clientX,E.clientY)}function ze(E){g.set(E.clientX,E.clientY),B.subVectors(g,A).multiplyScalar(s.rotateSpeed);const _=s.domElement;_&&(K(2*Math.PI*B.x/_.clientHeight),ne(2*Math.PI*B.y/_.clientHeight)),A.copy(g),s.update()}function qe(E){T.set(E.clientX,E.clientY),M.subVectors(T,w),M.y>0?se(W()):M.y<0&&Re(W()),w.copy(T),s.update()}function Os(E){y.set(E.clientX,E.clientY),F.subVectors(y,C).multiplyScalar(s.panSpeed),le(F.x,F.y),C.copy(y),s.update()}function Hs(E){he(E),E.deltaY<0?Re(W()):E.deltaY>0&&se(W()),s.update()}function $n(E){let _=!1;switch(E.code){case s.keys.UP:le(0,s.keyPanSpeed),_=!0;break;case s.keys.BOTTOM:le(0,-s.keyPanSpeed),_=!0;break;case s.keys.LEFT:le(s.keyPanSpeed,0),_=!0;break;case s.keys.RIGHT:le(-s.keyPanSpeed,0),_=!0;break}_&&(E.preventDefault(),s.update())}function es(){if(G.length==1)A.set(G[0].pageX,G[0].pageY);else{const E=.5*(G[0].pageX+G[1].pageX),_=.5*(G[0].pageY+G[1].pageY);A.set(E,_)}}function Bn(){if(G.length==1)C.set(G[0].pageX,G[0].pageY);else{const E=.5*(G[0].pageX+G[1].pageX),_=.5*(G[0].pageY+G[1].pageY);C.set(E,_)}}function vn(){const E=G[0].pageX-G[1].pageX,_=G[0].pageY-G[1].pageY,V=Math.sqrt(E*E+_*_);w.set(0,V)}function ts(){s.enableZoom&&vn(),s.enablePan&&Bn()}function Us(){s.enableZoom&&vn(),s.enableRotate&&es()}function ns(E){if(G.length==1)g.set(E.pageX,E.pageY);else{const V=Zt(E),ae=.5*(E.pageX+V.x),H=.5*(E.pageY+V.y);g.set(ae,H)}B.subVectors(g,A).multiplyScalar(s.rotateSpeed);const _=s.domElement;_&&(K(2*Math.PI*B.x/_.clientHeight),ne(2*Math.PI*B.y/_.clientHeight)),A.copy(g)}function ss(E){if(G.length==1)y.set(E.pageX,E.pageY);else{const _=Zt(E),V=.5*(E.pageX+_.x),ae=.5*(E.pageY+_.y);y.set(V,ae)}F.subVectors(y,C).multiplyScalar(s.panSpeed),le(F.x,F.y),C.copy(y)}function rs(E){const _=Zt(E),V=E.pageX-_.x,ae=E.pageY-_.y,H=Math.sqrt(V*V+ae*ae);T.set(0,H),M.set(0,Math.pow(T.y/w.y,s.zoomSpeed)),se(M.y),w.copy(T)}function Ns(E){s.enableZoom&&rs(E),s.enablePan&&ss(E)}function ks(E){s.enableZoom&&rs(E),s.enableRotate&&ns(E)}function is(E){var _,V;s.enabled!==!1&&(G.length===0&&((_=s.domElement)==null||_.ownerDocument.addEventListener("pointermove",Xt),(V=s.domElement)==null||V.ownerDocument.addEventListener("pointerup",xt)),Vs(E),E.pointerType==="touch"?Yt(E):Cn(E))}function Xt(E){s.enabled!==!1&&(E.pointerType==="touch"?Ks(E):Js(E))}function xt(E){var _,V,ae;It(E),G.length===0&&((_=s.domElement)==null||_.releasePointerCapture(E.pointerId),(V=s.domElement)==null||V.ownerDocument.removeEventListener("pointermove",Xt),(ae=s.domElement)==null||ae.ownerDocument.removeEventListener("pointerup",xt)),s.dispatchEvent(i),a=c.NONE}function Cn(E){let _;switch(E.button){case 0:_=s.mouseButtons.LEFT;break;case 1:_=s.mouseButtons.MIDDLE;break;case 2:_=s.mouseButtons.RIGHT;break;default:_=-1}switch(_){case zt.DOLLY:if(s.enableZoom===!1)return;Ft(E),a=c.DOLLY;break;case zt.ROTATE:if(E.ctrlKey||E.metaKey||E.shiftKey){if(s.enablePan===!1)return;ce(E),a=c.PAN}else{if(s.enableRotate===!1)return;Ue(E),a=c.ROTATE}break;case zt.PAN:if(E.ctrlKey||E.metaKey||E.shiftKey){if(s.enableRotate===!1)return;Ue(E),a=c.ROTATE}else{if(s.enablePan===!1)return;ce(E),a=c.PAN}break;default:a=c.NONE}a!==c.NONE&&s.dispatchEvent(o)}function Js(E){if(s.enabled!==!1)switch(a){case c.ROTATE:if(s.enableRotate===!1)return;ze(E);break;case c.DOLLY:if(s.enableZoom===!1)return;qe(E);break;case c.PAN:if(s.enablePan===!1)return;Os(E);break}}function os(E){s.enabled===!1||s.enableZoom===!1||a!==c.NONE&&a!==c.ROTATE||(E.preventDefault(),s.dispatchEvent(o),Hs(E),s.dispatchEvent(i))}function Qt(E){s.enabled===!1||s.enablePan===!1||$n(E)}function Yt(E){switch(Ie(E),G.length){case 1:switch(s.touches.ONE){case qt.ROTATE:if(s.enableRotate===!1)return;es(),a=c.TOUCH_ROTATE;break;case qt.PAN:if(s.enablePan===!1)return;Bn(),a=c.TOUCH_PAN;break;default:a=c.NONE}break;case 2:switch(s.touches.TWO){case qt.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;ts(),a=c.TOUCH_DOLLY_PAN;break;case qt.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;Us(),a=c.TOUCH_DOLLY_ROTATE;break;default:a=c.NONE}break;default:a=c.NONE}a!==c.NONE&&s.dispatchEvent(o)}function Ks(E){switch(Ie(E),a){case c.TOUCH_ROTATE:if(s.enableRotate===!1)return;ns(E),s.update();break;case c.TOUCH_PAN:if(s.enablePan===!1)return;ss(E),s.update();break;case c.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;Ns(E),s.update();break;case c.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;ks(E),s.update();break;default:a=c.NONE}}function as(E){s.enabled!==!1&&E.preventDefault()}function Vs(E){G.push(E)}function It(E){delete Q[E.pointerId];for(let _=0;_<G.length;_++)if(G[_].pointerId==E.pointerId){G.splice(_,1);return}}function Ie(E){let _=Q[E.pointerId];_===void 0&&(_=new ke,Q[E.pointerId]=_),_.set(E.pageX,E.pageY)}function Zt(E){const _=E.pointerId===G[0].pointerId?G[1]:G[0];return Q[_.pointerId]}this.dollyIn=(E=W())=>{Re(E),s.update()},this.dollyOut=(E=W())=>{se(E),s.update()},this.getScale=()=>d,this.setScale=E=>{Me(E),s.update()},this.getZoomScale=()=>W(),n!==void 0&&this.connect(n),this.update()}};function Ms(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,s=t.length;n<s;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const Ut="srgb",mt="srgb-linear",Ji=3001,Uu=3e3;class Vr extends kr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new Vu(n)}),this.register(function(n){return new ju(n)}),this.register(function(n){return new eh(n)}),this.register(function(n){return new th(n)}),this.register(function(n){return new nh(n)}),this.register(function(n){return new Qu(n)}),this.register(function(n){return new Yu(n)}),this.register(function(n){return new Zu(n)}),this.register(function(n){return new Wu(n)}),this.register(function(n){return new Ku(n)}),this.register(function(n){return new zu(n)}),this.register(function(n){return new Xu(n)}),this.register(function(n){return new $u(n)}),this.register(function(n){return new qu(n)}),this.register(function(n){return new ku(n)}),this.register(function(n){return new sh(n)}),this.register(function(n){return new rh(n)})}load(e,n,s,r){const o=this;let i;if(this.resourcePath!=="")i=this.resourcePath;else if(this.path!==""){const l=Sn.extractUrlBase(e);i=Sn.resolveURL(l,this.path)}else i=Sn.extractUrlBase(e);this.manager.itemStart(e);const c=function(l){r?r(l):console.error(l),o.manager.itemError(e),o.manager.itemEnd(e)},a=new Tt(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{o.parse(l,i,function(u){n(u),o.manager.itemEnd(e)},c)}catch(u){c(u)}},s,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,s,r){let o;const i={},c={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ms(new Uint8Array(e.slice(0,4)))===Da){try{i[re.KHR_BINARY_GLTF]=new ih(e)}catch(u){r&&r(u);return}o=JSON.parse(i[re.KHR_BINARY_GLTF].content)}else o=JSON.parse(Ms(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const a=new Bh(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const u=this.pluginCallbacks[l](a);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[u.name]=u,i[u.name]=!0}if(o.extensionsUsed)for(let l=0;l<o.extensionsUsed.length;++l){const u=o.extensionsUsed[l],h=o.extensionsRequired||[];switch(u){case re.KHR_MATERIALS_UNLIT:i[u]=new Ju;break;case re.KHR_DRACO_MESH_COMPRESSION:i[u]=new oh(o,this.dracoLoader);break;case re.KHR_TEXTURE_TRANSFORM:i[u]=new ah;break;case re.KHR_MESH_QUANTIZATION:i[u]=new ch;break;default:h.indexOf(u)>=0&&c[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}a.setExtensions(i),a.setPlugins(c),a.parse(s,r)}parseAsync(e,n){const s=this;return new Promise(function(r,o){s.parse(e,n,r,o)})}}function Nu(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const re={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ku{constructor(e){this.parser=e,this.name=re.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let s=0,r=n.length;s<r;s++){const o=n[s];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const n=this.parser,s="light:"+e;let r=n.cache.get(s);if(r)return r;const o=n.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let l;const u=new lt(16777215);a.color!==void 0&&u.setRGB(a.color[0],a.color[1],a.color[2],mt);const h=a.range!==void 0?a.range:0;switch(a.type){case"directional":l=new bl(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Tl(u),l.distance=h;break;case"spot":l=new Ml(u),l.distance=h,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,l.angle=a.spot.outerConeAngle,l.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return l.position.set(0,0,0),l.decay=2,dt(l,a),a.intensity!==void 0&&(l.intensity=a.intensity),l.name=n.createUniqueName(a.name||"light_"+e),r=Promise.resolve(l),n.cache.add(s,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,s=this.parser,o=s.json.nodes[e],c=(o.extensions&&o.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(a){return s._getNodeRef(n.cache,c,a)})}}class Ju{constructor(){this.name=re.KHR_MATERIALS_UNLIT}getMaterialType(){return en}extendParams(e,n,s){const r=[];e.color=new lt(1,1,1),e.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const i=o.baseColorFactor;e.color.setRGB(i[0],i[1],i[2],mt),e.opacity=i[3]}o.baseColorTexture!==void 0&&r.push(s.assignTexture(e,"map",o.baseColorTexture,Ut))}return Promise.all(r)}}class Ku{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}}class Vu{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];if(i.clearcoatFactor!==void 0&&(n.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&o.push(s.assignTexture(n,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&o.push(s.assignTexture(n,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(o.push(s.assignTexture(n,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const c=i.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new ke(c,c)}return Promise.all(o)}}class ju{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_DISPERSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return n.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}}class Xu{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.iridescenceFactor!==void 0&&(n.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&o.push(s.assignTexture(n,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(n.iridescenceIOR=i.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&o.push(s.assignTexture(n,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(o)}}class Qu{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_SHEEN}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new lt(0,0,0),n.sheenRoughness=0,n.sheen=1;const i=r.extensions[this.name];if(i.sheenColorFactor!==void 0){const c=i.sheenColorFactor;n.sheenColor.setRGB(c[0],c[1],c[2],mt)}return i.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&o.push(s.assignTexture(n,"sheenColorMap",i.sheenColorTexture,Ut)),i.sheenRoughnessTexture!==void 0&&o.push(s.assignTexture(n,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(o)}}class Yu{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.transmissionFactor!==void 0&&(n.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&o.push(s.assignTexture(n,"transmissionMap",i.transmissionTexture)),Promise.all(o)}}class Zu{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_VOLUME}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];n.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&o.push(s.assignTexture(n,"thicknessMap",i.thicknessTexture)),n.attenuationDistance=i.attenuationDistance||1/0;const c=i.attenuationColor||[1,1,1];return n.attenuationColor=new lt().setRGB(c[0],c[1],c[2],mt),Promise.all(o)}}class Wu{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_IOR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class zu{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_SPECULAR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];n.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&o.push(s.assignTexture(n,"specularIntensityMap",i.specularTexture));const c=i.specularColorFactor||[1,1,1];return n.specularColor=new lt().setRGB(c[0],c[1],c[2],mt),i.specularColorTexture!==void 0&&o.push(s.assignTexture(n,"specularColorMap",i.specularColorTexture,Ut)),Promise.all(o)}}class qu{constructor(e){this.parser=e,this.name=re.EXT_MATERIALS_BUMP}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return n.bumpScale=i.bumpFactor!==void 0?i.bumpFactor:1,i.bumpTexture!==void 0&&o.push(s.assignTexture(n,"bumpMap",i.bumpTexture)),Promise.all(o)}}class $u{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:ut}extendMaterialParams(e,n){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.anisotropyStrength!==void 0&&(n.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(n.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&o.push(s.assignTexture(n,"anisotropyMap",i.anisotropyTexture)),Promise.all(o)}}class eh{constructor(e){this.parser=e,this.name=re.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],i=n.options.ktx2Loader;if(!i){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,o.source,i)}}class th{constructor(e){this.parser=e,this.name=re.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,s=this.parser,r=s.json,o=r.textures[e];if(!o.extensions||!o.extensions[n])return null;const i=o.extensions[n],c=r.images[i.source];let a=s.textureLoader;if(c.uri){const l=s.options.manager.getHandler(c.uri);l!==null&&(a=l)}return this.detectSupport().then(function(l){if(l)return s.loadTextureImage(e,i.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class nh{constructor(e){this.parser=e,this.name=re.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,s=this.parser,r=s.json,o=r.textures[e];if(!o.extensions||!o.extensions[n])return null;const i=o.extensions[n],c=r.images[i.source];let a=s.textureLoader;if(c.uri){const l=s.options.manager.getHandler(c.uri);l!==null&&(a=l)}return this.detectSupport().then(function(l){if(l)return s.loadTextureImage(e,i.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class sh{constructor(e){this.name=re.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,s=n.bufferViews[e];if(s.extensions&&s.extensions[this.name]){const r=s.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(c){const a=r.byteOffset||0,l=r.byteLength||0,u=r.count,h=r.byteStride,d=new Uint8Array(c,a,l);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(u,h,d,r.mode,r.filter).then(function(m){return m.buffer}):i.ready.then(function(){const m=new ArrayBuffer(u*h);return i.decodeGltfBuffer(new Uint8Array(m),u,h,d,r.mode,r.filter),m})})}else return null}}class rh{constructor(e){this.name=re.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,s=n.nodes[e];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const r=n.meshes[s.mesh];for(const l of r.primitives)if(l.mode!==Ze.TRIANGLES&&l.mode!==Ze.TRIANGLE_STRIP&&l.mode!==Ze.TRIANGLE_FAN&&l.mode!==void 0)return null;const i=s.extensions[this.name].attributes,c=[],a={};for(const l in i)c.push(this.parser.getDependency("accessor",i[l]).then(u=>(a[l]=u,a[l])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(l=>{const u=l.pop(),h=u.isGroup?u.children:[u],d=l[0].count,m=[];for(const A of h){const g=new Jt,B=new ee,C=new kt,y=new ee(1,1,1),F=new Dl(A.geometry,A.material,d);for(let w=0;w<d;w++)a.TRANSLATION&&B.fromBufferAttribute(a.TRANSLATION,w),a.ROTATION&&C.fromBufferAttribute(a.ROTATION,w),a.SCALE&&y.fromBufferAttribute(a.SCALE,w),F.setMatrixAt(w,g.compose(B,C,y));for(const w in a)if(w==="_COLOR_0"){const T=a[w];F.instanceColor=new Rl(T.array,T.itemSize,T.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&A.geometry.setAttribute(w,a[w]);ha.prototype.copy.call(F,A),this.parser.assignFinalMaterial(F),m.push(F)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const Da="glTF",Tn=12,Ki={JSON:1313821514,BIN:5130562};class ih{constructor(e){this.name=re.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,Tn);if(this.header={magic:Ms(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Da)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Tn,r=new DataView(e,Tn);let o=0;for(;o<s;){const i=r.getUint32(o,!0);o+=4;const c=r.getUint32(o,!0);if(o+=4,c===Ki.JSON){const a=new Uint8Array(e,Tn+o,i);this.content=Ms(a)}else if(c===Ki.BIN){const a=Tn+o;this.body=e.slice(a,a+i)}o+=i}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class oh{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=re.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const s=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,c={},a={},l={};for(const u in i){const h=yr[u]||u.toLowerCase();c[h]=i[u]}for(const u in e.attributes){const h=yr[u]||u.toLowerCase();if(i[u]!==void 0){const d=s.accessors[e.attributes[u]],m=cn[d.componentType];l[h]=m.name,a[h]=d.normalized===!0}}return n.getDependency("bufferView",o).then(function(u){return new Promise(function(h,d){r.decodeDracoFile(u,function(m){for(const A in m.attributes){const g=m.attributes[A],B=a[A];B!==void 0&&(g.normalized=B)}h(m)},c,l,mt,d)})})}}class ah{constructor(){this.name=re.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class ch{constructor(){this.name=re.KHR_MESH_QUANTIZATION}}class Ra extends Zl{constructor(e,n,s,r){super(e,n,s,r)}copySampleValue_(e){const n=this.resultBuffer,s=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let i=0;i!==r;i++)n[i]=s[o+i];return n}interpolate_(e,n,s,r){const o=this.resultBuffer,i=this.sampleValues,c=this.valueSize,a=c*2,l=c*3,u=r-n,h=(s-n)/u,d=h*h,m=d*h,A=e*l,g=A-l,B=-2*m+3*d,C=m-d,y=1-B,F=C-d+h;for(let w=0;w!==c;w++){const T=i[g+w+c],M=i[g+w+a]*u,P=i[A+w+c],D=i[A+w]*u;o[w]=y*T+F*M+B*P+C*D}return o}}const lh=new kt;class uh extends Ra{interpolate_(e,n,s,r){const o=super.interpolate_(e,n,s,r);return lh.fromArray(o).normalize().toArray(o),o}}const Ze={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},cn={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Vi={9728:Ar,9729:Oe,9984:Jl,9985:Kl,9986:Vl,9987:da},ji={33071:ft,33648:jl,10497:mr},Zs={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yr={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...mu>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},yt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},hh={CUBICSPLINE:void 0,LINEAR:ma,STEP:Xl},Ws={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function dh(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new fa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ql})),t.DefaultMaterial}function Lt(t,e,n){for(const s in n.extensions)t[s]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=n.extensions[s])}function dt(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function fh(t,e,n){let s=!1,r=!1,o=!1;for(let l=0,u=e.length;l<u;l++){const h=e[l];if(h.POSITION!==void 0&&(s=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),s&&r&&o)break}if(!s&&!r&&!o)return Promise.resolve(t);const i=[],c=[],a=[];for(let l=0,u=e.length;l<u;l++){const h=e[l];if(s){const d=h.POSITION!==void 0?n.getDependency("accessor",h.POSITION):t.attributes.position;i.push(d)}if(r){const d=h.NORMAL!==void 0?n.getDependency("accessor",h.NORMAL):t.attributes.normal;c.push(d)}if(o){const d=h.COLOR_0!==void 0?n.getDependency("accessor",h.COLOR_0):t.attributes.color;a.push(d)}}return Promise.all([Promise.all(i),Promise.all(c),Promise.all(a)]).then(function(l){const u=l[0],h=l[1],d=l[2];return s&&(t.morphAttributes.position=u),r&&(t.morphAttributes.normal=h),o&&(t.morphAttributes.color=d),t.morphTargetsRelative=!0,t})}function ph(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,s=e.weights.length;n<s;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let s=0,r=n.length;s<r;s++)t.morphTargetDictionary[n[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function mh(t){let e;const n=t.extensions&&t.extensions[re.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+zs(n.attributes):e=t.indices+":"+zs(t.attributes)+":"+t.mode,t.targets!==void 0)for(let s=0,r=t.targets.length;s<r;s++)e+=":"+zs(t.targets[s]);return e}function zs(t){let e="";const n=Object.keys(t).sort();for(let s=0,r=n.length;s<r;s++)e+=n[s]+":"+t[n[s]]+";";return e}function Er(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ah(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const gh=new Jt;class Bh{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new Nu,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,r=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||s||r&&o<98?this.textureLoader=new Fl(this.options.manager):this.textureLoader=new xl(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Tt(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const s=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(i){return i._markDefs&&i._markDefs()}),Promise.all(this._invokeAll(function(i){return i.beforeRoot&&i.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(i){const c={scene:i[0][r.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:r.asset,parser:s,userData:{}};return Lt(o,c,r),dt(c,r),Promise.all(s._invokeAll(function(a){return a.afterRoot&&a.afterRoot(c)})).then(function(){for(const a of c.scenes)a.updateMatrixWorld();e(c)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],s=this.json.meshes||[];for(let r=0,o=n.length;r<o;r++){const i=n[r].joints;for(let c=0,a=i.length;c<a;c++)e[i[c]].isBone=!0}for(let r=0,o=e.length;r<o;r++){const i=e[r];i.mesh!==void 0&&(this._addNodeRef(this.meshCache,i.mesh),i.skin!==void 0&&(s[i.mesh].isSkinnedMesh=!0)),i.camera!==void 0&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,s){if(e.refs[n]<=1)return s;const r=s.clone(),o=(i,c)=>{const a=this.associations.get(i);a!=null&&this.associations.set(c,a);for(const[l,u]of i.children.entries())o(u,c.children[l])};return o(s,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let s=0;s<n.length;s++){const r=e(n[s]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const s=[];for(let r=0;r<n.length;r++){const o=e(n[r]);o&&s.push(o)}return s}getDependency(e,n){const s=e+":"+n;let r=this.cache.get(s);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(s,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const s=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(o,i){return s.getDependency(e,i)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],s=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[re.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,i){s.load(Sn.resolveURL(n.uri,r.path),o,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(s){const r=n.byteLength||0,o=n.byteOffset||0;return s.slice(o,o+r)})}loadAccessor(e){const n=this,s=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const i=Zs[r.type],c=cn[r.componentType],a=r.normalized===!0,l=new c(r.count*i);return Promise.resolve(new Pn(l,i,a))}const o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(i){const c=i[0],a=Zs[r.type],l=cn[r.componentType],u=l.BYTES_PER_ELEMENT,h=u*a,d=r.byteOffset||0,m=r.bufferView!==void 0?s.bufferViews[r.bufferView].byteStride:void 0,A=r.normalized===!0;let g,B;if(m&&m!==h){const C=Math.floor(d/m),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+C+":"+r.count;let F=n.cache.get(y);F||(g=new l(c,C*m,r.count*m/u),F=new Il(g,m/u),n.cache.add(y,F)),B=new Yl(F,a,d%m/u,A)}else c===null?g=new l(r.count*a):g=new l(c,d,r.count*a),B=new Pn(g,a,A);if(r.sparse!==void 0){const C=Zs.SCALAR,y=cn[r.sparse.indices.componentType],F=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,T=new y(i[1],F,r.sparse.count*C),M=new l(i[2],w,r.sparse.count*a);c!==null&&(B=new Pn(B.array.slice(),B.itemSize,B.normalized));for(let P=0,D=T.length;P<D;P++){const S=T[P];if(B.setX(S,M[P*a]),a>=2&&B.setY(S,M[P*a+1]),a>=3&&B.setZ(S,M[P*a+2]),a>=4&&B.setW(S,M[P*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return B})}loadTexture(e){const n=this.json,s=this.options,o=n.textures[e].source,i=n.images[o];let c=this.textureLoader;if(i.uri){const a=s.manager.getHandler(i.uri);a!==null&&(c=a)}return this.loadTextureImage(e,o,c)}loadTextureImage(e,n,s){const r=this,o=this.json,i=o.textures[e],c=o.images[n],a=(c.uri||c.bufferView)+":"+i.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(n,s).then(function(u){u.flipY=!1,u.name=i.name||c.name||"",u.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(u.name=c.uri);const d=(o.samplers||{})[i.sampler]||{};return u.magFilter=Vi[d.magFilter]||Oe,u.minFilter=Vi[d.minFilter]||da,u.wrapS=ji[d.wrapS]||mr,u.wrapT=ji[d.wrapT]||mr,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[a]=l,l}loadImageSource(e,n){const s=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const i=r.images[e],c=self.URL||self.webkitURL;let a=i.uri||"",l=!1;if(i.bufferView!==void 0)a=s.getDependency("bufferView",i.bufferView).then(function(h){l=!0;const d=new Blob([h],{type:i.mimeType});return a=c.createObjectURL(d),a});else if(i.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(a).then(function(h){return new Promise(function(d,m){let A=d;n.isImageBitmapLoader===!0&&(A=function(g){const B=new pt(g);B.needsUpdate=!0,d(B)}),n.load(Sn.resolveURL(h,o.path),A,void 0,m)})}).then(function(h){return l===!0&&c.revokeObjectURL(a),dt(h,i),h.userData.mimeType=i.mimeType||Ah(i.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),h});return this.sourceCache[e]=u,u}assignTexture(e,n,s,r){const o=this;return this.getDependency("texture",s.index).then(function(i){if(!i)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(i=i.clone(),i.channel=s.texCoord),o.extensions[re.KHR_TEXTURE_TRANSFORM]){const c=s.extensions!==void 0?s.extensions[re.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const a=o.associations.get(i);i=o.extensions[re.KHR_TEXTURE_TRANSFORM].extendTexture(i,c),o.associations.set(i,a)}}return r!==void 0&&(typeof r=="number"&&(r=r===Ji?Ut:mt),"colorSpace"in i?i.colorSpace=r:i.encoding=r===Ut?Ji:Uu),e[n]=i,i})}assignFinalMaterial(e){const n=e.geometry;let s=e.material;const r=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,i=n.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+s.uuid;let a=this.cache.get(c);a||(a=new wl,js.prototype.copy.call(a,s),a.color.copy(s.color),a.map=s.map,a.sizeAttenuation=!1,this.cache.add(c,a)),s=a}else if(e.isLine){const c="LineBasicMaterial:"+s.uuid;let a=this.cache.get(c);a||(a=new Sl,js.prototype.copy.call(a,s),a.color.copy(s.color),a.map=s.map,this.cache.add(c,a)),s=a}if(r||o||i){let c="ClonedMaterial:"+s.uuid+":";r&&(c+="derivative-tangents:"),o&&(c+="vertex-colors:"),i&&(c+="flat-shading:");let a=this.cache.get(c);a||(a=s.clone(),o&&(a.vertexColors=!0),i&&(a.flatShading=!0),r&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(c,a),this.associations.set(a,this.associations.get(s))),s=a}e.material=s}getMaterialType(){return fa}loadMaterial(e){const n=this,s=this.json,r=this.extensions,o=s.materials[e];let i;const c={},a=o.extensions||{},l=[];if(a[re.KHR_MATERIALS_UNLIT]){const h=r[re.KHR_MATERIALS_UNLIT];i=h.getMaterialType(),l.push(h.extendParams(c,o,n))}else{const h=o.pbrMetallicRoughness||{};if(c.color=new lt(1,1,1),c.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;c.color.setRGB(d[0],d[1],d[2],mt),c.opacity=d[3]}h.baseColorTexture!==void 0&&l.push(n.assignTexture(c,"map",h.baseColorTexture,Ut)),c.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,c.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(l.push(n.assignTexture(c,"metalnessMap",h.metallicRoughnessTexture)),l.push(n.assignTexture(c,"roughnessMap",h.metallicRoughnessTexture))),i=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,c)})))}o.doubleSided===!0&&(c.side=ua);const u=o.alphaMode||Ws.OPAQUE;if(u===Ws.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,u===Ws.MASK&&(c.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&i!==en&&(l.push(n.assignTexture(c,"normalMap",o.normalTexture)),c.normalScale=new ke(1,1),o.normalTexture.scale!==void 0)){const h=o.normalTexture.scale;c.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&i!==en&&(l.push(n.assignTexture(c,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&i!==en){const h=o.emissiveFactor;c.emissive=new lt().setRGB(h[0],h[1],h[2],mt)}return o.emissiveTexture!==void 0&&i!==en&&l.push(n.assignTexture(c,"emissiveMap",o.emissiveTexture,Ut)),Promise.all(l).then(function(){const h=new i(c);return o.name&&(h.name=o.name),dt(h,o),n.associations.set(h,{materials:e}),o.extensions&&Lt(r,h,o),h})}createUniqueName(e){const n=Pl.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,s=this.extensions,r=this.primitiveCache;function o(c){return s[re.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,n).then(function(a){return Xi(a,c,n)})}const i=[];for(let c=0,a=e.length;c<a;c++){const l=e[c],u=mh(l),h=r[u];if(h)i.push(h.promise);else{let d;l.extensions&&l.extensions[re.KHR_DRACO_MESH_COMPRESSION]?d=o(l):d=Xi(new pa,l,n),r[u]={primitive:l,promise:d},i.push(d)}}return Promise.all(i)}loadMesh(e){const n=this,s=this.json,r=this.extensions,o=s.meshes[e],i=o.primitives,c=[];for(let a=0,l=i.length;a<l;a++){const u=i[a].material===void 0?dh(this.cache):this.getDependency("material",i[a].material);c.push(u)}return c.push(n.loadGeometries(i)),Promise.all(c).then(function(a){const l=a.slice(0,a.length-1),u=a[a.length-1],h=[];for(let m=0,A=u.length;m<A;m++){const g=u[m],B=i[m];let C;const y=l[m];if(B.mode===Ze.TRIANGLES||B.mode===Ze.TRIANGLE_STRIP||B.mode===Ze.TRIANGLE_FAN||B.mode===void 0)C=o.isSkinnedMesh===!0?new Gl(g,y):new Qn(g,y),C.isSkinnedMesh===!0&&C.normalizeSkinWeights(),B.mode===Ze.TRIANGLE_STRIP?C.geometry=Ui(C.geometry,la):B.mode===Ze.TRIANGLE_FAN&&(C.geometry=Ui(C.geometry,pr));else if(B.mode===Ze.LINES)C=new Ll(g,y);else if(B.mode===Ze.LINE_STRIP)C=new _l(g,y);else if(B.mode===Ze.LINE_LOOP)C=new Ol(g,y);else if(B.mode===Ze.POINTS)C=new Hl(g,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+B.mode);Object.keys(C.geometry.morphAttributes).length>0&&ph(C,o),C.name=n.createUniqueName(o.name||"mesh_"+e),dt(C,o),B.extensions&&Lt(r,C,B),n.assignFinalMaterial(C),h.push(C)}for(let m=0,A=h.length;m<A;m++)n.associations.set(h[m],{meshes:e,primitives:m});if(h.length===1)return o.extensions&&Lt(r,h[0],o),h[0];const d=new Xs;o.extensions&&Lt(r,d,o),n.associations.set(d,{meshes:e});for(let m=0,A=h.length;m<A;m++)d.add(h[m]);return d})}loadCamera(e){let n;const s=this.json.cameras[e],r=s[s.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?n=new Bs(Gn.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):s.type==="orthographic"&&(n=new wn(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),s.name&&(n.name=this.createUniqueName(s.name)),dt(n,s),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],s=[];for(let r=0,o=n.joints.length;r<o;r++)s.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",n.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(r){const o=r.pop(),i=r,c=[],a=[];for(let l=0,u=i.length;l<u;l++){const h=i[l];if(h){c.push(h);const d=new Jt;o!==null&&d.fromArray(o.array,l*16),a.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[l])}return new Ul(c,a)})}loadAnimation(e){const n=this.json,s=this,r=n.animations[e],o=r.name?r.name:"animation_"+e,i=[],c=[],a=[],l=[],u=[];for(let h=0,d=r.channels.length;h<d;h++){const m=r.channels[h],A=r.samplers[m.sampler],g=m.target,B=g.node,C=r.parameters!==void 0?r.parameters[A.input]:A.input,y=r.parameters!==void 0?r.parameters[A.output]:A.output;g.node!==void 0&&(i.push(this.getDependency("node",B)),c.push(this.getDependency("accessor",C)),a.push(this.getDependency("accessor",y)),l.push(A),u.push(g))}return Promise.all([Promise.all(i),Promise.all(c),Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(h){const d=h[0],m=h[1],A=h[2],g=h[3],B=h[4],C=[];for(let y=0,F=d.length;y<F;y++){const w=d[y],T=m[y],M=A[y],P=g[y],D=B[y];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const S=s._createAnimationTracks(w,T,M,P,D);if(S)for(let G=0;G<S.length;G++)C.push(S[G])}return new Nl(o,void 0,C)})}createNodeMesh(e){const n=this.json,s=this,r=n.nodes[e];return r.mesh===void 0?null:s.getDependency("mesh",r.mesh).then(function(o){const i=s._getNodeRef(s.meshCache,r.mesh,o);return r.weights!==void 0&&i.traverse(function(c){if(c.isMesh)for(let a=0,l=r.weights.length;a<l;a++)c.morphTargetInfluences[a]=r.weights[a]}),i})}loadNode(e){const n=this.json,s=this,r=n.nodes[e],o=s._loadNodeShallow(e),i=[],c=r.children||[];for(let l=0,u=c.length;l<u;l++)i.push(s.getDependency("node",c[l]));const a=r.skin===void 0?Promise.resolve(null):s.getDependency("skin",r.skin);return Promise.all([o,Promise.all(i),a]).then(function(l){const u=l[0],h=l[1],d=l[2];d!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(d,gh)});for(let m=0,A=h.length;m<A;m++)u.add(h[m]);return u})}_loadNodeShallow(e){const n=this.json,s=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=n.nodes[e],i=o.name?r.createUniqueName(o.name):"",c=[],a=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return a&&c.push(a),o.camera!==void 0&&c.push(r.getDependency("camera",o.camera).then(function(l){return r._getNodeRef(r.cameraCache,o.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){c.push(l)}),this.nodeCache[e]=Promise.all(c).then(function(l){let u;if(o.isBone===!0?u=new kl:l.length>1?u=new Xs:l.length===1?u=l[0]:u=new ha,u!==l[0])for(let h=0,d=l.length;h<d;h++)u.add(l[h]);if(o.name&&(u.userData.name=o.name,u.name=i),dt(u,o),o.extensions&&Lt(s,u,o),o.matrix!==void 0){const h=new Jt;h.fromArray(o.matrix),u.applyMatrix4(h)}else o.translation!==void 0&&u.position.fromArray(o.translation),o.rotation!==void 0&&u.quaternion.fromArray(o.rotation),o.scale!==void 0&&u.scale.fromArray(o.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,s=this.json.scenes[e],r=this,o=new Xs;s.name&&(o.name=r.createUniqueName(s.name)),dt(o,s),s.extensions&&Lt(n,o,s);const i=s.nodes||[],c=[];for(let a=0,l=i.length;a<l;a++)c.push(r.getDependency("node",i[a]));return Promise.all(c).then(function(a){for(let u=0,h=a.length;u<h;u++)o.add(a[u]);const l=u=>{const h=new Map;for(const[d,m]of r.associations)(d instanceof js||d instanceof pt)&&h.set(d,m);return u.traverse(d=>{const m=r.associations.get(d);m!=null&&h.set(d,m)}),h};return r.associations=l(o),o})}_createAnimationTracks(e,n,s,r,o){const i=[],c=e.name?e.name:e.uuid,a=[];yt[o.path]===yt.weights?e.traverse(function(d){d.morphTargetInfluences&&a.push(d.name?d.name:d.uuid)}):a.push(c);let l;switch(yt[o.path]){case yt.weights:l=Li;break;case yt.rotation:l=_i;break;case yt.position:case yt.scale:l=Gi;break;default:switch(s.itemSize){case 1:l=Li;break;case 2:case 3:default:l=Gi;break}break}const u=r.interpolation!==void 0?hh[r.interpolation]:ma,h=this._getArrayFromAccessor(s);for(let d=0,m=a.length;d<m;d++){const A=new l(a[d]+"."+yt[o.path],n.array,h,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(A),i.push(A)}return i}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const s=Er(n.constructor),r=new Float32Array(n.length);for(let o=0,i=n.length;o<i;o++)r[o]=n[o]*s;n=r}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(s){const r=this instanceof _i?uh:Ra;return new r(this.times,this.values,this.getValueSize()/3,s)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function vh(t,e,n){const s=e.attributes,r=new Jr;if(s.POSITION!==void 0){const c=n.json.accessors[s.POSITION],a=c.min,l=c.max;if(a!==void 0&&l!==void 0){if(r.set(new ee(a[0],a[1],a[2]),new ee(l[0],l[1],l[2])),c.normalized){const u=Er(cn[c.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const c=new ee,a=new ee;for(let l=0,u=o.length;l<u;l++){const h=o[l];if(h.POSITION!==void 0){const d=n.json.accessors[h.POSITION],m=d.min,A=d.max;if(m!==void 0&&A!==void 0){if(a.setX(Math.max(Math.abs(m[0]),Math.abs(A[0]))),a.setY(Math.max(Math.abs(m[1]),Math.abs(A[1]))),a.setZ(Math.max(Math.abs(m[2]),Math.abs(A[2]))),d.normalized){const g=Er(cn[d.componentType]);a.multiplyScalar(g)}c.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}t.boundingBox=r;const i=new Aa;r.getCenter(i.center),i.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=i}function Xi(t,e,n){const s=e.attributes,r=[];function o(i,c){return n.getDependency("accessor",i).then(function(a){t.setAttribute(c,a)})}for(const i in s){const c=yr[i]||i.toLowerCase();c in t.attributes||r.push(o(s[i],c))}if(e.indices!==void 0&&!t.index){const i=n.getDependency("accessor",e.indices).then(function(c){t.setIndex(c)});r.push(i)}return dt(t,e),vh(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?fh(t,e.targets,n):t})}const Ch={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},yh={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class Eh extends ga{constructor(e){super(e),this.type=He}parse(e){const i=function(D,S){switch(D){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(S||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(S||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(S||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(S||""))}},u=`
`,h=function(D,S,G){S=S||1024;let z=D.pos,W=-1,K=0,ne="",q=String.fromCharCode.apply(null,new Uint16Array(D.subarray(z,z+128)));for(;0>(W=q.indexOf(u))&&K<S&&z<D.byteLength;)ne+=q,K+=q.length,z+=128,q+=String.fromCharCode.apply(null,new Uint16Array(D.subarray(z,z+128)));return-1<W?(D.pos+=K+W+1,ne+q.slice(0,W)):!1},d=function(D){const S=/^#\?(\S+)/,G=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Q=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,W=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,K={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ne,q;for((D.pos>=D.byteLength||!(ne=h(D)))&&i(1,"no header found"),(q=ne.match(S))||i(3,"bad initial token"),K.valid|=1,K.programtype=q[1],K.string+=ne+`
`;ne=h(D),ne!==!1;){if(K.string+=ne+`
`,ne.charAt(0)==="#"){K.comments+=ne+`
`;continue}if((q=ne.match(G))&&(K.gamma=parseFloat(q[1])),(q=ne.match(Q))&&(K.exposure=parseFloat(q[1])),(q=ne.match(z))&&(K.valid|=2,K.format=q[1]),(q=ne.match(W))&&(K.valid|=4,K.height=parseInt(q[1],10),K.width=parseInt(q[2],10)),K.valid&2&&K.valid&4)break}return K.valid&2||i(3,"missing format specifier"),K.valid&4||i(3,"missing image size specifier"),K},m=function(D,S,G){const Q=S;if(Q<8||Q>32767||D[0]!==2||D[1]!==2||D[2]&128)return new Uint8Array(D);Q!==(D[2]<<8|D[3])&&i(3,"wrong scanline width");const z=new Uint8Array(4*S*G);z.length||i(4,"unable to allocate buffer space");let W=0,K=0;const ne=4*Q,q=new Uint8Array(4),oe=new Uint8Array(ne);let le=G;for(;le>0&&K<D.byteLength;){K+4>D.byteLength&&i(1),q[0]=D[K++],q[1]=D[K++],q[2]=D[K++],q[3]=D[K++],(q[0]!=2||q[1]!=2||(q[2]<<8|q[3])!=Q)&&i(3,"bad rgbe scanline format");let Me=0,se;for(;Me<ne&&K<D.byteLength;){se=D[K++];const he=se>128;if(he&&(se-=128),(se===0||Me+se>ne)&&i(3,"bad scanline data"),he){const be=D[K++];for(let Ue=0;Ue<se;Ue++)oe[Me++]=be}else oe.set(D.subarray(K,K+se),Me),Me+=se,K+=se}const Re=Q;for(let he=0;he<Re;he++){let be=0;z[W]=oe[he+be],be+=Q,z[W+1]=oe[he+be],be+=Q,z[W+2]=oe[he+be],be+=Q,z[W+3]=oe[he+be],W+=4}le--}return z},A=function(D,S,G,Q){const z=D[S+3],W=Math.pow(2,z-128)/255;G[Q+0]=D[S+0]*W,G[Q+1]=D[S+1]*W,G[Q+2]=D[S+2]*W,G[Q+3]=1},g=function(D,S,G,Q){const z=D[S+3],W=Math.pow(2,z-128)/255;G[Q+0]=tn.toHalfFloat(Math.min(D[S+0]*W,65504)),G[Q+1]=tn.toHalfFloat(Math.min(D[S+1]*W,65504)),G[Q+2]=tn.toHalfFloat(Math.min(D[S+2]*W,65504)),G[Q+3]=tn.toHalfFloat(1)},B=new Uint8Array(e);B.pos=0;const C=d(B),y=C.width,F=C.height,w=m(B.subarray(B.pos),y,F);let T,M,P;switch(this.type){case ot:P=w.length/4;const D=new Float32Array(P*4);for(let G=0;G<P;G++)A(w,G*4,D,G*4);T=D,M=ot;break;case He:P=w.length/4;const S=new Uint16Array(P*4);for(let G=0;G<P;G++)g(w,G*4,S,G*4);T=S,M=He;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:y,height:F,data:T,header:C.string,gamma:C.gamma,exposure:C.exposure,type:M}}setDataType(e){return this.type=e,this}load(e,n,s,r){function o(i,c){switch(i.type){case ot:case He:"colorSpace"in i?i.colorSpace="srgb-linear":i.encoding=3e3,i.minFilter=Oe,i.magFilter=Oe,i.generateMipmaps=!1,i.flipY=!0;break}n&&n(i,c)}return super.load(e,o,s,r)}}const bn="colorSpace"in new pt;class Mh extends ga{constructor(e){super(e),this.type=He}parse(e){const S=Math.pow(2.7182818,2.2);function G(f,p){for(var v=0,R=0;R<65536;++R)(R==0||f[R>>3]&1<<(R&7))&&(p[v++]=R);for(var x=v-1;v<65536;)p[v++]=0;return x}function Q(f){for(var p=0;p<16384;p++)f[p]={},f[p].len=0,f[p].lit=0,f[p].p=null}const z={l:0,c:0,lc:0};function W(f,p,v,R,x){for(;v<f;)p=p<<8|Zt(R,x),v+=8;v-=f,z.l=p>>v&(1<<f)-1,z.c=p,z.lc=v}const K=new Array(59);function ne(f){for(var p=0;p<=58;++p)K[p]=0;for(var p=0;p<65537;++p)K[f[p]]+=1;for(var v=0,p=58;p>0;--p){var R=v+K[p]>>1;K[p]=v,v=R}for(var p=0;p<65537;++p){var x=f[p];x>0&&(f[p]=x|K[x]++<<6)}}function q(f,p,v,R,x,I,O){for(var L=v,k=0,N=0;x<=I;x++){if(L.value-v.value>R)return!1;W(6,k,N,f,L);var J=z.l;if(k=z.c,N=z.lc,O[x]=J,J==63){if(L.value-v.value>R)throw"Something wrong with hufUnpackEncTable";W(8,k,N,f,L);var U=z.l+6;if(k=z.c,N=z.lc,x+U>I+1)throw"Something wrong with hufUnpackEncTable";for(;U--;)O[x++]=0;x--}else if(J>=59){var U=J-59+2;if(x+U>I+1)throw"Something wrong with hufUnpackEncTable";for(;U--;)O[x++]=0;x--}}ne(O)}function oe(f){return f&63}function le(f){return f>>6}function Me(f,p,v,R){for(;p<=v;p++){var x=le(f[p]),I=oe(f[p]);if(x>>I)throw"Invalid table entry";if(I>14){var O=R[x>>I-14];if(O.len)throw"Invalid table entry";if(O.lit++,O.p){var L=O.p;O.p=new Array(O.lit);for(var k=0;k<O.lit-1;++k)O.p[k]=L[k]}else O.p=new Array(1);O.p[O.lit-1]=p}else if(I)for(var N=0,k=1<<14-I;k>0;k--){var O=R[(x<<14-I)+N];if(O.len||O.p)throw"Invalid table entry";O.len=I,O.lit=p,N++}}return!0}const se={c:0,lc:0};function Re(f,p,v,R){f=f<<8|Zt(v,R),p+=8,se.c=f,se.lc=p}const he={c:0,lc:0};function be(f,p,v,R,x,I,O,L,k,N){if(f==p){R<8&&(Re(v,R,x,O),v=se.c,R=se.lc),R-=8;var J=v>>R,J=new Uint8Array([J])[0];if(k.value+J>N)return!1;for(var U=L[k.value-1];J-- >0;)L[k.value++]=U}else if(k.value<N)L[k.value++]=f;else return!1;he.c=v,he.lc=R}function Ue(f){return f&65535}function Ft(f){var p=Ue(f);return p>32767?p-65536:p}const ce={a:0,b:0};function ze(f,p){var v=Ft(f),R=Ft(p),x=R,I=v+(x&1)+(x>>1),O=I,L=I-x;ce.a=O,ce.b=L}function qe(f,p){var v=Ue(f),R=Ue(p),x=v-(R>>1)&65535,I=R+x-32768&65535;ce.a=I,ce.b=x}function Os(f,p,v,R,x,I,O){for(var L=O<16384,k=v>x?x:v,N=1,J;N<=k;)N<<=1;for(N>>=1,J=N,N>>=1;N>=1;){for(var U=0,ye=U+I*(x-J),j=I*N,X=I*J,$=R*N,te=R*J,de,pe,Fe,_e;U<=ye;U+=X){for(var me=U,rt=U+R*(v-J);me<=rt;me+=te){var ge=me+$,xe=me+j,ht=xe+$;L?(ze(f[me+p],f[xe+p]),de=ce.a,Fe=ce.b,ze(f[ge+p],f[ht+p]),pe=ce.a,_e=ce.b,ze(de,pe),f[me+p]=ce.a,f[ge+p]=ce.b,ze(Fe,_e),f[xe+p]=ce.a,f[ht+p]=ce.b):(qe(f[me+p],f[xe+p]),de=ce.a,Fe=ce.b,qe(f[ge+p],f[ht+p]),pe=ce.a,_e=ce.b,qe(de,pe),f[me+p]=ce.a,f[ge+p]=ce.b,qe(Fe,_e),f[xe+p]=ce.a,f[ht+p]=ce.b)}if(v&N){var xe=me+j;L?ze(f[me+p],f[xe+p]):qe(f[me+p],f[xe+p]),de=ce.a,f[xe+p]=ce.b,f[me+p]=de}}if(x&N)for(var me=U,rt=U+R*(v-J);me<=rt;me+=te){var ge=me+$;L?ze(f[me+p],f[ge+p]):qe(f[me+p],f[ge+p]),de=ce.a,f[ge+p]=ce.b,f[me+p]=de}J=N,N>>=1}return U}function Hs(f,p,v,R,x,I,O,L,k,N){for(var J=0,U=0,ye=L,j=Math.trunc(x.value+(I+7)/8);x.value<j;)for(Re(J,U,v,x),J=se.c,U=se.lc;U>=14;){var X=J>>U-14&16383,$=p[X];if($.len)U-=$.len,be($.lit,O,J,U,v,R,x,k,N,ye),J=he.c,U=he.lc;else{if(!$.p)throw"hufDecode issues";var te;for(te=0;te<$.lit;te++){for(var de=oe(f[$.p[te]]);U<de&&x.value<j;)Re(J,U,v,x),J=se.c,U=se.lc;if(U>=de&&le(f[$.p[te]])==(J>>U-de&(1<<de)-1)){U-=de,be($.p[te],O,J,U,v,R,x,k,N,ye),J=he.c,U=he.lc;break}}if(te==$.lit)throw"hufDecode issues"}}var pe=8-I&7;for(J>>=pe,U-=pe;U>0;){var $=p[J<<14-U&16383];if($.len)U-=$.len,be($.lit,O,J,U,v,R,x,k,N,ye),J=he.c,U=he.lc;else throw"hufDecode issues"}return!0}function $n(f,p,v,R,x,I){var O={value:0},L=v.value,k=Ie(p,v),N=Ie(p,v);v.value+=4;var J=Ie(p,v);if(v.value+=4,k<0||k>=65537||N<0||N>=65537)throw"Something wrong with HUF_ENCSIZE";var U=new Array(65537),ye=new Array(16384);Q(ye);var j=R-(v.value-L);if(q(f,p,v,j,k,N,U),J>8*(R-(v.value-L)))throw"Something wrong with hufUncompress";Me(U,k,N,ye),Hs(U,ye,f,p,v,J,N,I,x,O)}function es(f,p,v){for(var R=0;R<v;++R)p[R]=f[p[R]]}function Bn(f){for(var p=1;p<f.length;p++){var v=f[p-1]+f[p]-128;f[p]=v}}function vn(f,p){for(var v=0,R=Math.floor((f.length+1)/2),x=0,I=f.length-1;!(x>I||(p[x++]=f[v++],x>I));)p[x++]=f[R++]}function ts(f){for(var p=f.byteLength,v=new Array,R=0,x=new DataView(f);p>0;){var I=x.getInt8(R++);if(I<0){var O=-I;p-=O+1;for(var L=0;L<O;L++)v.push(x.getUint8(R++))}else{var O=I;p-=2;for(var k=x.getUint8(R++),L=0;L<O+1;L++)v.push(k)}}return v}function Us(f,p,v,R,x,I){var ge=new DataView(I.buffer),O=v[f.idx[0]].width,L=v[f.idx[0]].height,k=3,N=Math.floor(O/8),J=Math.ceil(O/8),U=Math.ceil(L/8),ye=O-(J-1)*8,j=L-(U-1)*8,X={value:0},$=new Array(k),te=new Array(k),de=new Array(k),pe=new Array(k),Fe=new Array(k);for(let fe=0;fe<k;++fe)Fe[fe]=p[f.idx[fe]],$[fe]=fe<1?0:$[fe-1]+J*U,te[fe]=new Float32Array(64),de[fe]=new Uint16Array(64),pe[fe]=new Uint16Array(J*64);for(let fe=0;fe<U;++fe){var _e=8;fe==U-1&&(_e=j);var me=8;for(let Ce=0;Ce<J;++Ce){Ce==J-1&&(me=ye);for(let ue=0;ue<k;++ue)de[ue].fill(0),de[ue][0]=x[$[ue]++],ns(X,R,de[ue]),ss(de[ue],te[ue]),rs(te[ue]);Ns(te);for(let ue=0;ue<k;++ue)ks(te[ue],pe[ue],Ce*64)}let Se=0;for(let Ce=0;Ce<k;++Ce){const ue=v[f.idx[Ce]].type;for(let je=8*fe;je<8*fe+_e;++je){Se=Fe[Ce][je];for(let Gt=0;Gt<N;++Gt){const Ne=Gt*64+(je&7)*8;ge.setUint16(Se+0*2*ue,pe[Ce][Ne+0],!0),ge.setUint16(Se+1*2*ue,pe[Ce][Ne+1],!0),ge.setUint16(Se+2*2*ue,pe[Ce][Ne+2],!0),ge.setUint16(Se+3*2*ue,pe[Ce][Ne+3],!0),ge.setUint16(Se+4*2*ue,pe[Ce][Ne+4],!0),ge.setUint16(Se+5*2*ue,pe[Ce][Ne+5],!0),ge.setUint16(Se+6*2*ue,pe[Ce][Ne+6],!0),ge.setUint16(Se+7*2*ue,pe[Ce][Ne+7],!0),Se+=8*2*ue}}if(N!=J)for(let je=8*fe;je<8*fe+_e;++je){const Gt=Fe[Ce][je]+8*N*2*ue,Ne=N*64+(je&7)*8;for(let vt=0;vt<me;++vt)ge.setUint16(Gt+vt*2*ue,pe[Ce][Ne+vt],!0)}}}for(var rt=new Uint16Array(O),ge=new DataView(I.buffer),xe=0;xe<k;++xe){v[f.idx[xe]].decoded=!0;var ht=v[f.idx[xe]].type;if(v[xe].type==2)for(var Mn=0;Mn<L;++Mn){const fe=Fe[xe][Mn];for(var Ve=0;Ve<O;++Ve)rt[Ve]=ge.getUint16(fe+Ve*2*ht,!0);for(var Ve=0;Ve<O;++Ve)ge.setFloat32(fe+Ve*2*ht,H(rt[Ve]),!0)}}}function ns(f,p,v){for(var R,x=1;x<64;)R=p[f.value],R==65280?x=64:R>>8==255?x+=R&255:(v[x]=R,x++),f.value++}function ss(f,p){p[0]=H(f[0]),p[1]=H(f[1]),p[2]=H(f[5]),p[3]=H(f[6]),p[4]=H(f[14]),p[5]=H(f[15]),p[6]=H(f[27]),p[7]=H(f[28]),p[8]=H(f[2]),p[9]=H(f[4]),p[10]=H(f[7]),p[11]=H(f[13]),p[12]=H(f[16]),p[13]=H(f[26]),p[14]=H(f[29]),p[15]=H(f[42]),p[16]=H(f[3]),p[17]=H(f[8]),p[18]=H(f[12]),p[19]=H(f[17]),p[20]=H(f[25]),p[21]=H(f[30]),p[22]=H(f[41]),p[23]=H(f[43]),p[24]=H(f[9]),p[25]=H(f[11]),p[26]=H(f[18]),p[27]=H(f[24]),p[28]=H(f[31]),p[29]=H(f[40]),p[30]=H(f[44]),p[31]=H(f[53]),p[32]=H(f[10]),p[33]=H(f[19]),p[34]=H(f[23]),p[35]=H(f[32]),p[36]=H(f[39]),p[37]=H(f[45]),p[38]=H(f[52]),p[39]=H(f[54]),p[40]=H(f[20]),p[41]=H(f[22]),p[42]=H(f[33]),p[43]=H(f[38]),p[44]=H(f[46]),p[45]=H(f[51]),p[46]=H(f[55]),p[47]=H(f[60]),p[48]=H(f[21]),p[49]=H(f[34]),p[50]=H(f[37]),p[51]=H(f[47]),p[52]=H(f[50]),p[53]=H(f[56]),p[54]=H(f[59]),p[55]=H(f[61]),p[56]=H(f[35]),p[57]=H(f[36]),p[58]=H(f[48]),p[59]=H(f[49]),p[60]=H(f[57]),p[61]=H(f[58]),p[62]=H(f[62]),p[63]=H(f[63])}function rs(f){const p=.5*Math.cos(.7853975),v=.5*Math.cos(3.14159/16),R=.5*Math.cos(3.14159/8),x=.5*Math.cos(3*3.14159/16),I=.5*Math.cos(5*3.14159/16),O=.5*Math.cos(3*3.14159/8),L=.5*Math.cos(7*3.14159/16);for(var k=new Array(4),N=new Array(4),J=new Array(4),U=new Array(4),ye=0;ye<8;++ye){var j=ye*8;k[0]=R*f[j+2],k[1]=O*f[j+2],k[2]=R*f[j+6],k[3]=O*f[j+6],N[0]=v*f[j+1]+x*f[j+3]+I*f[j+5]+L*f[j+7],N[1]=x*f[j+1]-L*f[j+3]-v*f[j+5]-I*f[j+7],N[2]=I*f[j+1]-v*f[j+3]+L*f[j+5]+x*f[j+7],N[3]=L*f[j+1]-I*f[j+3]+x*f[j+5]-v*f[j+7],J[0]=p*(f[j+0]+f[j+4]),J[3]=p*(f[j+0]-f[j+4]),J[1]=k[0]+k[3],J[2]=k[1]-k[2],U[0]=J[0]+J[1],U[1]=J[3]+J[2],U[2]=J[3]-J[2],U[3]=J[0]-J[1],f[j+0]=U[0]+N[0],f[j+1]=U[1]+N[1],f[j+2]=U[2]+N[2],f[j+3]=U[3]+N[3],f[j+4]=U[3]-N[3],f[j+5]=U[2]-N[2],f[j+6]=U[1]-N[1],f[j+7]=U[0]-N[0]}for(var X=0;X<8;++X)k[0]=R*f[16+X],k[1]=O*f[16+X],k[2]=R*f[48+X],k[3]=O*f[48+X],N[0]=v*f[8+X]+x*f[24+X]+I*f[40+X]+L*f[56+X],N[1]=x*f[8+X]-L*f[24+X]-v*f[40+X]-I*f[56+X],N[2]=I*f[8+X]-v*f[24+X]+L*f[40+X]+x*f[56+X],N[3]=L*f[8+X]-I*f[24+X]+x*f[40+X]-v*f[56+X],J[0]=p*(f[X]+f[32+X]),J[3]=p*(f[X]-f[32+X]),J[1]=k[0]+k[3],J[2]=k[1]-k[2],U[0]=J[0]+J[1],U[1]=J[3]+J[2],U[2]=J[3]-J[2],U[3]=J[0]-J[1],f[0+X]=U[0]+N[0],f[8+X]=U[1]+N[1],f[16+X]=U[2]+N[2],f[24+X]=U[3]+N[3],f[32+X]=U[3]-N[3],f[40+X]=U[2]-N[2],f[48+X]=U[1]-N[1],f[56+X]=U[0]-N[0]}function Ns(f){for(var p=0;p<64;++p){var v=f[0][p],R=f[1][p],x=f[2][p];f[0][p]=v+1.5747*x,f[1][p]=v-.1873*R-.4682*x,f[2][p]=v+1.8556*R}}function ks(f,p,v){for(var R=0;R<64;++R)p[v+R]=tn.toHalfFloat(is(f[R]))}function is(f){return f<=1?Math.sign(f)*Math.pow(Math.abs(f),2.2):Math.sign(f)*Math.pow(S,Math.abs(f)-1)}function Xt(f){return new DataView(f.array.buffer,f.offset.value,f.size)}function xt(f){var p=f.viewer.buffer.slice(f.offset.value,f.offset.value+f.size),v=new Uint8Array(ts(p)),R=new Uint8Array(v.length);return Bn(v),vn(v,R),new DataView(R.buffer)}function Cn(f){var p=f.array.slice(f.offset.value,f.offset.value+f.size),v=us(p),R=new Uint8Array(v.length);return Bn(v),vn(v,R),new DataView(R.buffer)}function Js(f){for(var p=f.viewer,v={value:f.offset.value},R=new Uint16Array(f.width*f.scanlineBlockSize*(f.channels*f.type)),x=new Uint8Array(8192),I=0,O=new Array(f.channels),L=0;L<f.channels;L++)O[L]={},O[L].start=I,O[L].end=O[L].start,O[L].nx=f.width,O[L].ny=f.lines,O[L].size=f.type,I+=O[L].nx*O[L].ny*O[L].size;var k=Le(p,v),N=Le(p,v);if(N>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(k<=N)for(var L=0;L<N-k+1;L++)x[L+k]=E(p,v);var J=new Uint16Array(65536),U=G(x,J),ye=Ie(p,v);$n(f.array,p,v,ye,R,I);for(var L=0;L<f.channels;++L)for(var j=O[L],X=0;X<O[L].size;++X)Os(R,j.start+X,j.nx,j.size,j.ny,j.nx*j.size,U);es(J,R,I);for(var $=0,te=new Uint8Array(R.buffer.byteLength),de=0;de<f.lines;de++)for(var pe=0;pe<f.channels;pe++){var j=O[pe],Fe=j.nx*j.size,_e=new Uint8Array(R.buffer,j.end*2,Fe*2);te.set(_e,$),$+=Fe*2,j.end+=Fe}return new DataView(te.buffer)}function os(f){var p=f.array.slice(f.offset.value,f.offset.value+f.size),v=us(p);const R=f.lines*f.channels*f.width,x=f.type==1?new Uint16Array(R):new Uint32Array(R);let I=0,O=0;const L=new Array(4);for(let k=0;k<f.lines;k++)for(let N=0;N<f.channels;N++){let J=0;switch(f.type){case 1:L[0]=I,L[1]=L[0]+f.width,I=L[1]+f.width;for(let U=0;U<f.width;++U){const ye=v[L[0]++]<<8|v[L[1]++];J+=ye,x[O]=J,O++}break;case 2:L[0]=I,L[1]=L[0]+f.width,L[2]=L[1]+f.width,I=L[2]+f.width;for(let U=0;U<f.width;++U){const ye=v[L[0]++]<<24|v[L[1]++]<<16|v[L[2]++]<<8;J+=ye,x[O]=J,O++}break}}return new DataView(x.buffer)}function Qt(f){var p=f.viewer,v={value:f.offset.value},R=new Uint8Array(f.width*f.lines*(f.channels*f.type*2)),x={version:_(p,v),unknownUncompressedSize:_(p,v),unknownCompressedSize:_(p,v),acCompressedSize:_(p,v),dcCompressedSize:_(p,v),rleCompressedSize:_(p,v),rleUncompressedSize:_(p,v),rleRawSize:_(p,v),totalAcUncompressedCount:_(p,v),totalDcUncompressedCount:_(p,v),acCompression:_(p,v)};if(x.version<2)throw"EXRLoader.parse: "+En.compression+" version "+x.version+" is unsupported";for(var I=new Array,O=Le(p,v)-2;O>0;){var L=Yt(p.buffer,v),k=E(p,v),N=k>>2&3,J=(k>>4)-1,U=new Int8Array([J])[0],ye=E(p,v);I.push({name:L,index:U,type:ye,compression:N}),O-=L.length+3}for(var j=En.channels,X=new Array(f.channels),$=0;$<f.channels;++$){var te=X[$]={},de=j[$];te.name=de.name,te.compression=0,te.decoded=!1,te.type=de.pixelType,te.pLinear=de.pLinear,te.width=f.width,te.height=f.lines}for(var pe={idx:new Array(3)},Fe=0;Fe<f.channels;++Fe)for(var te=X[Fe],$=0;$<I.length;++$){var _e=I[$];te.name==_e.name&&(te.compression=_e.compression,_e.index>=0&&(pe.idx[_e.index]=Fe),te.offset=Fe)}if(x.acCompressedSize>0)switch(x.acCompression){case 0:var ge=new Uint16Array(x.totalAcUncompressedCount);$n(f.array,p,v,x.acCompressedSize,ge,x.totalAcUncompressedCount);break;case 1:var me=f.array.slice(v.value,v.value+x.totalAcUncompressedCount),rt=us(me),ge=new Uint16Array(rt.buffer);v.value+=x.totalAcUncompressedCount;break}if(x.dcCompressedSize>0){var xe={array:f.array,offset:v,size:x.dcCompressedSize},ht=new Uint16Array(Cn(xe).buffer);v.value+=x.dcCompressedSize}if(x.rleRawSize>0){var me=f.array.slice(v.value,v.value+x.rleCompressedSize),rt=us(me),Mn=ts(rt.buffer);v.value+=x.rleCompressedSize}for(var Ve=0,fe=new Array(X.length),$=0;$<fe.length;++$)fe[$]=new Array;for(var Se=0;Se<f.lines;++Se)for(var Ce=0;Ce<X.length;++Ce)fe[Ce].push(Ve),Ve+=X[Ce].width*f.type*2;Us(pe,fe,X,ge,ht,R);for(var $=0;$<X.length;++$){var te=X[$];if(!te.decoded)switch(te.compression){case 2:for(var ue=0,je=0,Se=0;Se<f.lines;++Se){for(var Gt=fe[$][ue],Ne=0;Ne<te.width;++Ne){for(var vt=0;vt<2*te.type;++vt)R[Gt++]=Mn[je+vt*te.width*te.height];je++}ue++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(R.buffer)}function Yt(f,p){for(var v=new Uint8Array(f),R=0;v[p.value+R]!=0;)R+=1;var x=new TextDecoder().decode(v.slice(p.value,p.value+R));return p.value=p.value+R+1,x}function Ks(f,p,v){var R=new TextDecoder().decode(new Uint8Array(f).slice(p.value,p.value+v));return p.value=p.value+v,R}function as(f,p){var v=It(f,p),R=Ie(f,p);return[v,R]}function Vs(f,p){var v=Ie(f,p),R=Ie(f,p);return[v,R]}function It(f,p){var v=f.getInt32(p.value,!0);return p.value=p.value+4,v}function Ie(f,p){var v=f.getUint32(p.value,!0);return p.value=p.value+4,v}function Zt(f,p){var v=f[p.value];return p.value=p.value+1,v}function E(f,p){var v=f.getUint8(p.value);return p.value=p.value+1,v}const _=function(f,p){let v;return"getBigInt64"in DataView.prototype?v=Number(f.getBigInt64(p.value,!0)):v=f.getUint32(p.value+4,!0)+Number(f.getUint32(p.value,!0)<<32),p.value+=8,v};function V(f,p){var v=f.getFloat32(p.value,!0);return p.value+=4,v}function ae(f,p){return tn.toHalfFloat(V(f,p))}function H(f){var p=(f&31744)>>10,v=f&1023;return(f>>15?-1:1)*(p?p===31?v?NaN:1/0:Math.pow(2,p-15)*(1+v/1024):6103515625e-14*(v/1024))}function Le(f,p){var v=f.getUint16(p.value,!0);return p.value+=2,v}function st(f,p){return H(Le(f,p))}function wi(f,p,v,R){for(var x=v.value,I=[];v.value<x+R-1;){var O=Yt(p,v),L=It(f,v),k=E(f,v);v.value+=3;var N=It(f,v),J=It(f,v);I.push({name:O,pixelType:L,pLinear:k,xSampling:N,ySampling:J})}return v.value+=1,I}function cs(f,p){var v=V(f,p),R=V(f,p),x=V(f,p),I=V(f,p),O=V(f,p),L=V(f,p),k=V(f,p),N=V(f,p);return{redX:v,redY:R,greenX:x,greenY:I,blueX:O,blueY:L,whiteX:k,whiteY:N}}function $e(f,p){var v=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],R=E(f,p);return v[R]}function et(f,p){var v=Ie(f,p),R=Ie(f,p),x=Ie(f,p),I=Ie(f,p);return{xMin:v,yMin:R,xMax:x,yMax:I}}function wt(f,p){var v=["INCREASING_Y"],R=E(f,p);return v[R]}function St(f,p){var v=V(f,p),R=V(f,p);return[v,R]}function Pt(f,p){var v=V(f,p),R=V(f,p),x=V(f,p);return[v,R,x]}function Wt(f,p,v,R,x){if(R==="string"||R==="stringvector"||R==="iccProfile")return Ks(p,v,x);if(R==="chlist")return wi(f,p,v,x);if(R==="chromaticities")return cs(f,v);if(R==="compression")return $e(f,v);if(R==="box2i")return et(f,v);if(R==="lineOrder")return wt(f,v);if(R==="float")return V(f,v);if(R==="v2f")return St(f,v);if(R==="v3f")return Pt(f,v);if(R==="int")return It(f,v);if(R==="rational")return as(f,v);if(R==="timecode")return Vs(f,v);if(R==="preview")return v.value+=x,"skipped";v.value+=x}function ml(f,p,v){const R={};if(f.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";R.version=f.getUint8(4);const x=f.getUint8(5);R.spec={singleTile:!!(x&2),longName:!!(x&4),deepFormat:!!(x&8),multiPart:!!(x&16)},v.value=8;for(var I=!0;I;){var O=Yt(p,v);if(O==0)I=!1;else{var L=Yt(p,v),k=Ie(f,v),N=Wt(f,p,v,L,k);N===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${L}'.`):R[O]=N}}if(x&-5)throw console.error("EXRHeader:",R),"THREE.EXRLoader: provided file is currently unsupported.";return R}function Al(f,p,v,R,x){const I={size:0,viewer:p,array:v,offset:R,width:f.dataWindow.xMax-f.dataWindow.xMin+1,height:f.dataWindow.yMax-f.dataWindow.yMin+1,channels:f.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:f.channels[0].pixelType,uncompress:null,getter:null,format:null,[bn?"colorSpace":"encoding"]:null};switch(f.compression){case"NO_COMPRESSION":I.lines=1,I.uncompress=Xt;break;case"RLE_COMPRESSION":I.lines=1,I.uncompress=xt;break;case"ZIPS_COMPRESSION":I.lines=1,I.uncompress=Cn;break;case"ZIP_COMPRESSION":I.lines=16,I.uncompress=Cn;break;case"PIZ_COMPRESSION":I.lines=32,I.uncompress=Js;break;case"PXR24_COMPRESSION":I.lines=16,I.uncompress=os;break;case"DWAA_COMPRESSION":I.lines=32,I.uncompress=Qt;break;case"DWAB_COMPRESSION":I.lines=256,I.uncompress=Qt;break;default:throw"EXRLoader.parse: "+f.compression+" is unsupported"}if(I.scanlineBlockSize=I.lines,I.type==1)switch(x){case ot:I.getter=st,I.inputSize=2;break;case He:I.getter=Le,I.inputSize=2;break}else if(I.type==2)switch(x){case ot:I.getter=V,I.inputSize=4;break;case He:I.getter=ae,I.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+I.type+" for "+f.compression+".";I.blockCount=(f.dataWindow.yMax+1)/I.scanlineBlockSize;for(var O=0;O<I.blockCount;O++)_(p,R);I.outputChannels=I.channels==3?4:I.channels;const L=I.width*I.height*I.outputChannels;switch(x){case ot:I.byteArray=new Float32Array(L),I.channels<I.outputChannels&&I.byteArray.fill(1,0,L);break;case He:I.byteArray=new Uint16Array(L),I.channels<I.outputChannels&&I.byteArray.fill(15360,0,L);break;default:console.error("THREE.EXRLoader: unsupported type: ",x);break}return I.bytesPerLine=I.width*I.inputSize*I.channels,I.outputChannels==4?I.format=Nn:I.format=Wl,bn?I.colorSpace="srgb-linear":I.encoding=3e3,I}const ls=new DataView(e),gl=new Uint8Array(e),yn={value:0},En=ml(ls,e,yn),ie=Al(En,ls,gl,yn,this.type),Si={value:0},Bl={R:0,G:1,B:2,A:3,Y:0};for(let f=0;f<ie.height/ie.scanlineBlockSize;f++){const p=Ie(ls,yn);ie.size=Ie(ls,yn),ie.lines=p+ie.scanlineBlockSize>ie.height?ie.height-p:ie.scanlineBlockSize;const R=ie.size<ie.lines*ie.bytesPerLine?ie.uncompress(ie):Xt(ie);yn.value+=ie.size;for(let x=0;x<ie.scanlineBlockSize;x++){const I=x+f*ie.scanlineBlockSize;if(I>=ie.height)break;for(let O=0;O<ie.channels;O++){const L=Bl[En.channels[O].name];for(let k=0;k<ie.width;k++){Si.value=(x*(ie.channels*ie.width)+O*ie.width+k)*ie.inputSize;const N=(ie.height-1-I)*(ie.width*ie.outputChannels)+k*ie.outputChannels+L;ie.byteArray[N]=ie.getter(R,Si)}}}}return{header:En,width:ie.width,height:ie.height,data:ie.byteArray,format:ie.format,[bn?"colorSpace":"encoding"]:ie[bn?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,s,r){function o(i,c){bn?i.colorSpace=c.colorSpace:i.encoding=c.encoding,i.minFilter=Oe,i.magFilter=Oe,i.generateMipmaps=!1,i.flipY=!1,n&&n(i,c)}return super.load(e,o,s,r)}}const qs=new WeakMap;class Th extends kr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,s,r){const o=new Tt(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,i=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(i,c).then(n).catch(r)},s,r)}decodeDracoFile(e,n,s,r){const o={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!s};this.decodeGeometry(e,o).then(n)}decodeGeometry(e,n){for(const a in n.attributeTypes){const l=n.attributeTypes[a];l.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[a]=l.name)}const s=JSON.stringify(n);if(qs.has(e)){const a=qs.get(e);if(a.key===s)return a.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const o=this.workerNextTaskID++,i=e.byteLength,c=this._getWorker(o,i).then(a=>(r=a,new Promise((l,u)=>{r._callbacks[o]={resolve:l,reject:u},r.postMessage({type:"decode",id:o,taskConfig:n,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return c.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),qs.set(e,{key:s,promise:c}),c}_createGeometry(e){const n=new pa;e.index&&n.setIndex(new Pn(e.index.array,1));for(let s=0;s<e.attributes.length;s++){const r=e.attributes[s],o=r.name,i=r.array,c=r.itemSize;n.setAttribute(o,new Pn(i,c))}return n}_loadLibrary(e,n){const s=new Tt(this.manager);return s.setPath(this.decoderPath),s.setResponseType(n),s.setWithCredentials(this.withCredentials),new Promise((r,o)=>{s.load(e,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(s=>{const r=s[0];e||(this.decoderConfig.wasmBinary=s[1]);const o=bh.toString(),i=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){const i=o.data;switch(i.type){case"decode":r._callbacks[i.id].resolve(i);break;case"error":r._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[e]=n,s._taskLoad+=n,s})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function bh(){let t,e;onmessage=function(i){const c=i.data;switch(c.type){case"init":t=c.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(t)});break;case"decode":const a=c.buffer,l=c.taskConfig;e.then(u=>{const h=u.draco,d=new h.Decoder,m=new h.DecoderBuffer;m.Init(new Int8Array(a),a.byteLength);try{const A=n(h,d,m,l),g=A.attributes.map(B=>B.array.buffer);A.index&&g.push(A.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:A},g)}catch(A){console.error(A),self.postMessage({type:"error",id:c.id,error:A.message})}finally{h.destroy(m),h.destroy(d)}});break}};function n(i,c,a,l){const u=l.attributeIDs,h=l.attributeTypes;let d,m;const A=c.GetEncodedGeometryType(a);if(A===i.TRIANGULAR_MESH)d=new i.Mesh,m=c.DecodeBufferToMesh(a,d);else if(A===i.POINT_CLOUD)d=new i.PointCloud,m=c.DecodeBufferToPointCloud(a,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const g={index:null,attributes:[]};for(const B in u){const C=self[h[B]];let y,F;if(l.useUniqueIDs)F=u[B],y=c.GetAttributeByUniqueId(d,F);else{if(F=c.GetAttributeId(d,i[u[B]]),F===-1)continue;y=c.GetAttribute(d,F)}g.attributes.push(r(i,c,d,B,C,y))}return A===i.TRIANGULAR_MESH&&(g.index=s(i,c,d)),i.destroy(d),g}function s(i,c,a){const u=a.num_faces()*3,h=u*4,d=i._malloc(h);c.GetTrianglesUInt32Array(a,h,d);const m=new Uint32Array(i.HEAPF32.buffer,d,u).slice();return i._free(d),{array:m,itemSize:1}}function r(i,c,a,l,u,h){const d=h.num_components(),A=a.num_points()*d,g=A*u.BYTES_PER_ELEMENT,B=o(i,u),C=i._malloc(g);c.GetAttributeDataArrayForAllPoints(a,h,B,g,C);const y=new u(i.HEAPF32.buffer,C,A).slice();return i._free(C),{name:l,array:y,itemSize:d}}function o(i,c){switch(c){case Float32Array:return i.DT_FLOAT32;case Int8Array:return i.DT_INT8;case Int16Array:return i.DT_INT16;case Int32Array:return i.DT_INT32;case Uint8Array:return i.DT_UINT8;case Uint16Array:return i.DT_UINT16;case Uint32Array:return i.DT_UINT32}}}let ds;const $s=()=>{if(ds)return ds;const t="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",e="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",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),s=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(n)&&(r=e);let o;const i=WebAssembly.instantiate(c(r),{}).then(h=>{o=h.instance,o.exports.__wasm_call_ctors()});function c(h){const d=new Uint8Array(h.length);for(let A=0;A<h.length;++A){const g=h.charCodeAt(A);d[A]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let m=0;for(let A=0;A<h.length;++A)d[m++]=d[A]<60?s[d[A]]:(d[A]-60)*64+d[++A];return d.buffer.slice(0,m)}function a(h,d,m,A,g,B){const C=o.exports.sbrk,y=m+3&-4,F=C(y*A),w=C(g.length),T=new Uint8Array(o.exports.memory.buffer);T.set(g,w);const M=h(F,m,A,w,g.length);if(M===0&&B&&B(F,y,A),d.set(T.subarray(F,F+m*A)),C(F-C(0)),M!==0)throw new Error(`Malformed buffer data: ${M}`)}const l={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ds={ready:i,supported:!0,decodeVertexBuffer(h,d,m,A,g){a(o.exports.meshopt_decodeVertexBuffer,h,d,m,A,o.exports[l[g]])},decodeIndexBuffer(h,d,m,A){a(o.exports.meshopt_decodeIndexBuffer,h,d,m,A)},decodeIndexSequence(h,d,m,A){a(o.exports.meshopt_decodeIndexSequence,h,d,m,A)},decodeGltfBuffer(h,d,m,A,g,B){a(o.exports[u[g]],h,d,m,A,o.exports[l[B]])}},ds};function Fa(t,e,n,s){const r=class extends un{constructor(i={}){const c=Object.entries(t);super({uniforms:c.reduce((a,[l,u])=>{const h=zl.clone({[l]:{value:u}});return{...a,...h}},{}),vertexShader:e,fragmentShader:n}),this.key="",c.forEach(([a])=>Object.defineProperty(this,a,{get:()=>this.uniforms[a].value,set:l=>this.uniforms[a].value=l})),Object.assign(this,i)}};return r.key=Gn.generateUUID(),r}const Dh=()=>parseInt(Nr.replace(/\D+/g,"")),xa=Dh();let fs=null,Ia="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function wa(t=!0,e=!0,n){return s=>{n&&n(s),t&&(fs||(fs=new Th),fs.setDecoderPath(typeof t=="string"?t:Ia),s.setDRACOLoader(fs)),e&&s.setMeshoptDecoder(typeof $s=="function"?$s():$s)}}const jr=(t,e,n,s)=>Vt(Vr,t,wa(e,n,s));jr.preload=(t,e,n,s)=>Vt.preload(Vr,t,wa(e,n,s));jr.clear=t=>Vt.clear(Vr,t);jr.setDecoderPath=t=>{Ia=t};function Rh(t,e,n){const s=Ae(d=>d.size),r=Ae(d=>d.viewport),o=typeof t=="number"?t:s.width*r.dpr,i=s.height*r.dpr,c=(typeof t=="number"?n:t)||{},{samples:a=0,depth:l,...u}=c,h=b.useMemo(()=>{const d=new jt(o,i,{minFilter:Oe,magFilter:Oe,type:He,...u});return l&&(d.depthTexture=new ql(o,i,ot)),d.samples=a,d},[]);return b.useLayoutEffect(()=>{h.setSize(o,i),a&&(h.samples=a)},[a,h,o,i]),b.useEffect(()=>()=>h.dispose(),[]),h}const Fh=t=>typeof t=="function",OA=b.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:s,children:r,...o},i)=>{const c=Ae(({set:B})=>B),a=Ae(({camera:B})=>B),l=Ae(({size:B})=>B),u=b.useRef(null);b.useImperativeHandle(i,()=>u.current,[]);const h=b.useRef(null),d=Rh(e);b.useLayoutEffect(()=>{o.manual||(u.current.aspect=l.width/l.height)},[l,o]),b.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let m=0,A=null;const g=Fh(r);return pn(B=>{g&&(n===1/0||m<n)&&(h.current.visible=!1,B.gl.setRenderTarget(d),A=B.scene.background,t&&(B.scene.background=t),B.gl.render(B.scene,u.current),B.scene.background=A,B.gl.setRenderTarget(null),h.current.visible=!0,m++)}),b.useLayoutEffect(()=>{if(s){const B=a;return c(()=>({camera:u.current})),()=>c(()=>({camera:B}))}},[u,s,c]),b.createElement(b.Fragment,null,b.createElement("perspectiveCamera",it({ref:u},o),!g&&r),b.createElement("group",{ref:h},g&&r(d.texture)))}),HA=b.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:s,enableDamping:r=!0,keyEvents:o=!1,onChange:i,onStart:c,onEnd:a,...l},u)=>{const h=Ae(M=>M.invalidate),d=Ae(M=>M.camera),m=Ae(M=>M.gl),A=Ae(M=>M.events),g=Ae(M=>M.setEvents),B=Ae(M=>M.set),C=Ae(M=>M.get),y=Ae(M=>M.performance),F=e||d,w=s||A.connected||m.domElement,T=b.useMemo(()=>new Hu(F),[F]);return pn(()=>{T.enabled&&T.update()},-1),b.useEffect(()=>(o&&T.connect(o===!0?w:o),T.connect(w),()=>void T.dispose()),[o,w,n,T,h]),b.useEffect(()=>{const M=S=>{h(),n&&y.regress(),i&&i(S)},P=S=>{c&&c(S)},D=S=>{a&&a(S)};return T.addEventListener("change",M),T.addEventListener("start",P),T.addEventListener("end",D),()=>{T.removeEventListener("start",P),T.removeEventListener("end",D),T.removeEventListener("change",M)}},[i,c,a,T,h,g]),b.useEffect(()=>{if(t){const M=C().controls;return B({controls:T}),()=>B({controls:M})}},[t,T]),b.createElement("primitive",it({ref:u,object:T,enableDamping:r},l))}),xh=b.forwardRef(function({children:e,disable:n,disableX:s,disableY:r,disableZ:o,left:i,right:c,top:a,bottom:l,front:u,back:h,onCentered:d,precise:m=!0,cacheKey:A=0,...g},B){const C=b.useRef(null),y=b.useRef(null),F=b.useRef(null);return b.useLayoutEffect(()=>{y.current.matrixWorld.identity();const w=new Jr().setFromObject(F.current,m),T=new ee,M=new Aa,P=w.max.x-w.min.x,D=w.max.y-w.min.y,S=w.max.z-w.min.z;w.getCenter(T),w.getBoundingSphere(M);const G=a?D/2:l?-D/2:0,Q=i?-P/2:c?P/2:0,z=u?S/2:h?-S/2:0;y.current.position.set(n||s?0:-T.x+Q,n||r?0:-T.y+G,n||o?0:-T.z+z),typeof d<"u"&&d({parent:C.current.parent,container:C.current,width:P,height:D,depth:S,boundingBox:w,boundingSphere:M,center:T,verticalAlignment:G,horizontalAlignment:Q,depthAlignment:z})},[A,d,a,i,u,n,s,r,o,m,c,l,h]),b.useImperativeHandle(B,()=>C.current,[]),b.createElement("group",it({ref:C},g),b.createElement("group",{ref:y},b.createElement("group",{ref:F},e)))}),Ih=3e3,wh=3001,Sh=Fa({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");var Qe=function(t){return t[t.NONE=0]="NONE",t[t.START=1]="START",t[t.ACTIVE=2]="ACTIVE",t}(Qe||{});const $t=t=>t&&t.isOrthographicCamera,Ph=t=>t&&t.isBox3,Gh=t=>1-Math.exp(-5*t)+.007*t,Sa=b.createContext(null);function Lh({children:t,maxDuration:e=1,margin:n=1.2,observe:s,fit:r,clip:o,interpolateFunc:i=Gh,onFit:c}){const a=b.useRef(null),{camera:l,size:u,invalidate:h}=Ae(),d=Ae(T=>T.controls),m=b.useRef(c);m.current=c;const A=b.useRef({camPos:new ee,camRot:new kt,camZoom:1}),g=b.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),B=b.useRef(Qe.NONE),C=b.useRef(0),[y]=b.useState(()=>new Jr),F=b.useMemo(()=>{function T(){const M=y.getSize(new ee),P=y.getCenter(new ee),D=Math.max(M.x,M.y,M.z),S=$t(l)?D*4:D/(2*Math.atan(Math.PI*l.fov/360)),G=$t(l)?D*4:S/l.aspect,Q=n*Math.max(S,G);return{box:y,size:M,center:P,distance:Q}}return{getSize:T,refresh(M){if(Ph(M))y.copy(M);else{const P=M||a.current;if(!P)return this;P.updateWorldMatrix(!0,!0),y.setFromObject(P)}if(y.isEmpty()){const P=l.position.length()||10;y.setFromCenterAndSize(new ee,new ee(P,P,P))}return A.current.camPos.copy(l.position),A.current.camRot.copy(l.quaternion),$t(l)&&(A.current.camZoom=l.zoom),g.current.camPos=void 0,g.current.camRot=void 0,g.current.camZoom=void 0,g.current.camUp=void 0,g.current.target=void 0,this},reset(){const{center:M,distance:P}=T(),D=l.position.clone().sub(M).normalize();g.current.camPos=M.clone().addScaledVector(D,P),g.current.target=M.clone();const S=new Jt().lookAt(g.current.camPos,g.current.target,l.up);return g.current.camRot=new kt().setFromRotationMatrix(S),B.current=Qe.START,C.current=0,this},moveTo(M){return g.current.camPos=Array.isArray(M)?new ee(...M):M.clone(),B.current=Qe.START,C.current=0,this},lookAt({target:M,up:P}){g.current.target=Array.isArray(M)?new ee(...M):M.clone(),P?g.current.camUp=Array.isArray(P)?new ee(...P):P.clone():g.current.camUp=l.up.clone();const D=new Jt().lookAt(g.current.camPos||l.position,g.current.target,g.current.camUp);return g.current.camRot=new kt().setFromRotationMatrix(D),B.current=Qe.START,C.current=0,this},to({position:M,target:P}){return this.moveTo(M).lookAt({target:P})},fit(){if(!$t(l))return this.reset();let M=0,P=0;const D=[new ee(y.min.x,y.min.y,y.min.z),new ee(y.min.x,y.max.y,y.min.z),new ee(y.min.x,y.min.y,y.max.z),new ee(y.min.x,y.max.y,y.max.z),new ee(y.max.x,y.max.y,y.max.z),new ee(y.max.x,y.max.y,y.min.z),new ee(y.max.x,y.min.y,y.max.z),new ee(y.max.x,y.min.y,y.min.z)],S=g.current.camPos||l.position,G=g.current.target||(d==null?void 0:d.target),Q=g.current.camUp||l.up,z=G?new Jt().lookAt(S,G,Q).setPosition(S).invert():l.matrixWorldInverse;for(const ne of D)ne.applyMatrix4(z),M=Math.max(M,Math.abs(ne.y)),P=Math.max(P,Math.abs(ne.x));M*=2,P*=2;const W=(l.top-l.bottom)/M,K=(l.right-l.left)/P;return g.current.camZoom=Math.min(W,K)/n,B.current=Qe.START,C.current=0,m.current&&m.current(this.getSize()),this},clip(){const{distance:M}=T();return l.near=M/100,l.far=M*100,l.updateProjectionMatrix(),d&&(d.maxDistance=M*10,d.update()),h(),this}}},[y,l,d,n,h]);b.useLayoutEffect(()=>{if(d){const T=()=>{if(d&&g.current.target&&B.current!==Qe.NONE){const M=new ee().setFromMatrixColumn(l.matrix,2),P=A.current.camPos.distanceTo(d.target),D=(g.current.camPos||A.current.camPos).distanceTo(g.current.target),S=(1-C.current)*P+C.current*D;d.target.copy(l.position).addScaledVector(M,-S),d.update()}B.current=Qe.NONE};return d.addEventListener("start",T),()=>d.removeEventListener("start",T)}},[d]);const w=b.useRef(0);return b.useLayoutEffect(()=>{(s||w.current++===0)&&(F.refresh(),r&&F.reset().fit(),o&&F.clip())},[u,o,r,s,l,d]),pn((T,M)=>{if(B.current===Qe.START)B.current=Qe.ACTIVE,h();else if(B.current===Qe.ACTIVE){if(C.current+=M/e,C.current>=1)g.current.camPos&&l.position.copy(g.current.camPos),g.current.camRot&&l.quaternion.copy(g.current.camRot),g.current.camUp&&l.up.copy(g.current.camUp),g.current.camZoom&&$t(l)&&(l.zoom=g.current.camZoom),l.updateMatrixWorld(),l.updateProjectionMatrix(),d&&g.current.target&&(d.target.copy(g.current.target),d.update()),B.current=Qe.NONE;else{const P=i(C.current);g.current.camPos&&l.position.lerpVectors(A.current.camPos,g.current.camPos,P),g.current.camRot&&l.quaternion.slerpQuaternions(A.current.camRot,g.current.camRot,P),g.current.camUp&&l.up.set(0,1,0).applyQuaternion(l.quaternion),g.current.camZoom&&$t(l)&&(l.zoom=(1-P)*A.current.camZoom+P*g.current.camZoom),l.updateMatrixWorld(),l.updateProjectionMatrix()}h()}}),b.createElement("group",{ref:a},b.createElement(Sa.Provider,{value:F},t))}function _h(){return b.useContext(Sa)}const Pa=(t,e,n)=>{let s;switch(t){case Br:s=new Uint8ClampedArray(e*n*4);break;case He:s=new Uint16Array(e*n*4);break;case ru:s=new Uint32Array(e*n*4);break;case su:s=new Int8Array(e*n*4);break;case nu:s=new Int16Array(e*n*4);break;case tu:s=new Int32Array(e*n*4);break;case ot:s=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return s};let ps;const Oh=(t,e,n,s)=>{if(ps!==void 0)return ps;const r=new jt(1,1,s);e.setRenderTarget(r);const o=new Qn(new Kr,new en({color:16777215}));e.render(o,n),e.setRenderTarget(null);const i=Pa(t,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,i),r.dispose(),o.geometry.dispose(),o.material.dispose(),ps=i[0]!==0,ps};class Xr{constructor(e){var n,s,r,o,i,c,a,l,u,h,d,m,A,g,B,C;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(F){throw this._renderer.setRenderTarget(null),F}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const y={format:Nn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.generateMipmaps:!1,magFilter:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.magFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.magFilter:Oe,minFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.minFilter)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter:Oe,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:ft,wrapT:((A=e.renderTargetOptions)===null||A===void 0?void 0:A.wrapT)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT:ft};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Xr.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Ba,this._camera=new wn,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Oh(this._type,this._renderer,this._camera,y)){let F;switch(this._type){case He:F=this._renderer.extensions.has("EXT_color_buffer_float")?ot:void 0;break}F!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ot}`),this._type=F):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Qn(new Kr,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new jt(this.width,this.height,y),this._renderTarget.texture.mapping=((B=e.renderTargetOptions)===null||B===void 0?void 0:B.mapping)!==void 0?(C=e.renderTargetOptions)===null||C===void 0?void 0:C.mapping:Es}static instantiateRenderer(){const e=new $l;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=Pa(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new eu(this.toArray(),this.width,this.height,Nn,this._type,(e==null?void 0:e.mapping)||Es,(e==null?void 0:e.wrapS)||ft,(e==null?void 0:e.wrapT)||ft,(e==null?void 0:e.magFilter)||Oe,(e==null?void 0:e.minFilter)||Oe,(e==null?void 0:e.anisotropy)||1,gr);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof un&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof pt&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof pt&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Hh=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Uh=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Nh extends un{constructor({gamma:e,offsetHdr:n,offsetSdr:s,gainMapMin:r,gainMapMax:o,maxDisplayBoost:i,hdrCapacityMin:c,hdrCapacityMax:a,sdr:l,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:Hh,fragmentShader:Uh,uniforms:{sdr:{value:l},gainMap:{value:u},gamma:{value:new ee(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ee().fromArray(n)},offsetSdr:{value:new ee().fromArray(s)},gainMapMin:{value:new ee().fromArray(r)},gainMapMax:{value:new ee().fromArray(o)},weightFactor:{value:(Math.log2(i)-c)/(a-c)}},blending:au,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=i,this._hdrCapacityMin=c,this._hdrCapacityMax=a,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Ga extends Error{}class La extends Error{}const Dn=(t,e,n)=>{const s=new RegExp(`${e}="([^"]*)"`,"i").exec(t);if(s)return s[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(t);if(r){const o=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return o&&o.length===3?o.map(i=>i.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},kh=t=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(t):e=t.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const s=e.indexOf("x:xmpmeta>",n),r=e.slice(n,s+10);try{const o=Dn(r,"hdrgm:GainMapMin","0"),i=Dn(r,"hdrgm:GainMapMax"),c=Dn(r,"hdrgm:Gamma","1"),a=Dn(r,"hdrgm:OffsetSDR","0.015625"),l=Dn(r,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),h=u?u[1]:"0",d=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!d)throw new Error("Incomplete gainmap metadata");const m=d[1];return{gainMapMin:Array.isArray(o)?o.map(A=>parseFloat(A)):[parseFloat(o),parseFloat(o),parseFloat(o)],gainMapMax:Array.isArray(i)?i.map(A=>parseFloat(A)):[parseFloat(i),parseFloat(i),parseFloat(i)],gamma:Array.isArray(c)?c.map(A=>parseFloat(A)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetSdr:Array.isArray(a)?a.map(A=>parseFloat(A)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetHdr:Array.isArray(l)?l.map(A=>parseFloat(A)):[parseFloat(l),parseFloat(l),parseFloat(l)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(m)}}catch{}n=e.indexOf("<x:xmpmeta",s)}};class Jh{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,s)=>{const r=this.options.debug,o=new DataView(e.buffer);if(o.getUint16(0)!==65496){s(new Error("Not a valid jpeg"));return}const i=o.byteLength;let c=2,a=0,l;for(;c<i;){if(++a>250){s(new Error(`Found no marker after ${a} loops 😵`));return}if(o.getUint8(c)!==255){s(new Error(`Not a valid marker at offset 0x${c.toString(16)}, found: 0x${o.getUint8(c).toString(16)}`));return}if(l=o.getUint8(c+1),r&&console.log(`Marker: ${l.toString(16)}`),l===226){r&&console.log("Found APP2 marker (0xffe2)");const u=c+4;if(o.getUint32(u)===1297106432){const h=u+4;let d;if(o.getUint16(h)===18761)d=!1;else if(o.getUint16(h)===19789)d=!0;else{s(new Error("No valid endianness marker found in TIFF header"));return}if(o.getUint16(h+2,!d)!==42){s(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=o.getUint32(h+4,!d);if(m<8){s(new Error("Not valid TIFF data! (First offset less than 8)"));return}const A=h+m,g=o.getUint16(A,!d),B=A+2;let C=0;for(let T=B;T<B+12*g;T+=12)o.getUint16(T,!d)===45057&&(C=o.getUint32(T+8,!d));const F=A+2+g*12+4,w=[];for(let T=F;T<F+C*16;T+=16){const M={MPType:o.getUint32(T,!d),size:o.getUint32(T+4,!d),dataOffset:o.getUint32(T+8,!d),dependantImages:o.getUint32(T+12,!d),start:-1,end:-1,isFII:!1};M.dataOffset?(M.start=h+M.dataOffset,M.isFII=!1):(M.start=0,M.isFII=!0),M.end=M.start+M.size,w.push(M)}if(this.options.extractNonFII&&w.length){const T=new Blob([o]),M=[];for(const P of w){if(P.isFII&&!this.options.extractFII)continue;const D=T.slice(P.start,P.end+1,"image/jpeg");M.push(D)}n(M)}}}c+=2+o.getUint16(c+2)}})}}const Kh=async t=>{const e=kh(t);if(!e)throw new La("Gain map XMP metadata not found");const s=await new Jh({extractFII:!0,extractNonFII:!0}).extract(t);if(s.length!==2)throw new Ga("Gain map recovery image not found");return{sdr:new Uint8Array(await s[0].arrayBuffer()),gainMap:new Uint8Array(await s[1].arrayBuffer()),metadata:e}},Qi=t=>new Promise((e,n)=>{const s=document.createElement("img");s.onload=()=>{e(s)},s.onerror=r=>{n(r)},s.src=URL.createObjectURL(t)});class _a extends kr{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new iu}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Nh({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new pt,sdr:new pt});return new Xr({width:16,height:16,type:He,colorSpace:gr,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,s,r){const o=r?new Blob([r],{type:"image/jpeg"}):void 0,i=new Blob([s],{type:"image/jpeg"});let c,a,l=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([o?Qi(o):Promise.resolve(void 0),Qi(i)]);a=d[0],c=d[1],l=!0}else{const d=await Promise.all([o?createImageBitmap(o,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(i,{imageOrientation:"flipY"})]);a=d[0],c=d[1]}const u=new pt(a||new ImageData(2,2),Es,ft,ft,Oe,Oi,Nn,Br,1,gr);u.flipY=l,u.needsUpdate=!0;const h=new pt(c,Es,ft,ft,Oe,Oi,Nn,Br,1,ou);h.flipY=l,h.needsUpdate=!0,e.width=c.width,e.height=c.height,e.material.gainMap=u,e.material.sdr=h,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Vh extends _a{load([e,n,s],r,o,i){const c=this.prepareQuadRenderer();let a,l,u;const h=async()=>{if(a&&l&&u){try{await this.render(c,u,a,l)}catch(S){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(s),typeof i=="function"&&i(S),c.disposeOnDemandRenderer();return}typeof r=="function"&&r(c),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(s),c.disposeOnDemandRenderer()}};let d=!0,m=0,A=0,g=!0,B=0,C=0,y=!0,F=0,w=0;const T=()=>{if(typeof o=="function"){const S=m+B+F,G=A+C+w,Q=d&&g&&y;o(new ProgressEvent("progress",{lengthComputable:Q,loaded:G,total:S}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(s);const M=new Tt(this._internalLoadingManager);M.setResponseType("arraybuffer"),M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(this.withCredentials),M.load(e,async S=>{if(typeof S=="string")throw new Error("Invalid sdr buffer");a=S,await h()},S=>{d=S.lengthComputable,A=S.loaded,m=S.total,T()},S=>{this.manager.itemError(e),typeof i=="function"&&i(S)});const P=new Tt(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(n,async S=>{if(typeof S=="string")throw new Error("Invalid gainmap buffer");l=S,await h()},S=>{g=S.lengthComputable,C=S.loaded,B=S.total,T()},S=>{this.manager.itemError(n),typeof i=="function"&&i(S)});const D=new Tt(this._internalLoadingManager);return D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(s,async S=>{if(typeof S!="string")throw new Error("Invalid metadata string");u=JSON.parse(S),await h()},S=>{y=S.lengthComputable,w=S.loaded,F=S.total,T()},S=>{this.manager.itemError(s),typeof i=="function"&&i(S)}),c}}class jh extends _a{load(e,n,s,r){const o=this.prepareQuadRenderer(),i=new Tt(this._internalLoadingManager);return i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setPath(this.path),i.setWithCredentials(this.withCredentials),this.manager.itemStart(e),i.load(e,async c=>{if(typeof c=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const a=new Uint8Array(c);let l,u,h;try{const d=await Kh(a);l=d.sdr,u=d.gainMap,h=d.metadata}catch(d){if(d instanceof La||d instanceof Ga)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},l=a;else throw d}try{await this.render(o,h,l,u)}catch(d){this.manager.itemError(e),typeof r=="function"&&r(d),o.disposeOnDemandRenderer();return}typeof n=="function"&&n(o),this.manager.itemEnd(e),o.disposeOnDemandRenderer()},s,c=>{this.manager.itemError(e),typeof r=="function"&&r(c)}),o}}const kn={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Oa="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",ln=t=>Array.isArray(t),Qr=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function ws({files:t=Qr,path:e="",preset:n=void 0,encoding:s=void 0,extensions:r}={}){let o=null,i=!1;n&&(Yr(n),t=kn[n],e=Oa),i=ln(t);const{extension:c,isCubemap:a}=Zr(t);if(o=Wr(c),!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);const l=Ae(m=>m.gl);b.useLayoutEffect(()=>{if(c!=="webp"&&c!=="jpg"&&c!=="jpeg")return;function m(){Vt.clear(o,i?[t]:t)}l.domElement.addEventListener("webglcontextlost",m,{once:!0})},[t,l.domElement]);const u=Vt(o,i?[t]:t,m=>{(c==="webp"||c==="jpg"||c==="jpeg")&&m.setRenderer(l),m.setPath==null||m.setPath(e),r&&r(m)});let h=i?u[0]:u;if(c==="jpg"||c==="jpeg"||c==="webp"){var d;h=(d=h.renderTarget)==null?void 0:d.texture}return h.mapping=a?cu:lu,"colorSpace"in h?h.colorSpace=s??a?"srgb":"srgb-linear":h.encoding=s??a?wh:Ih,h}const Xh={files:Qr,path:"",preset:void 0,extensions:void 0};ws.preload=t=>{const e={...Xh,...t};let{files:n,path:s=""}=e;const{preset:r,extensions:o}=e;r&&(Yr(r),n=kn[r],s=Oa);const{extension:i}=Zr(n);if(i==="webp"||i==="jpg"||i==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const c=Wr(i);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+n);Vt.preload(c,ln(n)?[n]:n,a=>{a.setPath==null||a.setPath(s),o&&o(a)})};const Qh={files:Qr,preset:void 0};ws.clear=t=>{const e={...Qh,...t};let{files:n}=e;const{preset:s}=e;s&&(Yr(s),n=kn[s]);const{extension:r}=Zr(n),o=Wr(r);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);Vt.clear(o,ln(n)?[n]:n)};function Yr(t){if(!(t in kn))throw new Error("Preset must be one of: "+Object.keys(kn).join(", "))}function Zr(t){var e;const n=ln(t)&&t.length===6,s=ln(t)&&t.length===3&&t.some(i=>i.endsWith("json")),r=ln(t)?t[0]:t;return{extension:n?"cube":s?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:s}}function Wr(t){return t==="cube"?uu:t==="hdr"?Eh:t==="exr"?Mh:t==="jpg"||t==="jpeg"?jh:t==="webp"?Vh:null}const Yh=t=>t.current&&t.current.isScene,Zh=t=>Yh(t)?t.current:t;function zr(t,e,n,s,r={}){var o,i,c,a;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const l=Zh(e||n),u=l.background,h=l.environment,d={backgroundBlurriness:l.backgroundBlurriness,backgroundIntensity:l.backgroundIntensity,backgroundRotation:(o=(i=l.backgroundRotation)==null||i.clone==null?void 0:i.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:l.environmentIntensity,environmentRotation:(c=(a=l.environmentRotation)==null||a.clone==null?void 0:a.clone())!==null&&c!==void 0?c:[0,0,0]};return t!=="only"&&(l.environment=s),t&&(l.background=s),Hi(l,r),()=>{t!=="only"&&(l.environment=h),t&&(l.background=u),Hi(l,d)}}function qr({scene:t,background:e=!1,map:n,...s}){const r=Ae(o=>o.scene);return b.useLayoutEffect(()=>{if(n)return zr(e,t,r,n,s)}),null}function Ha({background:t=!1,scene:e,blur:n,backgroundBlurriness:s,backgroundIntensity:r,backgroundRotation:o,environmentIntensity:i,environmentRotation:c,...a}){const l=ws(a),u=Ae(h=>h.scene);return b.useLayoutEffect(()=>zr(t,e,u,l,{backgroundBlurriness:n??s,backgroundIntensity:r,backgroundRotation:o,environmentIntensity:i,environmentRotation:c})),null}function Wh({children:t,near:e=.1,far:n=1e3,resolution:s=256,frames:r=1,map:o,background:i=!1,blur:c,backgroundBlurriness:a,backgroundIntensity:l,backgroundRotation:u,environmentIntensity:h,environmentRotation:d,scene:m,files:A,path:g,preset:B=void 0,extensions:C}){const y=Ae(D=>D.gl),F=Ae(D=>D.scene),w=b.useRef(null),[T]=b.useState(()=>new Ba),M=b.useMemo(()=>{const D=new hu(s);return D.texture.type=He,D},[s]);b.useLayoutEffect(()=>{if(r===1){const D=y.autoClear;y.autoClear=!0,w.current.update(y,T),y.autoClear=D}return zr(i,m,F,M.texture,{backgroundBlurriness:c??a,backgroundIntensity:l,backgroundRotation:u,environmentIntensity:h,environmentRotation:d})},[t,T,M.texture,m,F,i,r,y]);let P=1;return pn(()=>{if(r===1/0||P<r){const D=y.autoClear;y.autoClear=!0,w.current.update(y,T),y.autoClear=D,P++}}),b.createElement(b.Fragment,null,du(b.createElement(b.Fragment,null,t,b.createElement("cubeCamera",{ref:w,args:[e,n,M]}),A||B?b.createElement(Ha,{background:!0,files:A,preset:B,path:g,extensions:C}):o?b.createElement(qr,{background:!0,map:o,extensions:C}):null),T))}function zh(t){var e,n,s,r;const o=ws(t),i=t.map||o;b.useMemo(()=>va({GroundProjectedEnvImpl:Iu}),[]);const c=b.useMemo(()=>[i],[i]),a=(e=t.ground)==null?void 0:e.height,l=(n=t.ground)==null?void 0:n.radius,u=(s=(r=t.ground)==null?void 0:r.scale)!==null&&s!==void 0?s:1e3;return b.createElement(b.Fragment,null,b.createElement(qr,it({},t,{map:i})),b.createElement("groundProjectedEnvImpl",{args:c,scale:u,height:a,radius:l}))}function qh(t){return t.ground?b.createElement(zh,t):t.map?b.createElement(qr,t):t.children?b.createElement(Wh,t):b.createElement(Ha,t)}const $h=b.forwardRef(({scale:t=10,frames:e=1/0,opacity:n=1,width:s=1,height:r=1,blur:o=1,near:i=0,far:c=10,resolution:a=512,smooth:l=!0,color:u="#000000",depthWrite:h=!1,renderOrder:d,...m},A)=>{const g=b.useRef(null),B=Ae(K=>K.scene),C=Ae(K=>K.gl),y=b.useRef(null);s=s*(Array.isArray(t)?t[0]:t||1),r=r*(Array.isArray(t)?t[1]:t||1);const[F,w,T,M,P,D,S]=b.useMemo(()=>{const K=new jt(a,a),ne=new jt(a,a);ne.texture.generateMipmaps=K.texture.generateMipmaps=!1;const q=new Kr(s,r).rotateX(Math.PI/2),oe=new Qn(q),le=new fu;le.depthTest=le.depthWrite=!1,le.onBeforeCompile=Re=>{Re.uniforms={...Re.uniforms,ucolor:{value:new lt(u)}},Re.fragmentShader=Re.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Re.fragmentShader=Re.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Me=new un(Ch),se=new un(yh);return se.depthTest=Me.depthTest=!1,[K,q,le,oe,Me,se,ne]},[a,s,r,t,u]),G=K=>{M.visible=!0,M.material=P,P.uniforms.tDiffuse.value=F.texture,P.uniforms.h.value=K*1/256,C.setRenderTarget(S),C.render(M,y.current),M.material=D,D.uniforms.tDiffuse.value=S.texture,D.uniforms.v.value=K*1/256,C.setRenderTarget(F),C.render(M,y.current),M.visible=!1};let Q=0,z,W;return pn(()=>{y.current&&(e===1/0||Q<e)&&(Q++,z=B.background,W=B.overrideMaterial,g.current.visible=!1,B.background=null,B.overrideMaterial=T,C.setRenderTarget(F),C.render(B,y.current),G(o),l&&G(o*.4),C.setRenderTarget(null),g.current.visible=!0,B.overrideMaterial=W,B.background=z)}),b.useImperativeHandle(A,()=>g.current,[]),b.createElement("group",it({"rotation-x":Math.PI/2},m,{ref:g}),b.createElement("mesh",{renderOrder:d,geometry:w,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},b.createElement("meshBasicMaterial",{transparent:!0,map:F.texture,opacity:n,depthWrite:h})),b.createElement("orthographicCamera",{ref:y,args:[-s/2,s/2,r/2,-r/2,i,c]}))});function ed(t){return t.isLight}function td(t){return!!t.geometry}const Ua=b.createContext(null),nd=Fa({color:new lt,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${xa>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),sd=b.forwardRef(({children:t,temporal:e,frames:n=40,limit:s=1/0,blend:r=20,scale:o=10,opacity:i=1,alphaTest:c=.75,color:a="black",colorBlend:l=2,resolution:u=1024,toneMapped:h=!0,...d},m)=>{va({SoftShadowMaterial:nd});const A=Ae(M=>M.gl),g=Ae(M=>M.scene),B=Ae(M=>M.camera),C=Ae(M=>M.invalidate),y=b.useRef(null),F=b.useRef(null),[w]=b.useState(()=>new id(A,g,u));b.useLayoutEffect(()=>{w.configure(y.current)},[]);const T=b.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,n),blend:Math.max(2,n===1/0?r:n),count:0,getMesh:()=>y.current,reset:()=>{w.clear();const M=y.current.material;M.opacity=0,M.alphaTest=0,T.count=0},update:(M=1)=>{const P=y.current.material;T.temporal?(P.opacity=Math.min(i,P.opacity+i/T.blend),P.alphaTest=Math.min(c,P.alphaTest+c/T.blend)):(P.opacity=i,P.alphaTest=c),F.current.visible=!0,w.prepare();for(let D=0;D<M;D++)T.lights.forEach(S=>S.update()),w.update(B,T.blend);F.current.visible=!1,w.finish()}}),[w,B,g,e,n,r,i,c]);return b.useLayoutEffect(()=>{T.reset(),!T.temporal&&T.frames!==1/0&&T.update(T.blend)}),b.useImperativeHandle(m,()=>T,[T]),pn(()=>{(T.temporal||T.frames===1/0)&&T.count<T.frames&&T.count<s&&(C(),T.update(),T.count++)}),b.createElement("group",d,b.createElement("group",{traverse:()=>null,ref:F},b.createElement(Ua.Provider,{value:T},t)),b.createElement("mesh",{receiveShadow:!0,ref:y,scale:o,rotation:[-Math.PI/2,0,0]},b.createElement("planeGeometry",null),b.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:h,color:a,blend:l,map:w.progressiveLightMap2.texture})))}),rd=b.forwardRef(({castShadow:t=!0,bias:e=.001,mapSize:n=512,size:s=5,near:r=.5,far:o=500,frames:i=1,position:c=[0,0,0],radius:a=1,amount:l=8,intensity:u=xa>=155?Math.PI:1,ambient:h=.5,...d},m)=>{const A=b.useRef(null),g=new ee(...c).length(),B=b.useContext(Ua),C=b.useCallback(()=>{let F;if(A.current)for(let w=0;w<A.current.children.length;w++)if(F=A.current.children[w],Math.random()>h)F.position.set(c[0]+Gn.randFloatSpread(a),c[1]+Gn.randFloatSpread(a),c[2]+Gn.randFloatSpread(a));else{let T=Math.acos(2*Math.random()-1)-Math.PI/2,M=2*Math.PI*Math.random();F.position.set(Math.cos(T)*Math.cos(M)*g,Math.abs(Math.cos(T)*Math.sin(M)*g),Math.sin(T)*g)}},[a,h,g,...c]),y=b.useMemo(()=>({update:C}),[C]);return b.useImperativeHandle(m,()=>y,[y]),b.useLayoutEffect(()=>{var F;const w=A.current;return B&&((F=B.lights)==null||F.set(w.uuid,y)),()=>{var T;return void(B==null||(T=B.lights)==null?void 0:T.delete(w.uuid))}},[B,y]),b.createElement("group",it({ref:A},d),Array.from({length:l},(F,w)=>b.createElement("directionalLight",{key:w,castShadow:t,"shadow-bias":e,"shadow-mapSize":[n,n],intensity:u/l},b.createElement("orthographicCamera",{attach:"shadow-camera",args:[-s,s,s,-s,r,o]}))))});class id{constructor(e,n,s=1024){this.renderer=e,this.res=s,this.scene=n,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new lt,this.clearAlpha=0;const r={type:He,magFilter:Ar,minFilter:Ar};this.progressiveLightMap1=new jt(this.res,this.res,r),this.progressiveLightMap2=new jt(this.res,this.res,r),this.discardMat=new Sh,this.targetMat=new pu({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=o=>{o.vertexShader=`varying vec2 vUv;
`+o.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const i=o.fragmentShader.indexOf("void main() {");o.fragmentShader=`varying vec2 vUv;
`+o.fragmentShader.slice(0,i)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+o.fragmentShader.slice(i-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,o.uniforms.previousShadowMap=this.previousShadowMap,o.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{td(e)?this.meshes.push({object:e,material:e.material}):ed(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,n=100){if(!this.object)return;this.averagingWindow.value=n,this.object.material=this.targetMat;const s=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,o=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(s),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=o}}const od={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function ad({radius:t,adjustCamera:e}){const n=_h();return b.useEffect(()=>{e&&n.refresh().clip().fit()},[t,e]),null}function UA({children:t,center:e,adjustCamera:n=!0,intensity:s=.5,shadows:r="contact",environment:o="city",preset:i="rembrandt",...c}){var a,l,u,h,d,m,A,g;const B=typeof i=="string"?od[i]:i,[{radius:C,height:y},F]=b.useState({radius:0,width:0,height:0,depth:0}),w=(a=r==null?void 0:r.bias)!==null&&a!==void 0?a:-1e-4,T=(l=r==null?void 0:r.normalBias)!==null&&l!==void 0?l:0,M=(u=r==null?void 0:r.size)!==null&&u!==void 0?u:1024,P=(h=r==null?void 0:r.offset)!==null&&h!==void 0?h:0,D=r==="contact"||(r==null?void 0:r.type)==="contact",S=r==="accumulative"||(r==null?void 0:r.type)==="accumulative",G={...typeof r=="object"?r:{}},Q=o?typeof o=="string"?{preset:o}:o:null,z=b.useCallback(W=>{const{width:K,height:ne,depth:q,boundingSphere:oe}=W;F({radius:oe.radius,width:K,height:ne,depth:q}),e!=null&&e.onCentered&&e.onCentered(W)},[]);return b.createElement(b.Fragment,null,b.createElement("ambientLight",{intensity:s/3}),b.createElement("spotLight",{penumbra:1,position:[B.main[0]*C,B.main[1]*C,B.main[2]*C],intensity:s*2,castShadow:!!r,"shadow-bias":w,"shadow-normalBias":T,"shadow-mapSize":M}),b.createElement("pointLight",{position:[B.fill[0]*C,B.fill[1]*C,B.fill[2]*C],intensity:s}),b.createElement(Lh,it({fit:!!n,clip:!!n,margin:Number(n),observe:!0},c),b.createElement(ad,{radius:C,adjustCamera:n}),b.createElement(xh,it({},e,{position:[0,P/2,0],onCentered:z}),t)),b.createElement("group",{position:[0,-y/2-P/2,0]},D&&b.createElement($h,it({scale:C*4,far:C,blur:2},G)),S&&b.createElement(sd,it({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:C*4},G),b.createElement(rd,{amount:(d=G.amount)!==null&&d!==void 0?d:8,radius:(m=G.radius)!==null&&m!==void 0?m:C,ambient:(A=G.ambient)!==null&&A!==void 0?A:.5,intensity:(g=G.intensity)!==null&&g!==void 0?g:1,position:[B.main[0]*C,B.main[1]*C,B.main[2]*C],size:C*4,bias:-w,mapSize:M}))),o&&b.createElement(qh,Q))}const Na=b.createContext({});function cd(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const $r=b.createContext(null),ka=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ld(t=!0){const e=b.useContext($r);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,o=b.useId();b.useEffect(()=>{t&&r(o)},[t]);const i=b.useCallback(()=>t&&s&&s(o),[o,s,t]);return!n&&s?[!1,i]:[!0]}const ei=typeof window<"u",ud=ei?b.useLayoutEffect:b.useEffect,Je=t=>t;let Mr=Je;function ti(t){let e;return()=>(e===void 0&&(e=t()),e)}const hn=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},At=t=>t*1e3,gt=t=>t/1e3,hd={skipAnimations:!1,useManualTiming:!1};function dd(t){let e=new Set,n=new Set,s=!1,r=!1;const o=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function c(l){o.has(l)&&(a.schedule(l),t()),l(i)}const a={schedule:(l,u=!1,h=!1)=>{const m=h&&s?e:n;return u&&o.add(l),m.has(l)||m.add(l),l},cancel:l=>{n.delete(l),o.delete(l)},process:l=>{if(i=l,s){r=!0;return}s=!0,[e,n]=[n,e],e.forEach(c),e.clear(),s=!1,r&&(r=!1,a.process(l))}};return a}const ms=["read","resolveKeyframes","update","preRender","render","postRender"],fd=40;function Ja(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,i=ms.reduce((C,y)=>(C[y]=dd(o),C),{}),{read:c,resolveKeyframes:a,update:l,preRender:u,render:h,postRender:d}=i,m=()=>{const C=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(C-r.timestamp,fd),1),r.timestamp=C,r.isProcessing=!0,c.process(r),a.process(r),l.process(r),u.process(r),h.process(r),d.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(m))},A=()=>{n=!0,s=!0,r.isProcessing||t(m)};return{schedule:ms.reduce((C,y)=>{const F=i[y];return C[y]=(w,T=!1,M=!1)=>(n||A(),F.schedule(w,T,M)),C},{}),cancel:C=>{for(let y=0;y<ms.length;y++)i[ms[y]].cancel(C)},state:r,steps:i}}const{schedule:ve,cancel:bt,state:we,steps:er}=Ja(typeof requestAnimationFrame<"u"?requestAnimationFrame:Je,!0),Ka=b.createContext({strict:!1}),Yi={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dn={};for(const t in Yi)dn[t]={isEnabled:e=>Yi[t].some(n=>!!e[n])};function pd(t){for(const e in t)dn[e]={...dn[e],...t[e]}}const md=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ts(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||md.has(t)}let Va=t=>!Ts(t);function Ad(t){t&&(Va=e=>e.startsWith("on")?!Ts(e):t(e))}try{Ad(require("@emotion/is-prop-valid").default)}catch{}function gd(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(Va(r)||n===!0&&Ts(r)||!e&&!Ts(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}function Bd(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Ss=b.createContext({});function Jn(t){return typeof t=="string"||Array.isArray(t)}function Ps(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ni=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],si=["initial",...ni];function Gs(t){return Ps(t.animate)||si.some(e=>Jn(t[e]))}function ja(t){return!!(Gs(t)||t.variants)}function vd(t,e){if(Gs(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Jn(n)?n:void 0,animate:Jn(s)?s:void 0}}return t.inherit!==!1?e:{}}function Cd(t){const{initial:e,animate:n}=vd(t,b.useContext(Ss));return b.useMemo(()=>({initial:e,animate:n}),[Zi(e),Zi(n)])}function Zi(t){return Array.isArray(t)?t.join(" "):t}const yd=Symbol.for("motionComponentSymbol");function nn(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ed(t,e,n){return b.useCallback(s=>{s&&t.mount&&t.mount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):nn(n)&&(n.current=s))},[e])}const ri=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Md="framerAppearId",Xa="data-"+ri(Md),{schedule:ii,cancel:NA}=Ja(queueMicrotask,!1),Qa=b.createContext({});function Td(t,e,n,s,r){var o,i;const{visualElement:c}=b.useContext(Ss),a=b.useContext(Ka),l=b.useContext($r),u=b.useContext(ka).reducedMotion,h=b.useRef(null);s=s||a.renderer,!h.current&&s&&(h.current=s(t,{visualState:e,parent:c,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const d=h.current,m=b.useContext(Qa);d&&!d.projection&&r&&(d.type==="html"||d.type==="svg")&&bd(h.current,n,r,m);const A=b.useRef(!1);b.useInsertionEffect(()=>{d&&A.current&&d.update(n,l)});const g=n[Xa],B=b.useRef(!!g&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,g))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,g)));return ud(()=>{d&&(A.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),ii.render(d.render),B.current&&d.animationState&&d.animationState.animateChanges())}),b.useEffect(()=>{d&&(!B.current&&d.animationState&&d.animationState.animateChanges(),B.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)===null||C===void 0||C.call(window,g)}),B.current=!1))}),d}function bd(t,e,n,s){const{layoutId:r,layout:o,drag:i,dragConstraints:c,layoutScroll:a,layoutRoot:l}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Ya(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!i||c&&nn(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:a,layoutRoot:l})}function Ya(t){if(t)return t.options.allowProjection!==!1?t.projection:Ya(t.parent)}function Dd({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:r}){var o,i;t&&pd(t);function c(l,u){let h;const d={...b.useContext(ka),...l,layoutId:Rd(l)},{isStatic:m}=d,A=Cd(l),g=s(l,m);if(!m&&ei){Fd();const B=xd(d);h=B.MeasureLayout,A.visualElement=Td(r,g,d,e,B.ProjectionNode)}return fr.jsxs(Ss.Provider,{value:A,children:[h&&A.visualElement?fr.jsx(h,{visualElement:A.visualElement,...d}):null,n(r,l,Ed(g,A.visualElement,u),g,m,A.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(i=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&i!==void 0?i:""})`}`;const a=b.forwardRef(c);return a[yd]=r,a}function Rd({layoutId:t}){const e=b.useContext(Na).id;return e&&t!==void 0?e+"-"+t:t}function Fd(t,e){b.useContext(Ka).strict}function xd(t){const{drag:e,layout:n}=dn;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const Id=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oi(t){return typeof t!="string"||t.includes("-")?!1:!!(Id.indexOf(t)>-1||/[A-Z]/u.test(t))}function Za(t,{style:e,vars:n},s,r){Object.assign(t.style,e,r&&r.getProjectionStyles(s));for(const o in n)t.style.setProperty(o,n[o])}const Wa=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function za(t,e,n,s){Za(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(Wa.has(r)?r:ri(r),e.attrs[r])}const Ge=t=>!!(t&&t.getVelocity),mn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],An=new Set(mn),bs={};function wd(t){Object.assign(bs,t)}function qa(t,{layout:e,layoutId:n}){return An.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bs[t]||t==="opacity")}function ai(t,e,n){var s;const{style:r}=t,o={};for(const i in r)(Ge(r[i])||e.style&&Ge(e.style[i])||qa(i,t)||((s=n==null?void 0:n.getValue(i))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[i]=r[i]);return o}function $a(t,e,n){const s=ai(t,e,n);for(const r in t)if(Ge(t[r])||Ge(e[r])){const o=mn.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[o]=t[r]}return s}function Wi(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function ci(t,e,n,s){if(typeof e=="function"){const[r,o]=Wi(s);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=Wi(s);e=e(n!==void 0?n:t.custom,r,o)}return e}const Tr=t=>Array.isArray(t),Sd=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Pd=t=>Tr(t)?t[t.length-1]||0:t;function vs(t){const e=Ge(t)?t.get():t;return Sd(e)?e.toValue():e}function Gd({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},s,r,o){const i={latestValues:Ld(s,r,o,t),renderState:e()};return n&&(i.mount=c=>n(s,c,i)),i}const ec=t=>(e,n)=>{const s=b.useContext(Ss),r=b.useContext($r),o=()=>Gd(t,e,s,r);return n?o():cd(o)};function Ld(t,e,n,s){const r={},o=s(t,{});for(const d in o)r[d]=vs(o[d]);let{initial:i,animate:c}=t;const a=Gs(t),l=ja(t);e&&l&&!a&&t.inherit!==!1&&(i===void 0&&(i=e.initial),c===void 0&&(c=e.animate));let u=n?n.initial===!1:!1;u=u||i===!1;const h=u?c:i;if(h&&typeof h!="boolean"&&!Ps(h)){const d=Array.isArray(h)?h:[h];for(let m=0;m<d.length;m++){const A=ci(t,d[m]);if(A){const{transitionEnd:g,transition:B,...C}=A;for(const y in C){let F=C[y];if(Array.isArray(F)){const w=u?F.length-1:0;F=F[w]}F!==null&&(r[y]=F)}for(const y in g)r[y]=g[y]}}}return r}const li=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),tc=()=>({...li(),attrs:{}}),nc=t=>e=>typeof e=="string"&&e.startsWith(t),sc=nc("--"),_d=nc("var(--"),ui=t=>_d(t)?Od.test(t.split("/*")[0].trim()):!1,Od=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rc=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Bt=(t,e,n)=>n>e?e:n<t?t:n,gn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kn={...gn,transform:t=>Bt(0,1,t)},As={...gn,default:1},Zn=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Et=Zn("deg"),at=Zn("%"),Z=Zn("px"),Hd=Zn("vh"),Ud=Zn("vw"),zi={...at,parse:t=>at.parse(t)/100,transform:t=>at.transform(t*100)},Nd={borderWidth:Z,borderTopWidth:Z,borderRightWidth:Z,borderBottomWidth:Z,borderLeftWidth:Z,borderRadius:Z,radius:Z,borderTopLeftRadius:Z,borderTopRightRadius:Z,borderBottomRightRadius:Z,borderBottomLeftRadius:Z,width:Z,maxWidth:Z,height:Z,maxHeight:Z,top:Z,right:Z,bottom:Z,left:Z,padding:Z,paddingTop:Z,paddingRight:Z,paddingBottom:Z,paddingLeft:Z,margin:Z,marginTop:Z,marginRight:Z,marginBottom:Z,marginLeft:Z,backgroundPositionX:Z,backgroundPositionY:Z},kd={rotate:Et,rotateX:Et,rotateY:Et,rotateZ:Et,scale:As,scaleX:As,scaleY:As,scaleZ:As,skew:Et,skewX:Et,skewY:Et,distance:Z,translateX:Z,translateY:Z,translateZ:Z,x:Z,y:Z,z:Z,perspective:Z,transformPerspective:Z,opacity:Kn,originX:zi,originY:zi,originZ:Z},qi={...gn,transform:Math.round},hi={...Nd,...kd,zIndex:qi,size:Z,fillOpacity:Kn,strokeOpacity:Kn,numOctaves:qi},Jd={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Kd=mn.length;function Vd(t,e,n){let s="",r=!0;for(let o=0;o<Kd;o++){const i=mn[o],c=t[i];if(c===void 0)continue;let a=!0;if(typeof c=="number"?a=c===(i.startsWith("scale")?1:0):a=parseFloat(c)===0,!a||n){const l=rc(c,hi[i]);if(!a){r=!1;const u=Jd[i]||i;s+=`${u}(${l}) `}n&&(e[i]=l)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function di(t,e,n){const{style:s,vars:r,transformOrigin:o}=t;let i=!1,c=!1;for(const a in e){const l=e[a];if(An.has(a)){i=!0;continue}else if(sc(a)){r[a]=l;continue}else{const u=rc(l,hi[a]);a.startsWith("origin")?(c=!0,o[a]=u):s[a]=u}}if(e.transform||(i||n?s.transform=Vd(e,t.transform,n):s.transform&&(s.transform="none")),c){const{originX:a="50%",originY:l="50%",originZ:u=0}=o;s.transformOrigin=`${a} ${l} ${u}`}}function $i(t,e,n){return typeof t=="string"?t:Z.transform(e+n*t)}function jd(t,e,n){const s=$i(e,t.x,t.width),r=$i(n,t.y,t.height);return`${s} ${r}`}const Xd={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qd={offset:"strokeDashoffset",array:"strokeDasharray"};function Yd(t,e,n=1,s=0,r=!0){t.pathLength=1;const o=r?Xd:Qd;t[o.offset]=Z.transform(-s);const i=Z.transform(e),c=Z.transform(n);t[o.array]=`${i} ${c}`}function fi(t,{attrX:e,attrY:n,attrScale:s,originX:r,originY:o,pathLength:i,pathSpacing:c=1,pathOffset:a=0,...l},u,h){if(di(t,l,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:m,dimensions:A}=t;d.transform&&(A&&(m.transform=d.transform),delete d.transform),A&&(r!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=jd(A,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),s!==void 0&&(d.scale=s),i!==void 0&&Yd(d,i,c,a,!1)}const pi=t=>typeof t=="string"&&t.toLowerCase()==="svg",Zd={useVisualState:ec({scrapeMotionValuesFromProps:$a,createRenderState:tc,onMount:(t,e,{renderState:n,latestValues:s})=>{ve.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ve.render(()=>{fi(n,s,pi(e.tagName),t.transformTemplate),za(e,n)})}})},Wd={useVisualState:ec({scrapeMotionValuesFromProps:ai,createRenderState:li})};function ic(t,e,n){for(const s in e)!Ge(e[s])&&!qa(s,n)&&(t[s]=e[s])}function zd({transformTemplate:t},e){return b.useMemo(()=>{const n=li();return di(n,e,t),Object.assign({},n.vars,n.style)},[e])}function qd(t,e){const n=t.style||{},s={};return ic(s,n,t),Object.assign(s,zd(t,e)),s}function $d(t,e){const n={},s=qd(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}function ef(t,e,n,s){const r=b.useMemo(()=>{const o=tc();return fi(o,e,pi(s),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};ic(o,t.style,t),r.style={...o,...r.style}}return r}function tf(t=!1){return(n,s,r,{latestValues:o},i)=>{const a=(oi(n)?ef:$d)(s,o,i,n),l=gd(s,typeof n=="string",t),u=n!==b.Fragment?{...l,...a,ref:r}:{},{children:h}=s,d=b.useMemo(()=>Ge(h)?h.get():h,[h]);return b.createElement(n,{...u,children:d})}}function nf(t,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const i={...oi(s)?Zd:Wd,preloadedFeatures:t,useRender:tf(r),createVisualElement:e,Component:s};return Dd(i)}}function oc(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function Ls(t,e,n){const s=t.getProps();return ci(s,e,n!==void 0?n:s.custom,t)}const sf=ti(()=>window.ScrollTimeline!==void 0);class rf{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(r=>{if(sf()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{s.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class of extends rf{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function mi(t,e){return t?t[e]||t.default||t:void 0}const br=2e4;function ac(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<br;)e+=n,s=t.next(e);return e>=br?1/0:e}function Ai(t){return typeof t=="function"}function eo(t,e){t.timeline=e,t.onfinish=null}const gi=t=>Array.isArray(t)&&typeof t[0]=="number",af={linearEasing:void 0};function cf(t,e){const n=ti(t);return()=>{var s;return(s=af[e])!==null&&s!==void 0?s:n()}}const Ds=cf(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cc=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)s+=t(hn(0,r-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function lc(t){return!!(typeof t=="function"&&Ds()||!t||typeof t=="string"&&(t in Dr||Ds())||gi(t)||Array.isArray(t)&&t.every(lc))}const Fn=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Dr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fn([0,.65,.55,1]),circOut:Fn([.55,0,1,.45]),backIn:Fn([.31,.01,.66,-.59]),backOut:Fn([.33,1.53,.69,.99])};function uc(t,e){if(t)return typeof t=="function"&&Ds()?cc(t,e):gi(t)?Fn(t):Array.isArray(t)?t.map(n=>uc(n,e)||Dr.easeOut):Dr[t]}const nt={x:!1,y:!1};function hc(){return nt.x||nt.y}function dc(t,e,n){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(s=void 0)!==null&&s!==void 0?s:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function fc(t,e){const n=dc(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function to(t){return e=>{e.pointerType==="touch"||hc()||t(e)}}function lf(t,e,n={}){const[s,r,o]=fc(t,n),i=to(c=>{const{target:a}=c,l=e(c);if(typeof l!="function"||!a)return;const u=to(h=>{l(h),a.removeEventListener("pointerleave",u)});a.addEventListener("pointerleave",u,r)});return s.forEach(c=>{c.addEventListener("pointerenter",i,r)}),o}const pc=(t,e)=>e?t===e?!0:pc(t,e.parentElement):!1,Bi=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,uf=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hf(t){return uf.has(t.tagName)||t.tabIndex!==-1}const xn=new WeakSet;function no(t){return e=>{e.key==="Enter"&&t(e)}}function tr(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const df=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=no(()=>{if(xn.has(n))return;tr(n,"down");const r=no(()=>{tr(n,"up")}),o=()=>tr(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function so(t){return Bi(t)&&!hc()}function ff(t,e,n={}){const[s,r,o]=fc(t,n),i=c=>{const a=c.currentTarget;if(!so(c)||xn.has(a))return;xn.add(a);const l=e(c),u=(m,A)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),!(!so(m)||!xn.has(a))&&(xn.delete(a),typeof l=="function"&&l(m,{success:A}))},h=m=>{u(m,n.useGlobalTarget||pc(a,m.target))},d=m=>{u(m,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",d,r)};return s.forEach(c=>{!hf(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",i,r),c.addEventListener("focus",l=>df(l,r),r)}),o}function pf(t){return t==="x"||t==="y"?nt[t]?null:(nt[t]=!0,()=>{nt[t]=!1}):nt.x||nt.y?null:(nt.x=nt.y=!0,()=>{nt.x=nt.y=!1})}const mc=new Set(["width","height","top","left","right","bottom",...mn]);let Cs;function mf(){Cs=void 0}const ct={now:()=>(Cs===void 0&&ct.set(we.isProcessing||hd.useManualTiming?we.timestamp:performance.now()),Cs),set:t=>{Cs=t,queueMicrotask(mf)}};function vi(t,e){t.indexOf(e)===-1&&t.push(e)}function Ci(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class yi{constructor(){this.subscriptions=[]}add(e){return vi(this.subscriptions,e),()=>Ci(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let o=0;o<r;o++){const i=this.subscriptions[o];i&&i(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Ac(t,e){return e?t*(1e3/e):0}const ro=30,Af=t=>!isNaN(parseFloat(t));class gf{constructor(e,n={}){this.version="11.17.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const o=ct.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ct.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Af(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new yi);const s=this.events[e].add(n);return e==="change"?()=>{s(),ve.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ct.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ro)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ro);return Ac(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vn(t,e){return new gf(t,e)}function Bf(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Vn(n))}function vf(t,e){const n=Ls(t,e);let{transitionEnd:s={},transition:r={},...o}=n||{};o={...o,...s};for(const i in o){const c=Pd(o[i]);Bf(t,i,c)}}function Cf(t){return!!(Ge(t)&&t.add)}function Rr(t,e){const n=t.getValue("willChange");if(Cf(n))return n.add(e)}function gc(t){return t.props[Xa]}const Bc=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yf=1e-7,Ef=12;function Mf(t,e,n,s,r){let o,i,c=0;do i=e+(n-e)/2,o=Bc(i,s,r)-t,o>0?n=i:e=i;while(Math.abs(o)>yf&&++c<Ef);return i}function Wn(t,e,n,s){if(t===e&&n===s)return Je;const r=o=>Mf(o,0,1,t,n);return o=>o===0||o===1?o:Bc(r(o),e,s)}const vc=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Cc=t=>e=>1-t(1-e),yc=Wn(.33,1.53,.69,.99),Ei=Cc(yc),Ec=vc(Ei),Mc=t=>(t*=2)<1?.5*Ei(t):.5*(2-Math.pow(2,-10*(t-1))),Mi=t=>1-Math.sin(Math.acos(t)),Tc=Cc(Mi),bc=vc(Mi),Dc=t=>/^0[^.\s]+$/u.test(t);function Tf(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Dc(t):!0}const _n=t=>Math.round(t*1e5)/1e5,Ti=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bf(t){return t==null}const Df=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bi=(t,e)=>n=>!!(typeof n=="string"&&Df.test(n)&&n.startsWith(t)||e&&!bf(n)&&Object.prototype.hasOwnProperty.call(n,e)),Rc=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,o,i,c]=s.match(Ti);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(i),alpha:c!==void 0?parseFloat(c):1}},Rf=t=>Bt(0,255,t),nr={...gn,transform:t=>Math.round(Rf(t))},Nt={test:bi("rgb","red"),parse:Rc("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+nr.transform(t)+", "+nr.transform(e)+", "+nr.transform(n)+", "+_n(Kn.transform(s))+")"};function Ff(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const Fr={test:bi("#"),parse:Ff,transform:Nt.transform},sn={test:bi("hsl","hue"),parse:Rc("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+at.transform(_n(e))+", "+at.transform(_n(n))+", "+_n(Kn.transform(s))+")"},Pe={test:t=>Nt.test(t)||Fr.test(t)||sn.test(t),parse:t=>Nt.test(t)?Nt.parse(t):sn.test(t)?sn.parse(t):Fr.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Nt.transform(t):sn.transform(t)},xf=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function If(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ti))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(xf))===null||n===void 0?void 0:n.length)||0)>0}const Fc="number",xc="color",wf="var",Sf="var(",io="${}",Pf=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jn(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(Pf,a=>(Pe.test(a)?(s.color.push(o),r.push(xc),n.push(Pe.parse(a))):a.startsWith(Sf)?(s.var.push(o),r.push(wf),n.push(a)):(s.number.push(o),r.push(Fc),n.push(parseFloat(a))),++o,io)).split(io);return{values:n,split:c,indexes:s,types:r}}function Ic(t){return jn(t).values}function wc(t){const{split:e,types:n}=jn(t),s=e.length;return r=>{let o="";for(let i=0;i<s;i++)if(o+=e[i],r[i]!==void 0){const c=n[i];c===Fc?o+=_n(r[i]):c===xc?o+=Pe.transform(r[i]):o+=r[i]}return o}}const Gf=t=>typeof t=="number"?0:t;function Lf(t){const e=Ic(t);return wc(t)(e.map(Gf))}const Dt={test:If,parse:Ic,createTransformer:wc,getAnimatableNone:Lf},_f=new Set(["brightness","contrast","saturate","opacity"]);function Of(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(Ti)||[];if(!s)return t;const r=n.replace(s,"");let o=_f.has(e)?1:0;return s!==n&&(o*=100),e+"("+o+r+")"}const Hf=/\b([a-z-]*)\(.*?\)/gu,xr={...Dt,getAnimatableNone:t=>{const e=t.match(Hf);return e?e.map(Of).join(" "):t}},Uf={...hi,color:Pe,backgroundColor:Pe,outlineColor:Pe,fill:Pe,stroke:Pe,borderColor:Pe,borderTopColor:Pe,borderRightColor:Pe,borderBottomColor:Pe,borderLeftColor:Pe,filter:xr,WebkitFilter:xr},Di=t=>Uf[t];function Sc(t,e){let n=Di(t);return n!==xr&&(n=Dt),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Nf=new Set(["auto","none","0"]);function kf(t,e,n){let s=0,r;for(;s<t.length&&!r;){const o=t[s];typeof o=="string"&&!Nf.has(o)&&jn(o).values.length&&(r=t[s]),s++}if(r&&n)for(const o of e)t[o]=Sc(n,r)}const oo=t=>t===gn||t===Z,ao=(t,e)=>parseFloat(t.split(", ")[e]),co=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/u);if(r)return ao(r[1],e);{const o=s.match(/^matrix\((.+)\)$/u);return o?ao(o[1],t):0}},Jf=new Set(["x","y","z"]),Kf=mn.filter(t=>!Jf.has(t));function Vf(t){const e=[];return Kf.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const fn={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:co(4,13),y:co(5,14)};fn.translateX=fn.x;fn.translateY=fn.y;const Kt=new Set;let Ir=!1,wr=!1;function Pc(){if(wr){const t=Array.from(Kt).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=Vf(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([o,i])=>{var c;(c=s.getValue(o))===null||c===void 0||c.set(i)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}wr=!1,Ir=!1,Kt.forEach(t=>t.complete()),Kt.clear()}function Gc(){Kt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wr=!0)})}function jf(){Gc(),Pc()}class Ri{constructor(e,n,s,r,o,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=o,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Kt.add(this),Ir||(Ir=!0,ve.read(Gc),ve.resolveKeyframes(Pc))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const i=r==null?void 0:r.get(),c=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&n){const a=s.readValue(n,c);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=c),r&&i===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Kt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Kt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Lc=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Xf=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Qf(t){const e=Xf.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function _c(t,e,n=1){const[s,r]=Qf(t);if(!s)return;const o=window.getComputedStyle(e).getPropertyValue(s);if(o){const i=o.trim();return Lc(i)?parseFloat(i):i}return ui(r)?_c(r,e,n+1):r}const Oc=t=>e=>e.test(t),Yf={test:t=>t==="auto",parse:t=>t},Hc=[gn,Z,at,Et,Ud,Hd,Yf],lo=t=>Hc.find(Oc(t));class Uc extends Ri{constructor(e,n,s,r,o){super(e,n,s,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="string"&&(l=l.trim(),ui(l))){const u=_c(l,n.current);u!==void 0&&(e[a]=u),a===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!mc.has(s)||e.length!==2)return;const[r,o]=e,i=lo(r),c=lo(o);if(i!==c)if(oo(i)&&oo(c))for(let a=0;a<e.length;a++){const l=e[a];typeof l=="string"&&(e[a]=parseFloat(l))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)Tf(e[r])&&s.push(r);s.length&&kf(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fn[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(s);o&&o.jump(this.measuredOrigin,!1);const i=r.length-1,c=r[i];r[i]=fn[s](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([a,l])=>{n.getValue(a).set(l)}),this.resolveNoneKeyframes()}}const uo=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Dt.test(t)||t==="0")&&!t.startsWith("url("));function Zf(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Wf(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],i=uo(r,e),c=uo(o,e);return!i||!c?!1:Zf(t)||(n==="spring"||Ai(n))&&s}const zf=t=>t!==null;function _s(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(zf),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||s===void 0?r[o]:s}const qf=40;class Nc{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:i="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ct.now(),this.options={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:o,repeatType:i,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>qf?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&jf(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ct.now(),this.hasAttemptedResolve=!0;const{name:s,type:r,velocity:o,delay:i,onComplete:c,onUpdate:a,isGenerator:l}=this.options;if(!l&&!Wf(e,s,r,o))if(i)this.options.duration=0;else{a==null||a(_s(e,this.options,n)),c==null||c(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ee=(t,e,n)=>t+(e-t)*n;function sr(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $f({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,o=0,i=0;if(!e)r=o=i=n;else{const c=n<.5?n*(1+e):n+e-n*e,a=2*n-c;r=sr(a,c,t+1/3),o=sr(a,c,t),i=sr(a,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:s}}function Rs(t,e){return n=>n>0?e:t}const rr=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},ep=[Fr,Nt,sn],tp=t=>ep.find(e=>e.test(t));function ho(t){const e=tp(t);if(!e)return!1;let n=e.parse(t);return e===sn&&(n=$f(n)),n}const fo=(t,e)=>{const n=ho(t),s=ho(e);if(!n||!s)return Rs(t,e);const r={...n};return o=>(r.red=rr(n.red,s.red,o),r.green=rr(n.green,s.green,o),r.blue=rr(n.blue,s.blue,o),r.alpha=Ee(n.alpha,s.alpha,o),Nt.transform(r))},np=(t,e)=>n=>e(t(n)),zn=(...t)=>t.reduce(np),Sr=new Set(["none","hidden"]);function sp(t,e){return Sr.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function rp(t,e){return n=>Ee(t,e,n)}function Fi(t){return typeof t=="number"?rp:typeof t=="string"?ui(t)?Rs:Pe.test(t)?fo:ap:Array.isArray(t)?kc:typeof t=="object"?Pe.test(t)?fo:ip:Rs}function kc(t,e){const n=[...t],s=n.length,r=t.map((o,i)=>Fi(o)(o,e[i]));return o=>{for(let i=0;i<s;i++)n[i]=r[i](o);return n}}function ip(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=Fi(t[r])(t[r],e[r]));return r=>{for(const o in s)n[o]=s[o](r);return n}}function op(t,e){var n;const s=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const i=e.types[o],c=t.indexes[i][r[i]],a=(n=t.values[c])!==null&&n!==void 0?n:0;s[o]=a,r[i]++}return s}const ap=(t,e)=>{const n=Dt.createTransformer(e),s=jn(t),r=jn(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?Sr.has(t)&&!r.values.length||Sr.has(e)&&!s.values.length?sp(t,e):zn(kc(op(s,r),r.values),n):Rs(t,e)};function Jc(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ee(t,e,n):Fi(t)(t,e)}const cp=5;function Kc(t,e,n){const s=Math.max(e-cp,0);return Ac(n-t(s),e-s)}const Te={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ir=.001;function lp({duration:t=Te.duration,bounce:e=Te.bounce,velocity:n=Te.velocity,mass:s=Te.mass}){let r,o,i=1-e;i=Bt(Te.minDamping,Te.maxDamping,i),t=Bt(Te.minDuration,Te.maxDuration,gt(t)),i<1?(r=l=>{const u=l*i,h=u*t,d=u-n,m=Pr(l,i),A=Math.exp(-h);return ir-d/m*A},o=l=>{const h=l*i*t,d=h*n+n,m=Math.pow(i,2)*Math.pow(l,2)*t,A=Math.exp(-h),g=Pr(Math.pow(l,2),i);return(-r(l)+ir>0?-1:1)*((d-m)*A)/g}):(r=l=>{const u=Math.exp(-l*t),h=(l-n)*t+1;return-ir+u*h},o=l=>{const u=Math.exp(-l*t),h=(n-l)*(t*t);return u*h});const c=5/t,a=hp(r,o,c);if(t=At(t),isNaN(a))return{stiffness:Te.stiffness,damping:Te.damping,duration:t};{const l=Math.pow(a,2)*s;return{stiffness:l,damping:i*2*Math.sqrt(s*l),duration:t}}}const up=12;function hp(t,e,n){let s=n;for(let r=1;r<up;r++)s=s-t(s)/e(s);return s}function Pr(t,e){return t*Math.sqrt(1-e*e)}const dp=["duration","bounce"],fp=["stiffness","damping","mass"];function po(t,e){return e.some(n=>t[n]!==void 0)}function pp(t){let e={velocity:Te.velocity,stiffness:Te.stiffness,damping:Te.damping,mass:Te.mass,isResolvedFromDuration:!1,...t};if(!po(t,fp)&&po(t,dp))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,o=2*Bt(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Te.mass,stiffness:r,damping:o}}else{const n=lp(t);e={...e,...n,mass:Te.mass},e.isResolvedFromDuration=!0}return e}function Vc(t=Te.visualDuration,e=Te.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const o=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:a,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:m}=pp({...n,velocity:-gt(n.velocity||0)}),A=d||0,g=l/(2*Math.sqrt(a*u)),B=i-o,C=gt(Math.sqrt(a/u)),y=Math.abs(B)<5;s||(s=y?Te.restSpeed.granular:Te.restSpeed.default),r||(r=y?Te.restDelta.granular:Te.restDelta.default);let F;if(g<1){const T=Pr(C,g);F=M=>{const P=Math.exp(-g*C*M);return i-P*((A+g*C*B)/T*Math.sin(T*M)+B*Math.cos(T*M))}}else if(g===1)F=T=>i-Math.exp(-C*T)*(B+(A+C*B)*T);else{const T=C*Math.sqrt(g*g-1);F=M=>{const P=Math.exp(-g*C*M),D=Math.min(T*M,300);return i-P*((A+g*C*B)*Math.sinh(D)+T*B*Math.cosh(D))/T}}const w={calculatedDuration:m&&h||null,next:T=>{const M=F(T);if(m)c.done=T>=h;else{let P=0;g<1&&(P=T===0?At(A):Kc(F,T,M));const D=Math.abs(P)<=s,S=Math.abs(i-M)<=r;c.done=D&&S}return c.value=c.done?i:M,c},toString:()=>{const T=Math.min(ac(w),br),M=cc(P=>w.next(T*P).value,T,30);return T+"ms "+M}};return w}function mo({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:i,min:c,max:a,restDelta:l=.5,restSpeed:u}){const h=t[0],d={done:!1,value:h},m=D=>c!==void 0&&D<c||a!==void 0&&D>a,A=D=>c===void 0?a:a===void 0||Math.abs(c-D)<Math.abs(a-D)?c:a;let g=n*e;const B=h+g,C=i===void 0?B:i(B);C!==B&&(g=C-h);const y=D=>-g*Math.exp(-D/s),F=D=>C+y(D),w=D=>{const S=y(D),G=F(D);d.done=Math.abs(S)<=l,d.value=d.done?C:G};let T,M;const P=D=>{m(d.value)&&(T=D,M=Vc({keyframes:[d.value,A(d.value)],velocity:Kc(F,D,d.value),damping:r,stiffness:o,restDelta:l,restSpeed:u}))};return P(0),{calculatedDuration:null,next:D=>{let S=!1;return!M&&T===void 0&&(S=!0,w(D),P(D)),T!==void 0&&D>=T?M.next(D-T):(!S&&w(D),d)}}}const mp=Wn(.42,0,1,1),Ap=Wn(0,0,.58,1),jc=Wn(.42,0,.58,1),gp=t=>Array.isArray(t)&&typeof t[0]!="number",Ao={linear:Je,easeIn:mp,easeInOut:jc,easeOut:Ap,circIn:Mi,circInOut:bc,circOut:Tc,backIn:Ei,backInOut:Ec,backOut:yc,anticipate:Mc},go=t=>{if(gi(t)){Mr(t.length===4);const[e,n,s,r]=t;return Wn(e,n,s,r)}else if(typeof t=="string")return Mr(Ao[t]!==void 0),Ao[t];return t};function Bp(t,e,n){const s=[],r=n||Jc,o=t.length-1;for(let i=0;i<o;i++){let c=r(t[i],t[i+1]);if(e){const a=Array.isArray(e)?e[i]||Je:e;c=zn(a,c)}s.push(c)}return s}function vp(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const o=t.length;if(Mr(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=Bp(e,s,r),a=c.length,l=u=>{if(i&&u<t[0])return e[0];let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=hn(t[h],t[h+1],u);return c[h](d)};return n?u=>l(Bt(t[0],t[o-1],u)):l}function Cp(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=hn(0,e,s);t.push(Ee(n,1,r))}}function yp(t){const e=[0];return Cp(e,t.length-1),e}function Ep(t,e){return t.map(n=>n*e)}function Mp(t,e){return t.map(()=>e||jc).splice(0,t.length-1)}function Fs({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=gp(s)?s.map(go):go(s),o={done:!1,value:e[0]},i=Ep(n&&n.length===e.length?n:yp(e),t),c=vp(i,e,{ease:Array.isArray(r)?r:Mp(e,r)});return{calculatedDuration:t,next:a=>(o.value=c(a),o.done=a>=t,o)}}const Tp=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ve.update(e,!0),stop:()=>bt(e),now:()=>we.isProcessing?we.timestamp:ct.now()}},bp={decay:mo,inertia:mo,tween:Fs,keyframes:Fs,spring:Vc},Dp=t=>t/100;class xi extends Nc{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:n,motionValue:s,element:r,keyframes:o}=this.options,i=(r==null?void 0:r.KeyframeResolver)||Ri,c=(a,l)=>this.onKeyframesResolved(a,l);this.resolver=new i(o,c,n,s,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o,velocity:i=0}=this.options,c=Ai(n)?n:bp[n]||Fs;let a,l;c!==Fs&&typeof e[0]!="number"&&(a=zn(Dp,Jc(e[0],e[1])),e=[0,100]);const u=c({...this.options,keyframes:e});o==="mirror"&&(l=c({...this.options,keyframes:[...e].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=ac(u));const{calculatedDuration:h}=u,d=h+r,m=d*(s+1)-r;return{generator:u,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:h,resolvedDuration:d,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:D}=this.options;return{done:!0,value:D[D.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:i,mapPercentToKeyframes:c,keyframes:a,calculatedDuration:l,totalDuration:u,resolvedDuration:h}=s;if(this.startTime===null)return o.next(0);const{delay:d,repeat:m,repeatType:A,repeatDelay:g,onUpdate:B}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const C=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?C<0:C>u;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let F=this.currentTime,w=o;if(m){const D=Math.min(this.currentTime,u)/h;let S=Math.floor(D),G=D%1;!G&&D>=1&&(G=1),G===1&&S--,S=Math.min(S,m+1),!!(S%2)&&(A==="reverse"?(G=1-G,g&&(G-=g/h)):A==="mirror"&&(w=i)),F=Bt(0,1,G)*h}const T=y?{done:!1,value:a[0]}:w.next(F);c&&(T.value=c(T.value));let{done:M}=T;!y&&l!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return P&&r!==void 0&&(T.value=_s(a,this.options,r)),B&&B(T.value),P&&this.finish(),T}get duration(){const{resolved:e}=this;return e?gt(e.calculatedDuration):0}get time(){return gt(this.currentTime)}set time(e){e=At(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=gt(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Tp,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Rp=new Set(["opacity","clipPath","filter","transform"]);function Fp(t,e,n,{delay:s=0,duration:r=300,repeat:o=0,repeatType:i="loop",ease:c="easeInOut",times:a}={}){const l={[e]:n};a&&(l.offset=a);const u=uc(c,r);return Array.isArray(u)&&(l.easing=u),t.animate(l,{delay:s,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}const xp=ti(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xs=10,Ip=2e4;function wp(t){return Ai(t.type)||t.type==="spring"||!lc(t.ease)}function Sp(t,e){const n=new xi({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const r=[];let o=0;for(;!s.done&&o<Ip;)s=n.sample(o),r.push(s.value),o+=xs;return{times:void 0,keyframes:r,duration:o-xs,ease:"linear"}}const Xc={anticipate:Mc,backInOut:Ec,circInOut:bc};function Pp(t){return t in Xc}class Bo extends Nc{constructor(e){super(e);const{name:n,motionValue:s,element:r,keyframes:o}=this.options;this.resolver=new Uc(o,(i,c)=>this.onKeyframesResolved(i,c),n,s,r),this.resolver.scheduleResolve()}initPlayback(e,n){var s;let{duration:r=300,times:o,ease:i,type:c,motionValue:a,name:l,startTime:u}=this.options;if(!(!((s=a.owner)===null||s===void 0)&&s.current))return!1;if(typeof i=="string"&&Ds()&&Pp(i)&&(i=Xc[i]),wp(this.options)){const{onComplete:d,onUpdate:m,motionValue:A,element:g,...B}=this.options,C=Sp(e,B);e=C.keyframes,e.length===1&&(e[1]=e[0]),r=C.duration,o=C.times,i=C.ease,c="keyframes"}const h=Fp(a.owner.current,l,e,{...this.options,duration:r,times:o,ease:i});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(eo(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;a.set(_s(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:o,type:c,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return gt(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return gt(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=At(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Je;const{animation:s}=n;eo(s,e)}return Je}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:r,type:o,ease:i,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:l,onUpdate:u,onComplete:h,element:d,...m}=this.options,A=new xi({...m,keyframes:s,duration:r,type:o,ease:i,times:c,isGenerator:!0}),g=At(this.time);l.setWithVelocity(A.sample(g-xs).value,A.sample(g).value,xs)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:r,repeatType:o,damping:i,type:c}=e;return xp()&&s&&Rp.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!r&&o!=="mirror"&&i!==0&&c!=="inertia"}}const Gp={type:"spring",stiffness:500,damping:25,restSpeed:10},Lp=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_p={type:"keyframes",duration:.8},Op={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Hp=(t,{keyframes:e})=>e.length>2?_p:An.has(t)?t.startsWith("scale")?Lp(e[1]):Gp:Op;function Up({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:o,repeatType:i,repeatDelay:c,from:a,elapsed:l,...u}){return!!Object.keys(u).length}const Ii=(t,e,n,s={},r,o)=>i=>{const c=mi(s,t)||{},a=c.delay||s.delay||0;let{elapsed:l=0}=s;l=l-At(a);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-l,onUpdate:d=>{e.set(d),c.onUpdate&&c.onUpdate(d)},onComplete:()=>{i(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};Up(c)||(u={...u,...Hp(t,u)}),u.duration&&(u.duration=At(u.duration)),u.repeatDelay&&(u.repeatDelay=At(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!o&&e.get()!==void 0){const d=_s(u.keyframes,c);if(d!==void 0)return ve.update(()=>{u.onUpdate(d),u.onComplete()}),new of([])}return!o&&Bo.supports(u)?new Bo(u):new xi(u)};function Np({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Qc(t,e,{delay:n=0,transitionOverride:s,type:r}={}){var o;let{transition:i=t.getDefaultTransition(),transitionEnd:c,...a}=e;s&&(i=s);const l=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const h in a){const d=t.getValue(h,(o=t.latestValues[h])!==null&&o!==void 0?o:null),m=a[h];if(m===void 0||u&&Np(u,h))continue;const A={delay:n,...mi(i||{},h)};let g=!1;if(window.MotionHandoffAnimation){const C=gc(t);if(C){const y=window.MotionHandoffAnimation(C,h,ve);y!==null&&(A.startTime=y,g=!0)}}Rr(t,h),d.start(Ii(h,d,m,t.shouldReduceMotion&&mc.has(h)?{type:!1}:A,t,g));const B=d.animation;B&&l.push(B)}return c&&Promise.all(l).then(()=>{ve.update(()=>{c&&vf(t,c)})}),l}function Gr(t,e,n={}){var s;const r=Ls(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const i=r?()=>Promise.all(Qc(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=o;return kp(t,e,u+l,h,d,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[l,u]=a==="beforeChildren"?[i,c]:[c,i];return l().then(()=>u())}else return Promise.all([i(),c(n.delay)])}function kp(t,e,n=0,s=0,r=1,o){const i=[],c=(t.variantChildren.size-1)*s,a=r===1?(l=0)=>l*s:(l=0)=>c-l*s;return Array.from(t.variantChildren).sort(Jp).forEach((l,u)=>{l.notify("AnimationStart",e),i.push(Gr(l,e,{...o,delay:n+a(u)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(i)}function Jp(t,e){return t.sortNodePosition(e)}function Kp(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(o=>Gr(t,o,n));s=Promise.all(r)}else if(typeof e=="string")s=Gr(t,e,n);else{const r=typeof e=="function"?Ls(t,e,n.custom):e;s=Promise.all(Qc(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const Vp=si.length;function Yc(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Yc(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Vp;n++){const s=si[n],r=t.props[s];(Jn(r)||r===!1)&&(e[s]=r)}return e}const jp=[...ni].reverse(),Xp=ni.length;function Qp(t){return e=>Promise.all(e.map(({animation:n,options:s})=>Kp(t,n,s)))}function Yp(t){let e=Qp(t),n=vo(),s=!0;const r=a=>(l,u)=>{var h;const d=Ls(t,u,a==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(d){const{transition:m,transitionEnd:A,...g}=d;l={...l,...g,...A}}return l};function o(a){e=a(t)}function i(a){const{props:l}=t,u=Yc(t.parent)||{},h=[],d=new Set;let m={},A=1/0;for(let B=0;B<Xp;B++){const C=jp[B],y=n[C],F=l[C]!==void 0?l[C]:u[C],w=Jn(F),T=C===a?y.isActive:null;T===!1&&(A=B);let M=F===u[C]&&F!==l[C]&&w;if(M&&s&&t.manuallyAnimateOnMount&&(M=!1),y.protectedKeys={...m},!y.isActive&&T===null||!F&&!y.prevProp||Ps(F)||typeof F=="boolean")continue;const P=Zp(y.prevProp,F);let D=P||C===a&&y.isActive&&!M&&w||B>A&&w,S=!1;const G=Array.isArray(F)?F:[F];let Q=G.reduce(r(C),{});T===!1&&(Q={});const{prevResolvedValues:z={}}=y,W={...z,...Q},K=oe=>{D=!0,d.has(oe)&&(S=!0,d.delete(oe)),y.needsAnimating[oe]=!0;const le=t.getValue(oe);le&&(le.liveStyle=!1)};for(const oe in W){const le=Q[oe],Me=z[oe];if(m.hasOwnProperty(oe))continue;let se=!1;Tr(le)&&Tr(Me)?se=!oc(le,Me):se=le!==Me,se?le!=null?K(oe):d.add(oe):le!==void 0&&d.has(oe)?K(oe):y.protectedKeys[oe]=!0}y.prevProp=F,y.prevResolvedValues=Q,y.isActive&&(m={...m,...Q}),s&&t.blockInitialAnimation&&(D=!1),D&&(!(M&&P)||S)&&h.push(...G.map(oe=>({animation:oe,options:{type:C}})))}if(d.size){const B={};d.forEach(C=>{const y=t.getBaseTarget(C),F=t.getValue(C);F&&(F.liveStyle=!0),B[C]=y??null}),h.push({animation:B})}let g=!!h.length;return s&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(g=!1),s=!1,g?e(h):Promise.resolve()}function c(a,l){var u;if(n[a].isActive===l)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(d=>{var m;return(m=d.animationState)===null||m===void 0?void 0:m.setActive(a,l)}),n[a].isActive=l;const h=i(a);for(const d in n)n[d].protectedKeys={};return h}return{animateChanges:i,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=vo(),s=!0}}}function Zp(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!oc(e,t):!1}function _t(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vo(){return{animate:_t(!0),whileInView:_t(),whileHover:_t(),whileTap:_t(),whileDrag:_t(),whileFocus:_t(),exit:_t()}}class Rt{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Wp extends Rt{constructor(e){super(e),e.animationState||(e.animationState=Yp(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ps(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let zp=0;class qp extends Rt{constructor(){super(...arguments),this.id=zp++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $p={animation:{Feature:Wp},exit:{Feature:qp}};function Xn(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function qn(t){return{point:{x:t.pageX,y:t.pageY}}}const em=t=>e=>Bi(e)&&t(e,qn(e));function On(t,e,n,s){return Xn(t,e,em(n),s)}const Co=(t,e)=>Math.abs(t-e);function tm(t,e){const n=Co(t.x,e.x),s=Co(t.y,e.y);return Math.sqrt(n**2+s**2)}class Zc{constructor(e,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ar(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,m=tm(h.offset,{x:0,y:0})>=3;if(!d&&!m)return;const{point:A}=h,{timestamp:g}=we;this.history.push({...A,timestamp:g});const{onStart:B,onMove:C}=this.handlers;d||(B&&B(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=or(d,this.transformPagePoint),ve.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:m,onSessionEnd:A,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=ar(h.type==="pointercancel"?this.lastMoveEventInfo:or(d,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,B),A&&A(h,B)},!Bi(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const i=qn(e),c=or(i,this.transformPagePoint),{point:a}=c,{timestamp:l}=we;this.history=[{...a,timestamp:l}];const{onSessionStart:u}=n;u&&u(e,ar(c,this.history)),this.removeListeners=zn(On(this.contextWindow,"pointermove",this.handlePointerMove),On(this.contextWindow,"pointerup",this.handlePointerUp),On(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bt(this.updatePoint)}}function or(t,e){return e?{point:e(t.point)}:t}function yo(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ar({point:t},e){return{point:t,delta:yo(t,Wc(e)),offset:yo(t,nm(e)),velocity:sm(e,.1)}}function nm(t){return t[0]}function Wc(t){return t[t.length-1]}function sm(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=Wc(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>At(e)));)n--;if(!s)return{x:0,y:0};const o=gt(r.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const i={x:(r.x-s.x)/o,y:(r.y-s.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}const zc=1e-4,rm=1-zc,im=1+zc,qc=.01,om=0-qc,am=0+qc;function Ke(t){return t.max-t.min}function cm(t,e,n){return Math.abs(t-e)<=n}function Eo(t,e,n,s=.5){t.origin=s,t.originPoint=Ee(e.min,e.max,t.origin),t.scale=Ke(n)/Ke(e),t.translate=Ee(n.min,n.max,t.origin)-t.originPoint,(t.scale>=rm&&t.scale<=im||isNaN(t.scale))&&(t.scale=1),(t.translate>=om&&t.translate<=am||isNaN(t.translate))&&(t.translate=0)}function Hn(t,e,n,s){Eo(t.x,e.x,n.x,s?s.originX:void 0),Eo(t.y,e.y,n.y,s?s.originY:void 0)}function Mo(t,e,n){t.min=n.min+e.min,t.max=t.min+Ke(e)}function lm(t,e,n){Mo(t.x,e.x,n.x),Mo(t.y,e.y,n.y)}function To(t,e,n){t.min=e.min-n.min,t.max=t.min+Ke(e)}function Un(t,e,n){To(t.x,e.x,n.x),To(t.y,e.y,n.y)}function um(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Ee(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Ee(n,t,s.max):Math.min(t,n)),t}function bo(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function hm(t,{top:e,left:n,bottom:s,right:r}){return{x:bo(t.x,n,r),y:bo(t.y,e,s)}}function Do(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function dm(t,e){return{x:Do(t.x,e.x),y:Do(t.y,e.y)}}function fm(t,e){let n=.5;const s=Ke(t),r=Ke(e);return r>s?n=hn(e.min,e.max-s,t.min):s>r&&(n=hn(t.min,t.max-r,e.min)),Bt(0,1,n)}function pm(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Lr=.35;function mm(t=Lr){return t===!1?t=0:t===!0&&(t=Lr),{x:Ro(t,"left","right"),y:Ro(t,"top","bottom")}}function Ro(t,e,n){return{min:Fo(t,e),max:Fo(t,n)}}function Fo(t,e){return typeof t=="number"?t:t[e]||0}const xo=()=>({translate:0,scale:1,origin:0,originPoint:0}),rn=()=>({x:xo(),y:xo()}),Io=()=>({min:0,max:0}),De=()=>({x:Io(),y:Io()});function Ye(t){return[t("x"),t("y")]}function $c({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function Am({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function gm(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function cr(t){return t===void 0||t===1}function _r({scale:t,scaleX:e,scaleY:n}){return!cr(t)||!cr(e)||!cr(n)}function Ot(t){return _r(t)||el(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function el(t){return wo(t.x)||wo(t.y)}function wo(t){return t&&t!=="0%"}function Is(t,e,n){const s=t-n,r=e*s;return n+r}function So(t,e,n,s,r){return r!==void 0&&(t=Is(t,r,s)),Is(t,n,s)+e}function Or(t,e=0,n=1,s,r){t.min=So(t.min,e,n,s,r),t.max=So(t.max,e,n,s,r)}function tl(t,{x:e,y:n}){Or(t.x,e.translate,e.scale,e.originPoint),Or(t.y,n.translate,n.scale,n.originPoint)}const Po=.999999999999,Go=1.0000000000001;function Bm(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,i;for(let c=0;c<r;c++){o=n[c],i=o.projectionDelta;const{visualElement:a}=o.options;a&&a.props.style&&a.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&an(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,tl(t,i)),s&&Ot(o.latestValues)&&an(t,o.latestValues))}e.x<Go&&e.x>Po&&(e.x=1),e.y<Go&&e.y>Po&&(e.y=1)}function on(t,e){t.min=t.min+e,t.max=t.max+e}function Lo(t,e,n,s,r=.5){const o=Ee(t.min,t.max,r);Or(t,e,n,o,s)}function an(t,e){Lo(t.x,e.x,e.scaleX,e.scale,e.originX),Lo(t.y,e.y,e.scaleY,e.scale,e.originY)}function nl(t,e){return $c(gm(t.getBoundingClientRect(),e))}function vm(t,e,n){const s=nl(t,n),{scroll:r}=e;return r&&(on(s.x,r.offset.x),on(s.y,r.offset.y)),s}const sl=({current:t})=>t?t.ownerDocument.defaultView:null,Cm=new WeakMap;class ym{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=De(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qn(u).point)},o=(u,h)=>{const{drag:d,dragPropagation:m,onDragStart:A}=this.getProps();if(d&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pf(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ye(B=>{let C=this.getAxisMotionValue(B).get()||0;if(at.test(C)){const{projection:y}=this.visualElement;if(y&&y.layout){const F=y.layout.layoutBox[B];F&&(C=Ke(F)*(parseFloat(C)/100))}}this.originPoint[B]=C}),A&&ve.postRender(()=>A(u,h)),Rr(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(u,h)=>{const{dragPropagation:d,dragDirectionLock:m,onDirectionLock:A,onDrag:g}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:B}=h;if(m&&this.currentDirection===null){this.currentDirection=Em(B),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",h.point,B),this.updateAxis("y",h.point,B),this.visualElement.render(),g&&g(u,h)},c=(u,h)=>this.stop(u,h),a=()=>Ye(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new Zc(e,{onSessionStart:r,onStart:o,onMove:i,onSessionEnd:c,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:sl(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&ve.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!gs(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let i=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(i=um(i,this.constraints[e],this.elastic[e])),o.set(i)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&nn(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=hm(r.layoutBox,n):this.constraints=!1,this.elastic=mm(s),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ye(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=pm(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nn(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=vm(s,r.root,this.visualElement.getTransformPagePoint());let i=dm(r.layout.layoutBox,o);if(n){const c=n(Am(i));this.hasMutatedConstraints=!!c,c&&(i=$c(c))}return i}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:c}=this.getProps(),a=this.constraints||{},l=Ye(u=>{if(!gs(u,n,this.currentDirection))return;let h=a&&a[u]||{};i&&(h={min:0,max:0});const d=r?200:1e6,m=r?40:1e7,A={type:"inertia",velocity:s?e[u]:0,bounceStiffness:d,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(u,A)});return Promise.all(l).then(c)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Rr(this.visualElement,e),s.start(Ii(e,s,0,n,this.visualElement,!1))}stopAnimation(){Ye(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ye(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Ye(n=>{const{drag:s}=this.getProps();if(!gs(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:i,max:c}=r.layout.layoutBox[n];o.set(e[n]-Ee(i,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!nn(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ye(i=>{const c=this.getAxisMotionValue(i);if(c&&this.constraints!==!1){const a=c.get();r[i]=fm({min:a,max:a},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ye(i=>{if(!gs(i,e,null))return;const c=this.getAxisMotionValue(i),{min:a,max:l}=this.constraints[i];c.set(Ee(a,l,r[i]))})}addListeners(){if(!this.visualElement.current)return;Cm.set(this.visualElement,this);const e=this.visualElement.current,n=On(e,"pointerdown",a=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(a)}),s=()=>{const{dragConstraints:a}=this.getProps();nn(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ve.read(s);const i=Xn(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",({delta:a,hasLayoutChanged:l})=>{this.isDragging&&l&&(Ye(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=a[u].translate,h.set(h.get()+a[u].translate))}),this.visualElement.render())});return()=>{i(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:i=Lr,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:o,dragElastic:i,dragMomentum:c}}}function gs(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Em(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Mm extends Rt{constructor(e){super(e),this.removeGroupControls=Je,this.removeListeners=Je,this.controls=new ym(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Je}unmount(){this.removeGroupControls(),this.removeListeners()}}const _o=t=>(e,n)=>{t&&ve.postRender(()=>t(e,n))};class Tm extends Rt{constructor(){super(...arguments),this.removePointerDownListener=Je}onPointerDown(e){this.session=new Zc(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sl(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:_o(e),onStart:_o(n),onMove:s,onEnd:(o,i)=>{delete this.session,r&&ve.postRender(()=>r(o,i))}}}mount(){this.removePointerDownListener=On(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ys={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Oo(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Rn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Z.test(t))t=parseFloat(t);else return t;const n=Oo(t,e.target.x),s=Oo(t,e.target.y);return`${n}% ${s}%`}},bm={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=Dt.parse(t);if(r.length>5)return s;const o=Dt.createTransformer(t),i=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,a=n.y.scale*e.y;r[0+i]/=c,r[1+i]/=a;const l=Ee(c,a,.5);return typeof r[2+i]=="number"&&(r[2+i]/=l),typeof r[3+i]=="number"&&(r[3+i]/=l),o(r)}};class Dm extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:o}=e;wd(Rm),o&&(n.group&&n.group.add(o),s&&s.register&&r&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ys.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:o}=this.props,i=s.projection;return i&&(i.isPresent=o,r||e.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?i.promote():i.relegate()||ve.postRender(()=>{const c=i.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ii.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function rl(t){const[e,n]=ld(),s=b.useContext(Na);return fr.jsx(Dm,{...t,layoutGroup:s,switchLayoutGroup:b.useContext(Qa),isPresent:e,safeToRemove:n})}const Rm={borderRadius:{...Rn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rn,borderTopRightRadius:Rn,borderBottomLeftRadius:Rn,borderBottomRightRadius:Rn,boxShadow:bm};function Fm(t,e,n){const s=Ge(t)?t:Vn(t);return s.start(Ii("",s,e,n)),s.animation}function xm(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Im=(t,e)=>t.depth-e.depth;class wm{constructor(){this.children=[],this.isDirty=!1}add(e){vi(this.children,e),this.isDirty=!0}remove(e){Ci(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Im),this.isDirty=!1,this.children.forEach(e)}}function Sm(t,e){const n=ct.now(),s=({timestamp:r})=>{const o=r-n;o>=e&&(bt(s),t(o-e))};return ve.read(s,!0),()=>bt(s)}const il=["TopLeft","TopRight","BottomLeft","BottomRight"],Pm=il.length,Ho=t=>typeof t=="string"?parseFloat(t):t,Uo=t=>typeof t=="number"||Z.test(t);function Gm(t,e,n,s,r,o){r?(t.opacity=Ee(0,n.opacity!==void 0?n.opacity:1,Lm(s)),t.opacityExit=Ee(e.opacity!==void 0?e.opacity:1,0,_m(s))):o&&(t.opacity=Ee(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let i=0;i<Pm;i++){const c=`border${il[i]}Radius`;let a=No(e,c),l=No(n,c);if(a===void 0&&l===void 0)continue;a||(a=0),l||(l=0),a===0||l===0||Uo(a)===Uo(l)?(t[c]=Math.max(Ee(Ho(a),Ho(l),s),0),(at.test(l)||at.test(a))&&(t[c]+="%")):t[c]=l}(e.rotate||n.rotate)&&(t.rotate=Ee(e.rotate||0,n.rotate||0,s))}function No(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Lm=ol(0,.5,Tc),_m=ol(.5,.95,Je);function ol(t,e,n){return s=>s<t?0:s>e?1:n(hn(t,e,s))}function ko(t,e){t.min=e.min,t.max=e.max}function Xe(t,e){ko(t.x,e.x),ko(t.y,e.y)}function Jo(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ko(t,e,n,s,r){return t-=e,t=Is(t,1/n,s),r!==void 0&&(t=Is(t,1/r,s)),t}function Om(t,e=0,n=1,s=.5,r,o=t,i=t){if(at.test(e)&&(e=parseFloat(e),e=Ee(i.min,i.max,e/100)-i.min),typeof e!="number")return;let c=Ee(o.min,o.max,s);t===o&&(c-=e),t.min=Ko(t.min,e,n,c,r),t.max=Ko(t.max,e,n,c,r)}function Vo(t,e,[n,s,r],o,i){Om(t,e[n],e[s],e[r],e.scale,o,i)}const Hm=["x","scaleX","originX"],Um=["y","scaleY","originY"];function jo(t,e,n,s){Vo(t.x,e,Hm,n?n.x:void 0,s?s.x:void 0),Vo(t.y,e,Um,n?n.y:void 0,s?s.y:void 0)}function Xo(t){return t.translate===0&&t.scale===1}function al(t){return Xo(t.x)&&Xo(t.y)}function Qo(t,e){return t.min===e.min&&t.max===e.max}function Nm(t,e){return Qo(t.x,e.x)&&Qo(t.y,e.y)}function Yo(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function cl(t,e){return Yo(t.x,e.x)&&Yo(t.y,e.y)}function Zo(t){return Ke(t.x)/Ke(t.y)}function Wo(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class km{constructor(){this.members=[]}add(e){vi(this.members,e),e.scheduleRender()}remove(e){if(Ci(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Jm(t,e,n){let s="";const r=t.x.translate/e.x,o=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((r||o||i)&&(s=`translate3d(${r}px, ${o}px, ${i}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:l,rotate:u,rotateX:h,rotateY:d,skewX:m,skewY:A}=n;l&&(s=`perspective(${l}px) ${s}`),u&&(s+=`rotate(${u}deg) `),h&&(s+=`rotateX(${h}deg) `),d&&(s+=`rotateY(${d}deg) `),m&&(s+=`skewX(${m}deg) `),A&&(s+=`skewY(${A}deg) `)}const c=t.x.scale*e.x,a=t.y.scale*e.y;return(c!==1||a!==1)&&(s+=`scale(${c}, ${a})`),s||"none"}const Ht={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},In=typeof window<"u"&&window.MotionDebug!==void 0,lr=["","X","Y","Z"],Km={visibility:"hidden"},zo=1e3;let Vm=0;function ur(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function ll(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=gc(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ve,!(r||o))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&ll(s)}function ul({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(i={},c=e==null?void 0:e()){this.id=Vm++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,In&&(Ht.totalNodes=Ht.resolvedTargetDeltas=Ht.recalculatedProjection=0),this.nodes.forEach(Qm),this.nodes.forEach(qm),this.nodes.forEach($m),this.nodes.forEach(Ym),In&&window.MotionDebug.record(Ht)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new wm)}addEventListener(i,c){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new yi),this.eventHandlers.get(i).add(c)}notifyListeners(i,...c){const a=this.eventHandlers.get(i);a&&a.notify(...c)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xm(i),this.instance=i;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(l||a)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Sm(d,250),ys.hasAnimatedSinceResize&&(ys.hasAnimatedSinceResize=!1,this.nodes.forEach($o))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:m,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||rA,{onLayoutAnimationStart:B,onLayoutAnimationComplete:C}=u.getProps(),y=!this.targetLayout||!cl(this.targetLayout,A)||m,F=!d&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||F||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,F);const w={...mi(g,"layout"),onPlay:B,onComplete:C};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else d||$o(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,bt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eA),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ll(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:a}=this.options;if(c===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qo);return}this.isUpdating||this.nodes.forEach(Wm),this.isUpdating=!1,this.nodes.forEach(zm),this.nodes.forEach(jm),this.nodes.forEach(Xm),this.clearAllSnapshots();const c=ct.now();we.delta=Bt(0,1e3/60,c-we.timestamp),we.timestamp=c,we.isProcessing=!0,er.update.process(we),er.preRender.process(we),er.render.process(we),we.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ii.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Zm),this.sharedNodes.forEach(tA)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=De(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(c=!1),c){const a=s(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:a,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!r)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!al(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;i&&(c||Ot(this.latestValues)||u)&&(r(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const c=this.measurePageBox();let a=this.removeElementScroll(c);return i&&(a=this.removeTransform(a)),iA(a),{animationId:this.root.animationId,measuredBox:c,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:c}=this.options;if(!c)return De();const a=c.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(oA))){const{scroll:u}=this.root;u&&(on(a.x,u.offset.x),on(a.y,u.offset.y))}return a}removeElementScroll(i){var c;const a=De();if(Xe(a,i),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return a;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:d}=u;u!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&Xe(a,i),on(a.x,h.offset.x),on(a.y,h.offset.y))}return a}applyTransform(i,c=!1){const a=De();Xe(a,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];!c&&u.options.layoutScroll&&u.scroll&&u!==u.root&&an(a,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ot(u.latestValues)&&an(a,u.latestValues)}return Ot(this.latestValues)&&an(a,this.latestValues),a}removeTransform(i){const c=De();Xe(c,i);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!Ot(l.latestValues))continue;_r(l.latestValues)&&l.updateSnapshot();const u=De(),h=l.measurePageBox();Xe(u,h),jo(c,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return Ot(this.latestValues)&&jo(c,this.latestValues),c}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==we.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var c;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=we.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),Un(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Xe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=De(),this.targetWithTransforms=De()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lm(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xe(this.target,this.layout.layoutBox),tl(this.target,this.targetDelta)):Xe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=De(),this.relativeTargetOrigin=De(),Un(this.relativeTargetOrigin,this.target,m.target),Xe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}In&&Ht.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_r(this.parent.latestValues)||el(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const c=this.getLead(),a=!!this.resumingFrom||this!==c;let l=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===we.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Xe(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;Bm(this.layoutCorrected,this.treeScale,this.path,a),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=De());const{target:A}=c;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Jo(this.prevProjectionDelta.x,this.projectionDelta.x),Jo(this.prevProjectionDelta.y,this.projectionDelta.y)),Hn(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!Wo(this.projectionDelta.x,this.prevProjectionDelta.x)||!Wo(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),In&&Ht.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rn(),this.projectionDelta=rn(),this.projectionDeltaWithTransform=rn()}setAnimationOrigin(i,c=!1){const a=this.snapshot,l=a?a.latestValues:{},u={...this.latestValues},h=rn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const d=De(),m=a?a.source:void 0,A=this.layout?this.layout.source:void 0,g=m!==A,B=this.getStack(),C=!B||B.members.length<=1,y=!!(g&&!C&&this.options.crossfade===!0&&!this.path.some(sA));this.animationProgress=0;let F;this.mixTargetDelta=w=>{const T=w/1e3;ea(h.x,i.x,T),ea(h.y,i.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Un(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nA(this.relativeTarget,this.relativeTargetOrigin,d,T),F&&Nm(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=De()),Xe(F,this.relativeTarget)),g&&(this.animationValues=u,Gm(u,l,this.latestValues,T,y,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(bt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ve.update(()=>{ys.hasAnimatedSinceResize=!0,this.currentAnimation=Fm(0,zo,{...i,onUpdate:c=>{this.mixTargetDelta(c),i.onUpdate&&i.onUpdate(c)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zo),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:c,target:a,layout:l,latestValues:u}=i;if(!(!c||!a||!l)){if(this!==i&&this.layout&&l&&hl(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||De();const h=Ke(this.layout.layoutBox.x);a.x.min=i.target.x.min,a.x.max=a.x.min+h;const d=Ke(this.layout.layoutBox.y);a.y.min=i.target.y.min,a.y.max=a.y.min+d}Xe(c,a),an(c,u),Hn(this.projectionDeltaWithTransform,this.layoutCorrected,c,u)}}registerSharedNode(i,c){this.sharedNodes.has(i)||this.sharedNodes.set(i,new km),this.sharedNodes.get(i).add(c);const l=c.options.initialPromotionConfig;c.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(c):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:c}=this.options;return c?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:c}=this.options;return c?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:c,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),i&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let c=!1;const{latestValues:a}=i;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(c=!0),!c)return;const l={};a.z&&ur("z",i,l,this.animationValues);for(let u=0;u<lr.length;u++)ur(`rotate${lr[u]}`,i,l,this.animationValues),ur(`skew${lr[u]}`,i,l,this.animationValues);i.render();for(const u in l)i.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);i.scheduleRender()}getProjectionStyles(i){var c,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Km;const l={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=vs(i==null?void 0:i.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none",l;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=vs(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Ot(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),l.transform=Jm(this.projectionDeltaWithTransform,this.treeScale,d),u&&(l.transform=u(d,l.transform));const{x:m,y:A}=this.projectionDelta;l.transformOrigin=`${m.origin*100}% ${A.origin*100}% 0`,h.animationValues?l.opacity=h===this?(a=(c=d.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in bs){if(d[g]===void 0)continue;const{correct:B,applyTo:C}=bs[g],y=l.transform==="none"?d[g]:B(d[g],h);if(C){const F=C.length;for(let w=0;w<F;w++)l[C[w]]=y}else l[g]=y}return this.options.layoutId&&(l.pointerEvents=h===this?vs(i==null?void 0:i.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var c;return(c=i.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(qo),this.root.sharedNodes.clear()}}}function jm(t){t.updateLayout()}function Xm(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:o}=t.options,i=n.source!==t.layout.source;o==="size"?Ye(h=>{const d=i?n.measuredBox[h]:n.layoutBox[h],m=Ke(d);d.min=s[h].min,d.max=d.min+m}):hl(o,n.layoutBox,s)&&Ye(h=>{const d=i?n.measuredBox[h]:n.layoutBox[h],m=Ke(s[h]);d.max=d.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const c=rn();Hn(c,s,n.layoutBox);const a=rn();i?Hn(a,t.applyTransform(r,!0),n.measuredBox):Hn(a,s,n.layoutBox);const l=!al(c);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:m}=h;if(d&&m){const A=De();Un(A,n.layoutBox,d.layoutBox);const g=De();Un(g,s,m.layoutBox),cl(A,g)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=A,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:a,layoutDelta:c,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function Qm(t){In&&Ht.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Ym(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Zm(t){t.clearSnapshot()}function qo(t){t.clearMeasurements()}function Wm(t){t.isLayoutDirty=!1}function zm(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $o(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qm(t){t.resolveTargetDelta()}function $m(t){t.calcProjection()}function eA(t){t.resetSkewAndRotation()}function tA(t){t.removeLeadSnapshot()}function ea(t,e,n){t.translate=Ee(e.translate,0,n),t.scale=Ee(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ta(t,e,n,s){t.min=Ee(e.min,n.min,s),t.max=Ee(e.max,n.max,s)}function nA(t,e,n,s){ta(t.x,e.x,n.x,s),ta(t.y,e.y,n.y,s)}function sA(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rA={duration:.45,ease:[.4,0,.1,1]},na=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sa=na("applewebkit/")&&!na("chrome/")?Math.round:Je;function ra(t){t.min=sa(t.min),t.max=sa(t.max)}function iA(t){ra(t.x),ra(t.y)}function hl(t,e,n){return t==="position"||t==="preserve-aspect"&&!cm(Zo(e),Zo(n),.2)}function oA(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const aA=ul({attachResizeListener:(t,e)=>Xn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hr={current:void 0},dl=ul({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!hr.current){const t=new aA({});t.mount(window),t.setOptions({layoutScroll:!0}),hr.current=t}return hr.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),cA={pan:{Feature:Tm},drag:{Feature:Mm,ProjectionNode:dl,MeasureLayout:rl}};function ia(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=s[r];o&&ve.postRender(()=>o(e,qn(e)))}class lA extends Rt{mount(){const{current:e}=this.node;e&&(this.unmount=lf(e,n=>(ia(this.node,n,"Start"),s=>ia(this.node,s,"End"))))}unmount(){}}class uA extends Rt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zn(Xn(this.node.current,"focus",()=>this.onFocus()),Xn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oa(t,e,n){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=s[r];o&&ve.postRender(()=>o(e,qn(e)))}class hA extends Rt{mount(){const{current:e}=this.node;e&&(this.unmount=ff(e,n=>(oa(this.node,n,"Start"),(s,{success:r})=>oa(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hr=new WeakMap,dr=new WeakMap,dA=t=>{const e=Hr.get(t.target);e&&e(t)},fA=t=>{t.forEach(dA)};function pA({root:t,...e}){const n=t||document;dr.has(n)||dr.set(n,{});const s=dr.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(fA,{root:t,...e})),s[r]}function mA(t,e,n){const s=pA(e);return Hr.set(t,n),s.observe(t),()=>{Hr.delete(t),s.unobserve(t)}}const AA={some:0,all:1};class gA extends Rt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:o}=e,i={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:AA[r]},c=a=>{const{isIntersecting:l}=a;if(this.isInView===l||(this.isInView=l,o&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=l?u:h;d&&d(a)};return mA(this.node.current,i,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(BA(e,n))&&this.startObserver()}unmount(){}}function BA({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const vA={inView:{Feature:gA},tap:{Feature:hA},focus:{Feature:uA},hover:{Feature:lA}},CA={layout:{ProjectionNode:dl,MeasureLayout:rl}},Ur={current:null},fl={current:!1};function yA(){if(fl.current=!0,!!ei)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ur.current=t.matches;t.addListener(e),e()}else Ur.current=!1}const EA=[...Hc,Pe,Dt],MA=t=>EA.find(Oc(t)),aa=new WeakMap;function TA(t,e,n){for(const s in e){const r=e[s],o=n[s];if(Ge(r))t.addValue(s,r);else if(Ge(o))t.addValue(s,Vn(r,{owner:t}));else if(o!==r)if(t.hasValue(s)){const i=t.getValue(s);i.liveStyle===!0?i.jump(r):i.hasAnimated||i.set(r)}else{const i=t.getStaticValue(s);t.addValue(s,Vn(i!==void 0?i:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const ca=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bA{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:o,visualState:i},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ri,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=ct.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,ve.render(this.render,!1,!0))};const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Gs(n),this.isVariantNode=ja(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const d in h){const m=h[d];a[d]!==void 0&&Ge(m)&&m.set(a[d],!1)}}mount(e){this.current=e,aa.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),fl.current||yA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ur.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){aa.delete(this.current),this.projection&&this.projection.unmount(),bt(this.notifyUpdate),bt(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=An.has(e),r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&ve.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in dn){const n=dn[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):De()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<ca.length;s++){const r=ca[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,i=e[o];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=TA(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Vn(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Lc(r)||Dc(r))?r=parseFloat(r):!MA(r)&&Dt.test(n)&&(r=Sc(e,n)),this.setBaseTarget(e,Ge(r)?r.get():r)),Ge(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const i=ci(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(r=i[e])}if(s&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ge(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new yi),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class pl extends bA{constructor(){super(...arguments),this.KeyframeResolver=Uc}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ge(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function DA(t){return window.getComputedStyle(t)}class RA extends pl{constructor(){super(...arguments),this.type="html",this.renderInstance=Za}readValueFromInstance(e,n){if(An.has(n)){const s=Di(n);return s&&s.default||0}else{const s=DA(e),r=(sc(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return nl(e,n)}build(e,n,s){di(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return ai(e,n,s)}}class FA extends pl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=De}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(An.has(n)){const s=Di(n);return s&&s.default||0}return n=Wa.has(n)?n:ri(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return $a(e,n,s)}build(e,n,s){fi(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,r){za(e,n,s,r)}mount(e){this.isSVGTag=pi(e.tagName),super.mount(e)}}const xA=(t,e)=>oi(t)?new FA(e):new RA(e,{allowProjection:t!==b.Fragment}),IA=nf({...$p,...vA,...cA,...CA},xA),JA=Bd(IA),wA={some:0,all:1};function SA(t,e,{root:n,margin:s,amount:r="some"}={}){const o=dc(t),i=new WeakMap,c=l=>{l.forEach(u=>{const h=i.get(u.target);if(u.isIntersecting!==!!h)if(u.isIntersecting){const d=e(u);typeof d=="function"?i.set(u.target,d):a.unobserve(u.target)}else typeof h=="function"&&(h(u),i.delete(u.target))})},a=new IntersectionObserver(c,{root:n,rootMargin:s,threshold:typeof r=="number"?r:wA[r]});return o.forEach(l=>a.observe(l)),()=>a.disconnect()}function KA(t,{root:e,margin:n,amount:s,once:r=!1}={}){const[o,i]=b.useState(!1);return b.useEffect(()=>{if(!t.current||r&&o)return;const c=()=>(i(!0),r?void 0:()=>i(!1)),a={root:e&&e.current||void 0,margin:n,amount:s};return SA(t.current,c,a)},[e,t,n,r,s]),o}export{HA as O,OA as P,UA as S,KA as a,JA as m,jr as u};
